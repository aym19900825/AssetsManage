webpackJsonp([12],{"13jd":function(e,t){},IRt2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("QmSG"),o=a("GkRW"),i=a("h7vj"),n=a("hbvp"),r=a("hrNl"),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.show?a("div",{staticClass:"mask"}):e._e(),e._v(" "),e.show?a("div",{staticClass:"mask_divbg"},[a("div",{staticClass:"mask_div"},[a("div",{staticClass:"mask_title_div clearfix"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.addtitle,expression:"addtitle"}],staticClass:"mask_title"},[e._v("添加应用管理")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.modifytitle,expression:"modifytitle"}],staticClass:"mask_title"},[e._v("修改应用管理")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.viewtitle,expression:"viewtitle"}],staticClass:"mask_title"},[e._v("查看应用管理")]),e._v(" "),a("div",{staticClass:"mask_anniu"},[a("span",{staticClass:"mask_span mask_max",on:{click:e.toggle}},[a("i",{class:{"icon-maximization":e.isok1,"icon-restore":e.isok2}})]),e._v(" "),a("span",{staticClass:"mask_span",on:{click:e.close}},[a("i",{staticClass:"icon-close1"})])])]),e._v(" "),a("div",{staticClass:"mask_content"},[a("el-form",{ref:"dataInfo",staticClass:"demo-adduserForm",attrs:{model:e.dataInfo,"label-width":"110px"}},[a("div",{staticClass:"accordion",attrs:{id:"information"}},[a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"应用管理",name:"1"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"应用英文名称",prop:"code"}},[a("el-input",{attrs:{disabled:e.noedit},model:{value:e.dataInfo.code,callback:function(t){e.$set(e.dataInfo,"code",t)},expression:"dataInfo.code"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"应用名称",prop:"name"}},[a("el-input",{attrs:{disabled:e.noedit},model:{value:e.dataInfo.name,callback:function(t){e.$set(e.dataInfo,"name",t)},expression:"dataInfo.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"处理类",prop:"handleclass"}},[a("el-input",{attrs:{disabled:e.noedit},model:{value:e.dataInfo.handleclass,callback:function(t){e.$set(e.dataInfo,"handleclass",t)},expression:"dataInfo.handleclass"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-input",{attrs:{disabled:e.noedit},model:{value:e.dataInfo.type,callback:function(t){e.$set(e.dataInfo,"type",t)},expression:"dataInfo.type"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"应用描述",prop:"description"}},[a("el-input",{attrs:{disabled:e.noedit},model:{value:e.dataInfo.description,callback:function(t){e.$set(e.dataInfo,"description",t)},expression:"dataInfo.description"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"数据库表",prop:"object_id"}},[a("el-input",{attrs:{disabled:e.noedit},model:{value:e.dataInfo.object_id,callback:function(t){e.$set(e.dataInfo,"object_id",t)},expression:"dataInfo.object_id"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"模块",prop:"module"}},[a("el-input",{attrs:{disabled:e.noedit},model:{value:e.dataInfo.module,callback:function(t){e.$set(e.dataInfo,"module",t)},expression:"dataInfo.module"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{attrs:{disabled:e.noedit},model:{value:e.dataInfo.sort,callback:function(t){e.$set(e.dataInfo,"sort",t)},expression:"dataInfo.sort"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"流程",prop:"flowkey"}},[a("el-input",{attrs:{disabled:e.noedit},model:{value:e.dataInfo.flowkey,callback:function(t){e.$set(e.dataInfo,"flowkey",t)},expression:"dataInfo.flowkey"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"流程代办单据号",prop:"flow_todo_num"}},[a("el-input",{attrs:{disabled:e.noedit},model:{value:e.dataInfo.flow_todo_num,callback:function(t){e.$set(e.dataInfo,"flow_todo_num",t)},expression:"dataInfo.flow_todo_num"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"流程代办描述",prop:"flow_todo_desc"}},[a("el-input",{attrs:{disabled:e.noedit},model:{value:e.dataInfo.flow_todo_desc,callback:function(t){e.$set(e.dataInfo,"flow_todo_desc",t)},expression:"dataInfo.flow_todo_desc"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"报表类型",prop:"reportId","label-width":"100px"}},[a("el-select",{attrs:{multiple:"",disabled:e.noedit},model:{value:e.dataInfo.reportId,callback:function(t){e.$set(e.dataInfo,"reportId",t)},expression:"dataInfo.reportId"}},e._l(e.selectData,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}))],1)],1)],1)],1),e._v(" "),a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.views,expression:"views"}],attrs:{title:"其它",name:"2"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"创建人",prop:"createUser"}},[a("el-input",{attrs:{disabled:e.edit},model:{value:e.dataInfo.createUser,callback:function(t){e.$set(e.dataInfo,"createUser",t)},expression:"dataInfo.createUser"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"创建时间",prop:"createTime"}},[a("el-input",{attrs:{disabled:e.edit},model:{value:e.dataInfo.createTime,callback:function(t){e.$set(e.dataInfo,"createTime",t)},expression:"dataInfo.createTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"修改人",prop:"updateUser"}},[a("el-input",{attrs:{placeholder:"当前修改人",disabled:e.edit},model:{value:e.dataInfo.updateUser,callback:function(t){e.$set(e.dataInfo,"updateUser",t)},expression:"dataInfo.updateUser"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"变更时间",prop:"updateTime"}},[a("el-input",{attrs:{placeholder:"当前修改时间",disabled:e.edit},model:{value:e.dataInfo.updateTime,callback:function(t){e.$set(e.dataInfo,"updateTime",t)},expression:"dataInfo.updateTime"}})],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.noviews,expression:"noviews"}],staticClass:"el-dialog__footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveAndUpdate}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.addtitle,expression:"addtitle"}],attrs:{type:"success"},on:{click:e.saveAndSubmit}},[e._v("保存并继续")]),e._v(" "),a("el-button",{on:{click:e.close}},[e._v("取消")])],1)])],1)]),e._v(" "),a("reportmask",{ref:"reportmask",on:{reportid:e.reportid,reports:e.reports}})],1):e._e()])},staticRenderFns:[]};var c=function(e){a("13jd")},d=a("VU/8")(r.a,l,!1,c,"data-v-dc8b48da",null).exports,p=a("VEhc"),u={name:"customer_management",components:{vheader:o.a,navs_left:n.a,navs_header:i.a,categorymask:d,tableControle:p.a},data:function(){return{basic_url:s.a.dev_url,loadSign:!0,commentArr:{},loading:!1,value:"",options:[{value:"1",label:"活动"},{value:"0",label:"不活动"}],searchData:{page:1,limit:10,nickname:"",enabled:"",searchKey:"",searchValue:"",companyId:"",deptId:""},checkedName:["应用英文名称","应用名称","处理类","应用描述","数据库表","模块","排序","创建时间","变更时间","流程","流程代办单据号","流程代办描述"],tableHeader:[{label:"应用英文名称",prop:"code"},{label:"应用名称",prop:"name"},{label:"处理类",prop:"handleclass"},{label:"类型",prop:"type"},{label:"应用描述",prop:"description"},{label:"数据库表",prop:"object_id"},{label:"模块",prop:"module"},{label:"排序",prop:"sort"},{label:"创建时间",prop:"createTime"},{label:"变更时间",prop:"updateTime"},{label:"流程",prop:"flowkey"},{label:"流程代办单据号",prop:"flow_todo_num"},{label:"流程代办描述",prop:"流程代办描述"}],selUser:[],applicationList:[],search:!1,show:!1,down:!0,up:!1,isShow:!1,ismin:!0,fullHeight:document.documentElement.clientHeight-210+"px",searchList:{name:"",description:""},resourceData:[],resourceDialogisShow:!1,resourceCheckedKey:[],resourceProps:{categorymaskren:"subDepts",label:"simplename"},page:{currentPage:1,pageSize:20,totalCount:0},dataInfo:{}}},methods:{rowClass:function(e){e.row,e.rowIndex;return"text-align:center"},loadMore:function(){var e=this,t=sessionStorage.getItem("up2down");if(this.loadSign){if("down"==t){if(this.page.currentPage++,this.page.currentPage>Math.ceil(this.page.totalCount/this.page.pageSize))return this.page.currentPage=Math.ceil(this.page.totalCount/this.page.pageSize),!1}else if(this.page.currentPage--,this.page.currentPage<1)return this.page.currentPage=1,!1;this.loadSign=!1,setTimeout(function(){e.loadSign=!0},1e3),this.requestData()}},tableControle:function(e){this.checkedName=e},sizeChange:function(e){this.page.pageSize=e,this.requestData()},currentChange:function(e){this.page.currentPage=e,this.requestData()},searchinfo:function(e){this.page.currentPage=1,this.page.pageSize=20,this.requestData()},resetbtn:function(){this.searchList={name:"",description:""},this.requestData()},reset:function(){this.dataInfo={ID:"",NUM:"",TYPE:"",STATUS:"活动",VERSION:"1",DEPARTMENT:"",ENTERBY:"",ENTERDATE:"",CHANGEBY:"",CHANGEDATE:""},void 0!==this.$refs.dataInfo&&this.$refs.dataInfo.resetFields()},openAddMgr:function(){this.reset(),this.$refs.categorymask.open(),this.$refs.categorymask.visible()},modify:function(){0!=this.selUser.length?this.selUser.length>1?this.$message({message:"不可同时修改多个数据",type:"warning"}):(this.dataInfo=this.selUser[0],console.log(this.selUser[0]),this.$refs.categorymask.detail(this.selUser[0].id)):this.$message({message:"请您选择要修改的数据",type:"warning"})},view:function(e){this.dataInfo=e,this.$refs.categorymask.view()},modestsearch:function(){this.search=!this.search,this.down=!this.down,this.up=!this.up},deluserinfo:function(){var e=this,t=this.selUser;if(0!=t.length)if(t.length>1)this.$message({message:"不可删除多条数据",type:"warning"});else{for(var a=this.selUser[0].id,s=this.basic_url+"/api-apps/appcfg/"+a,o=t,i=[],n=0;n<o.length;n++)i.push(o[n].ID);var r={ids:i.toString(",")};this.$confirm("确定删除此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){t.value;e.$axios.delete(s,{params:r}).then(function(t){0==t.data.resp_code&&(e.$message({message:"删除成功",type:"success"}),e.requestData())}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要删除的数据",type:"warning"})},importData:function(){},exportData:function(){},Printing:function(){},Configuration:function(){this.$router.push({path:"/inspection_project"})},judge:function(e){e.STATUS="1"==e.STATUS?"活动":"不活动"},dateFormat:function(e,t){var a=e[t.property];return void 0==a?"":this.$moment(a).format("YYYY-MM-DD")},SelChange:function(e){this.selUser=e},requestData:function(e){var t=this;this.loading=!0;var a={page:this.page.currentPage,limit:this.page.pageSize,name:this.searchList.name,description:this.searchList.description},s=this.basic_url+"/api-apps/appcfg";this.$axios.get(s,{params:a}).then(function(e){t.page.totalCount=e.data.count;var a=Math.ceil(t.page.totalCount/t.page.pageSize);t.page.currentPage>=a?t.loadSign=!1:t.loadSign=!0,t.commentArr[t.page.currentPage]=e.data.data;for(var s=[],o=1;o<=a;o++)if(void 0!==t.commentArr[o]&&t.commentArr[o].length>0)for(var i=0;i<t.commentArr[o].length;i++)s.push(t.commentArr[o][i]);t.applicationList=s,t.loading=!1}).catch(function(e){})},handleNodeClick:function(e){},formatter:function(e,t){return e.enabled},childByValue:function(e){this.$refs.navsheader.showClick(e)}},mounted:function(){this.requestData()}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"headerbg"},[a("vheader"),e._v(" "),a("navs_header",{ref:"navsheader"})],1),e._v(" "),a("div",{staticClass:"contentbg"},[a("navs_left",{ref:"navleft",on:{childByValue:e.childByValue}}),e._v(" "),a("div",{staticClass:"wrapper wrapper-content"},[a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"fixed-table-toolbar clearfix"},[a("div",{staticClass:"bs-bars pull-left"},[a("div",{staticClass:"hidden-xs",attrs:{id:"roleTableToolbar",role:"group"}},[a("button",{staticClass:"btn btn-green",attrs:{type:"button",id:""},on:{click:e.openAddMgr}},[a("i",{staticClass:"icon-add"}),e._v("添加\n\t              \t\t\t ")]),e._v(" "),a("button",{staticClass:"btn btn-blue button-margin",attrs:{type:"button"},on:{click:e.modify}},[a("i",{staticClass:"icon-edit"}),e._v("修改\n\t\t\t\t\t\t\t")]),e._v(" "),a("button",{staticClass:"btn btn-red button-margin",attrs:{type:"button"},on:{click:e.deluserinfo}},[a("i",{staticClass:"icon-trash"}),e._v("删除\n\t\t\t\t\t\t\t")]),e._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:e.modestsearch}},[a("i",{staticClass:"icon-search"}),e._v("高级查询\n\t\t\t\t\t    \t\t"),a("i",{directives:[{name:"show",rawName:"v-show",value:e.down,expression:"down"}],staticClass:"icon-arrow1-down"}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.up,expression:"up"}],staticClass:"icon-arrow1-up"})])])]),e._v(" "),a("div",{staticClass:"columns columns-right btn-group pull-right"},[e._m(0),e._v(" "),a("tableControle",{ref:"tableControle",attrs:{tableHeader:e.tableHeader,checkedName:e.checkedName},on:{tableControle:e.tableControle}})],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.search,expression:"search"}]},[a("el-form",{attrs:{model:e.searchList,"label-width":"70px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"应用名称",prop:"name"}},[a("el-input",{model:{value:e.searchList.name,callback:function(t){e.$set(e.searchList,"name",t)},expression:"searchList.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"应用描述",prop:"description"}},[a("el-input",{model:{value:e.searchList.description,callback:function(t){e.$set(e.searchList,"description",t)},expression:"searchList.description"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{"margin-top":"2px"},attrs:{type:"primary",size:"small"},on:{click:e.searchinfo}},[e._v("搜索")]),e._v(" "),a("el-button",{staticStyle:{"margin-top":"2px","margin-left":"2px"},attrs:{type:"primary",size:"small"},on:{click:e.resetbtn}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:24}},[a("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"header-cell-style":e.rowClass,data:e.applicationList,border:"",stripe:"",height:e.fullHeight,"default-sort":{prop:"applicationList",order:"descending"},"element-loading-text":"加载中…","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.9)"},on:{"selection-change":e.SelChange}},[this.checkedName.length>0?a("el-table-column",{attrs:{type:"selection",fixed:"",width:"55",align:"center"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("应用英文名称")?a("el-table-column",{attrs:{label:"应用英文名称",width:"155",sortable:"",prop:"code"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"blue",attrs:{title:"点击查看详情"},on:{click:function(a){e.view(t.row)}}},[e._v(e._s(t.row.code)+"\n\t\t\t\t\t\t\t\t\t\t")])]}}])}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("应用名称")?a("el-table-column",{attrs:{label:"应用名称",width:"150",sortable:"",prop:"name"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("处理类")?a("el-table-column",{attrs:{label:"处理类",width:"250",sortable:"",prop:"handleclass",align:"right"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("应用描述")?a("el-table-column",{attrs:{label:"应用描述",width:"185",sortable:"",prop:"description"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("数据库表")?a("el-table-column",{attrs:{label:"数据库表",width:"185",sortable:"",prop:"object_id"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("模块")?a("el-table-column",{attrs:{label:"模块",width:"185",sortable:"",prop:"module"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("排序")?a("el-table-column",{attrs:{label:"排序",width:"120",align:"right",sortable:"",prop:"sort"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("创建时间")?a("el-table-column",{attrs:{label:"创建时间",width:"120",prop:"createTime",sortable:"",formatter:e.dateFormat}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("变更时间")?a("el-table-column",{attrs:{label:"变更时间",width:"120",prop:"updateTime",sortable:"",formatter:e.dateFormat}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("流程")?a("el-table-column",{attrs:{label:"流程",width:"120",prop:"flowkey",sortable:"",formatter:e.dateFormat}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("流程代办单据号")?a("el-table-column",{attrs:{label:"流程代办单据号",width:"180",prop:"flow_todo_num",sortable:"",formatter:e.dateFormat}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("流程代办描述")?a("el-table-column",{attrs:{label:"流程代办描述",width:"180",prop:"flow_todo_desc",sortable:"",formatter:e.dateFormat}}):e._e()],1),e._v(" "),this.checkedName.length>0?a("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":e.page.currentPage,"page-sizes":[10,20,30,40,100],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.totalCount},on:{"size-change":e.sizeChange,"current-change":e.currentChange}}):e._e()],1)],1)],1)]),e._v(" "),a("categorymask",{ref:"categorymask",attrs:{dataInfo:e.dataInfo,page:e.page},on:{request:e.requestData,reset:e.reset}})],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"btn btn-default btn-refresh",attrs:{id:"refresh",title:"刷新"}},[t("i",{staticClass:"icon-refresh"})])}]};var m=a("VU/8")(u,h,!1,function(e){a("IZEj")},null,null);t.default=m.exports},IZEj:function(e,t){},NUns:function(e,t){},hrNl:function(e,t,a){"use strict";(function(e){var s=a("QmSG"),o=a("kLmY");t.a={name:"masks",components:{reportmask:o.a},data:function(){return{falg:!1,basic_url:s.a.dev_url,selUser:[],edit:!0,show:!1,isok1:!0,isok2:!1,down:!0,up:!1,activeNames:["1","2"],dialogVisible:!1,selectData:[],addtitle:!0,modifytitle:!1,viewtitle:!1,dept:!1,noedit:!1,views:!1,noviews:!0,modify:!1,hintshow:!1,statusshow1:!0,statusshow2:!1,dataInfo:{}}},methods:{reportid:function(e){this.dataInfo.reportId=e},reports:function(e){console.log(e),console.log(e.toString()),this.dataInfo.report=e.toString(),console.log(111111),console.log(this.dataInfo.report)},SelChange:function(e){this.selUser=e},visible:function(){var e=this;this.dataInfo.id="",this.$axios.get(this.basic_url+"/api-user/users/currentMap",{}).then(function(t){e.dataInfo.createUser=t.data.id;var a=new Date;e.dataInfo.createTime=e.$moment(a).format("YYYY-MM-DD HH:MM:SS")}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})}),this.addtitle=!0,this.modifytitle=!1,this.viewtitle=!1,this.dept=!1,this.noedit=!1,this.views=!1,this.noviews=!0,this.hintshow=!1,this.statusshow1=!0,this.statusshow2=!1},detail:function(e){var t=this;this.addtitle=!1,this.modifytitle=!0,this.viewtitle=!1,this.dept=!0,this.noedit=!1,this.views=!1,this.noviews=!0,this.hintshow=!1,this.statusshow1=!1,this.statusshow2=!0,this.$axios.get(this.basic_url+"/api-user/users/currentMap",{}).then(function(e){t.dataInfo.updateUser=e.data.id;var a=new Date;t.dataInfo.updateTime=t.$moment(a).format("YYYY-MM-DD HH:MM:SS")}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})});var a=this.basic_url+"/api-apps/appcfg/"+e;this.$axios.get(a,{}).then(function(e){if(console.log(e),t.dataInfo=e.data,console.log(t.dataInfo.reportId),"undefind"!=typeof t.dataInfo.reportId&&null!=t.dataInfo.reportId&&t.dataInfo.reportId.length>0){t.dataInfo.reportId=[];for(var a=t.dataInfo.reports,s=0;s<a.length;s++)t.dataInfo.reportId.push(a[s].id)}else null==t.dataInfo.reportId&&(console.log(1111),t.dataInfo.reportId=[],t.dataInfo.reports=[]);t.show=!0}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})},view:function(){this.addtitle=!1,this.modifytitle=!1,this.viewtitle=!0,this.dept=!0,this.noedit=!0,this.views=!0,this.noviews=!1,this.show=!0},close:function(){this.show=!1,this.$emit("request")},open:function(){this.show=!0},toggle:function(e){1==this.isok1?this.maxDialog():this.rebackDialog()},maxDialog:function(t){this.isok1=!1,this.isok2=!0,e(".mask_div").width(document.body.clientWidth),e(".mask_div").height(document.body.clientHeight-60),e(".mask_div").css("top","60px")},rebackDialog:function(){this.isok1=!0,this.isok2=!1,e(".mask_div").css("width","80%"),e(".mask_div").css("height","80%"),e(".mask_div").css("top","100px")},save:function(){var e=this,t=this;this.$refs.dataInfo.validate(function(a){if(a){console.log(e.dataInfo);var s=t.dataInfo,o="";if("undefind"!=typeof s.reportId&&s.reportId.length>0){var i=[];s.reportId.forEach(function(e){for(var a=t.selectData,s=0;s<a.length;s++)a[s].id==e&&(i.push(a[s]),o=o+a[s].id+",")}),s.reportId=o.substring(0,o.length-1),s.reports=i}else s.reportId="",s.reports=[];var n=e.basic_url+"/api-apps/appcfg/saveOrUpdate";console.log(e.dataInfo),e.$axios.post(n,e.dataInfo).then(function(t){0==t.data.resp_code?(e.$message({message:"保存成功",type:"success"}),e.$emit("request")):(e.show=!0,1==t.data.resp_code&&(""!=t.data.resp_msg?e.$message({message:t.data.resp_msg,type:"warning"}):e.$message({message:"相同数据不可重复添加！",type:"warning"})))}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})}),e.falg=!0}else e.show=!0,e.$message({message:"未填写完整，请填写",type:"warning"}),e.falg=!1})},saveAndUpdate:function(){this.save(),this.falg&&(this.show=!1)},saveAndSubmit:function(){this.save(),this.show=!0},dateFormat:function(e,t){var a=e[t.property];return void 0==a?"":this.$moment(a).format("YYYY-MM-DD")},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},getreport:function(){var e=this,t=this.basic_url+"/api-report/report";this.$axios.get(t,{}).then(function(t){console.log(t),e.selectData=t.data.data}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})}},mounted:function(){this.getreport()}}}).call(t,a("7t+N"))},kLmY:function(e,t,a){"use strict";var s=a("QmSG"),o={name:"category",data:function(){return{basic_url:s.a.dev_url,reportsList:[],loadSign:!0,commentArr:{},selUser:[],dialogReport:!1,page:{currentPage:1,pageSize:20,totalCount:0},searchList:{NUM:"",VERSION:"",DEPTID:""}}},methods:{dateFormat:function(e,t){var a=e[t.property];return void 0==a?"":this.$moment(a).format("YYYY-MM-DD")},rowClass:function(e){e.row,e.rowIndex;return"text-align:center"},SelChange:function(e){this.selUser=e},sizeChange:function(e){this.page.pageSize=e,this.requestData()},currentChange:function(e){this.page.currentPage=e,this.requestData()},close:function(){this.dialogReport=!1},visible:function(){console.log("youqu"),this.dialogReport=!0},loadMore:function(){var e=this;if(this.loadSign){if(this.loadSign=!1,this.page++,this.page>10)return;setTimeout(function(){e.loadSign=!0},1e3),console.log("到底了",this.page)}},getreport:function(){var e=this,t=this.basic_url+"/api-report/report";this.$axios.get(t,{}).then(function(t){e.reportsList=t.data.datas,e.page.totalCount=t.data.count}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})},determine:function(){if(console.log(this.selUser),0==this.selUser.length)this.$message({message:"请选择数据",type:"warning"});else{this.close();for(var e=[],t=[],a=0;a<this.selUser.length;a++)e.push(this.selUser[a].id),t.push(this.selUser[a].name);this.$emit("reportid",e),this.$emit("reports",t)}}},mounted:function(){this.getreport()}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{"modal-append-to-body":!1,title:"报表",height:"400px",visible:e.dialogReport,width:"80%"},on:{"update:visible":function(t){e.dialogReport=t}}},[a("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"}],staticStyle:{width:"100%"},attrs:{data:e.reportsList,border:"",stripe:"",height:"400px","default-sort":{prop:"reportsList",order:"descending"}},on:{"selection-change":e.SelChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"代码11122222",width:"200",sortable:"",prop:"code"}}),e._v(" "),a("el-table-column",{attrs:{label:"报表名称",width:"200",sortable:"",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"id",sortable:"",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{label:"报表文件",sortable:"",prop:"file"}}),e._v(" "),a("el-table-column",{attrs:{label:"备注",sortable:"",prop:"remarks"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型",sortable:"",prop:"type"}}),e._v(" "),a("el-table-column",{attrs:{label:"录入人",sortable:"",prop:"createby"}}),e._v(" "),a("el-table-column",{attrs:{label:"录入时间",sortable:"",prop:"createdate"}}),e._v(" "),a("el-table-column",{attrs:{label:"修改人",sortable:"",prop:"updateby"}}),e._v(" "),a("el-table-column",{attrs:{label:"修改日期",sortable:"",prop:"updatedate"}})],1),e._v(" "),a("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":e.page.currentPage,"page-sizes":[10,20,30,40],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.totalCount},on:{"size-change":e.sizeChange,"current-change":e.currentChange}}),e._v(" "),a("span",{staticClass:"el-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.determine}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogReport=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(o,i,!1,function(e){a("NUns")},null,null);t.a=n.exports}});
//# sourceMappingURL=12.4d42116b41a2b5239246.js.map