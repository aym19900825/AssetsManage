webpackJsonp([2],{"9dkR":function(e,t){},"G+FI":function(e,t,s){"use strict";(function(e){var i=s("QmSG");t.a={props:["roleIds"],name:"masks",data:function(){return{options:[{value:"1",label:"仅本人"},{value:"2",label:"按明细设置"}],value:"",roId:1,basic_url:i.a.dev_url,depetData:[],resourceDialogisShow:!1,dialogVisible:!1,resourceCheckedKey:[],resourceProps:{children:"children",label:"fullname"}}},methods:{visible:function(){this.dialogVisible=!0},handleCheckChange:function(e,t,s){this.cccData=e},getCheckedKeys:function(){},valueChange:function(){2==this.value?(this.depet(this.roleIds),e(".tree").show()):e(".tree").hide()},depet:function(e){var t=this;this.roId=e;var s=[],i=this.basic_url+"/api-user/depts/getTreeMapByRoleId/"+e;this.$axios.get(i,{}).then(function(e){t.depetData=e.data;for(var i=e.data,a=0;a<i.length;a++)if(i[a].checked&&(s.push(i[a].id),i[a].children.length>0)){s.pop(i[a].id);for(var n=0;n<i[a].children.length;n++)if(i[a].children[n].checked&&(s.push(i[a].children[n].id),null!=i[a].children[n].children&&i[a].children[n].children.length>0)){s.pop(i[a].children[n].id);for(var l=0;l<i[a].children[n].children.length;l++)if(i[a].children[n].children[l].checked&&(s.push(i[a].children[n].children[l].id),null!=i[a].children[n].children[l].children&&i[a].children[n].children[l].children.length>0)){s.pop(i[a].children[n].children[l].id);for(var o=0;o<i[a].children[n].children[l].children.length;o++)i[a].children[n].children[l].children[o].id&&s.push(i[a].children[n].children[l].children[o].id)}}}t.$nextTick(function(){t.setChecked(s)}),t.dialogVisible=!0}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})},setChecked:function(e){this.$refs.tree.setCheckedKeys(e)},getCheckedAll:function(){return this.flatState.filter(function(e){return e.node.indeterminate?e.node.indeterminate:e.node.checked}).map(function(e){return e.node})},determine:function(){for(var e=this,t=[],s=this.$refs.tree.getCheckedNodes(),i=this.$refs.tree.getHalfCheckedNodes(),a=0;a<i.length;a++)t.push(i[a].id);for(var n=0;n<s.length;n++)t.push(s[n].id);var l={deptids:t},o=this.basic_url+"/api-user/roles/"+this.roId+"/"+this.value;this.$axios.post(o,l).then(function(t){0==t.data.resp_code&&e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})},getdetail:function(t){var s=this;console.log(123456),console.log(t);var i=this.basic_url+"/api-user/roles/"+t;this.$axios.get(i,{}).then(function(i){console.log(i),s.value=i.data.datascope,2==i.data.datascope?(s.depet(t),e(".tree").show()):e(".tree").hide(),s.dialogVisible=!0})}},mounted:function(){console.log(123)}}}).call(t,s("7t+N"))},IqpQ:function(e,t,s){"use strict";var i=s("QmSG"),a={name:"masks",data:function(){return{roId:1,basic_url:i.a.dev_url,menuData:[],resourceDialogisShow:!1,dialogVisible:!1,resourceCheckedKey:[],resourceProps:{children:"children",label:"name"}}},methods:{handleCheckChange:function(e,t,s){this.cccData=e},getCheckedKeys:function(){console.log(this.$refs.tree.getCheckedKeys())},menu:function(e){var t=this;console.log(e);this.roId=e;var s=[],i=this.basic_url+"/api-user/menus/"+e+"/menus";this.$axios.get(i,{}).then(function(e){console.log(e),t.menuData=e.data;for(var i=e.data,a=0;a<i.length;a++)if(i[a].checked&&(s.push(i[a].id),i[a].children.length>0)){s.pop(i[a].id);i[a].children;for(var n=0;n<i[a].children.length;n++)if(console.log(i[a].children.length),i[a].children[n].checked&&(s.push(i[a].children[n].id),i[a].children[n].children.length>0)){s.pop(i[a].children[n].id);for(var l=0;l<i[a].children[n].children.length;l++)i[a].children[n].children[l].checked&&s.push(i[a].children[n].children[l].id)}}t.$nextTick(function(){t.setChecked(s)}),t.dialogVisible=!0}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})},setChecked:function(e){this.$refs.tree.setCheckedKeys(e)},getCheckedAll:function(){return this.flatState.filter(function(e){return e.node.indeterminate?e.node.indeterminate:e.node.checked}).map(function(e){return e.node})},queding:function(){var e=this;console.log(this.roId);var t=[],s=[],i=this.$refs.tree.getCheckedNodes(),a=this.$refs.tree.getHalfCheckedNodes();console.log(this.$refs.tree.getCheckedKeys().concat(s)),console.log(this.$refs.tree.getCheckedKeys()),console.log(a),console.log(i);for(var n=0;n<a.length;n++)"menu"==a[n].type&&s.push(a[n].id);for(var l=0;l<i.length;l++)"permission"==i[l].type&&t.push(i[l].id),"menu"==i[l].type&&s.push(i[l].id);var o={menuIds:s,permissionIds:t,roleId:this.roId},r=this.basic_url+"/api-user/menus/granted";this.$axios.post(r,o).then(function(t){0==t.data.resp_code&&e.$message({message:"操作成功",type:"success"}),e.dialogVisible=!1}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{"modal-append-to-body":!1,title:"权限配置",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("div",{staticClass:"scrollbar",staticStyle:{"max-height":"400px"}},[s("el-tree",{ref:"tree",attrs:{data:e.menuData,"show-checkbox":"","node-key":"id",props:e.resourceProps,"default-expand-all":""},on:{"check-change":e.handleCheckChange,click:e.getCheckedKeys}}),e._v(" "),s("div",{staticClass:"el-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.queding()}}},[e._v("确 定")]),e._v(" "),s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1)])],1)},staticRenderFns:[]};var l=s("VU/8")(a,n,!1,function(e){s("P6Kb")},null,null);t.a=l.exports},JsVq:function(e,t){},MmH5:function(e,t,s){"use strict";var i=s("G+FI"),a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{"modal-append-to-body":!1,title:"数据范围",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("div",{staticClass:"scrollbar",staticStyle:{"max-height":"400px"}},[s("el-select",{attrs:{placeholder:"请选择"},on:{change:e.valueChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),s("el-tree",{ref:"tree",staticClass:"tree",attrs:{data:e.depetData,"show-checkbox":"","node-key":"id","default-checked-keys":e.resourceCheckedKey,props:e.resourceProps,"default-expand-all":""},on:{"check-change":e.handleCheckChange,click:e.getCheckedKeys}}),e._v(" "),s("div",{staticClass:"el-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.determine()}}},[e._v("确 定")]),e._v(" "),s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1)])],1)},staticRenderFns:[]};var n=function(e){s("JsVq")},l=s("VU/8")(i.a,a,!1,n,null,null);t.a=l.exports},P6Kb:function(e,t){},Y1RP:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("er0j"),a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"headerbg"},[s("vheader"),e._v(" "),s("navs_header")],1),e._v(" "),s("div",{staticClass:"contentbg"},[s("navs_left"),e._v(" "),s("div",{staticClass:"wrapper wrapper-content"},[s("div",{staticClass:"ibox-content"},[s("div",{staticClass:"fixed-table-toolbar clearfix"},[s("div",{staticClass:"bs-bars pull-left"},[s("div",{staticClass:"hidden-xs",attrs:{id:"roleTableToolbar",role:"group"}},[s("button",{staticClass:"btn btn-green",attrs:{type:"button",id:""},on:{click:e.openAddMgr}},[s("i",{staticClass:"icon-add"}),e._v("添加\n                      \t\t\t")]),e._v(" "),s("button",{staticClass:"btn btn-blue button-margin",attrs:{type:"button"},on:{click:e.modify}},[s("i",{staticClass:"icon-edit"}),e._v("修改\n\t\t\t\t\t\t\t\t")]),e._v(" "),s("button",{staticClass:"btn btn-red button-margin",attrs:{type:"button"},on:{click:e.delroleinfo}},[s("i",{staticClass:"icon-trash"}),e._v("删除\n\t\t\t\t\t\t\t\t")]),e._v(" "),s("button",{staticClass:"btn btn-red button-margin",attrs:{type:"button"},on:{click:e.physicsDel}},[s("i",{staticClass:"icon-trash"}),e._v("物理删除\n\t\t\t\t\t\t\t")]),e._v(" "),s("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:e.menu}},[s("i",{staticClass:"icon-key"}),e._v("权限配置\n\t\t\t\t\t\t\t\t")]),e._v(" "),s("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:e.datalimit}},[s("i",{staticClass:"icon-data"}),e._v("数据范围\n\t\t\t\t\t\t\t\t")]),e._v(" "),s("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:e.modestsearch}},[s("i",{staticClass:"icon-search"}),e._v("高级查询\n\t\t\t\t\t\t    \t\t"),s("i",{directives:[{name:"show",rawName:"v-show",value:e.down,expression:"down"}],staticClass:"icon-arrow1-down"}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.up,expression:"up"}],staticClass:"icon-arrow1-up"})])])]),e._v(" "),s("div",{staticClass:"columns columns-right btn-group pull-right"},[e._m(0),e._v(" "),s("tableControle",{ref:"tableControle",attrs:{tableHeader:e.tableHeader,checkedName:e.checkedName},on:{tableControle:e.tableControle}})],1)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.search,expression:"search"}]},[s("el-form",{attrs:{model:e.searchList}},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:"角色名称",prop:"name","label-width":"70px"}},[s("el-input",{model:{value:e.searchList.name,callback:function(t){e.$set(e.searchList,"name",t)},expression:"searchList.name"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("el-form-item",{attrs:{label:"是否停用",prop:"inactive","label-width":"70px"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:""},model:{value:e.searchList.inactive,callback:function(t){e.$set(e.searchList,"inactive",t)},expression:"searchList.inactive"}},e._l(e.stopoptions,function(e,t){return s("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{staticStyle:{"margin-top":"2px"},attrs:{type:"primary",size:"small"},on:{click:e.searchinfo}},[e._v("搜索")]),e._v(" "),s("el-button",{staticStyle:{"margin-top":"2px","margin-left":"2px"},attrs:{type:"primary",size:"small"},on:{click:e.resetbtn}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.roleList,border:"",stripe:"","header-cell-style":e.rowClass,height:e.fullHeight,"default-sort":{prop:"roleList",order:"descending"},"element-loading-text":"加载中…","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.9)"},on:{"selection-change":e.SelChange}},[this.checkedName.length>0?s("el-table-column",{attrs:{type:"selection",fixed:"",width:"55",align:"center"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("角色编码")?s("el-table-column",{attrs:{label:"角色编码",sortable:"",prop:"code"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"blue",attrs:{title:"点击查看详情"},on:{click:function(s){e.view(t.row)}}},[e._v(e._s(t.row.code))])]}}])}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("角色名称")?s("el-table-column",{attrs:{label:"角色名称",sortable:"",prop:"name"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("是否停用")?s("el-table-column",{attrs:{label:"是否停用",sortable:"",prop:"inactive",formatter:e.judge}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("备注")?s("el-table-column",{attrs:{label:"备注",sortable:"",prop:"tips"}}):e._e()],1),e._v(" "),this.checkedName.length>0?s("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":e.page.currentPage,"page-sizes":[10,20,30,40],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.totalCount},on:{"size-change":e.sizeChange,"current-change":e.currentChange}}):e._e()],1)])])]),e._v(" "),s("rolemask",{ref:"child",attrs:{page:e.page},on:{request:e.requestData,requestTree:e.getKey}}),e._v(" "),s("datalimitmask",{ref:"limit",attrs:{roleIds:e.roleIds}}),e._v(" "),s("rolemeunmask",{ref:"role"})],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"btn btn-default btn-refresh",attrs:{id:"refresh",title:"刷新"}},[t("i",{staticClass:"icon-refresh"})])}]};var n=function(e){s("Z/1Y")},l=s("VU/8")(i.a,a,!1,n,"data-v-c13db754",null);t.default=l.exports},"Z/1Y":function(e,t){},bqI5:function(e,t,s){"use strict";(function(e){var i=s("QmSG");t.a={name:"masks",data:function(){return{basic_url:i.a.dev_url,value:"",stopoptions:[{value:"1",label:"是"},{value:"2",label:"否"}],dataoptions:[{value:"1",label:"所有数据"},{value:"2",label:"所在公司及以下数据"},{value:"3",label:"所在公司数据"},{value:"4",label:"所在部门及以下数据"},{value:"5",label:"所在部门数据"},{value:"6",label:"仅本人数据"},{value:"7",label:"按明细设置"}],edit:!0,"男":!0,"女":!1,stopshow:!1,stopselect:!1,show:!1,isok1:!0,isok2:!1,down:!0,up:!1,activeNames:["1"],fullHeight:document.documentElement.clientHeight-210+"px",dialogVisible:!1,roleList:{name:"",code:"",tips:"",deptId:""},rules:{code:[{required:!1,trigger:"blur",validator:this.Validators.isWorknumber}],name:[{required:!0,message:"必填",trigger:"blur"},{validator:this.Validators.isNickname,trigger:"blur"}],tips:[{required:!1,trigger:"blur",validator:this.Validators.isSpecificKey}],range:[{required:!0,message:"请选择机构属性",trigger:"chang"}]},resourceData:[],deptData:[],resourceDialogisShow:!1,resourceCheckedKey:[],resourceProps:{children:"children",label:"fullname"},companyId:"",deptId:"",cccData:{},addtitle:!0,modifytitle:!1,viewtitle:!1,dept:!1,noedit:!1,views:!1,noviews:!0,modify:!1,hintshow:!1,statusshow1:!0,statusshow2:!1}},methods:{renderContent:function(e,t){var s=t.node,i=t.data;t.store;return e("span",[e("i",{class:i.iconClass}),e("span",[s.label])])},nodeClick:function(e){"icon-file-text"!=e.iconClass&&("icon-file-normal"==e.iconClass?e.iconClass="icon-file-open":e.iconClass="icon-file-normal"),this.handleNodeClick()},handleCheckChange:function(e,t,s){this.cccData=e},handleNodeClick:function(e){"1"==e.type?(this.companyId=e.id,this.deptId=""):(this.deptId=e.id,this.companyId=""),this.requestData()},getKey:function(){var e=this,t=this.basic_url+"/api-user/depts/tree";this.$axios.get(t,{}).then(function(t){console.log(t),e.deptData=t.data,e.treeData=e.transformTree(e.deptData)})},transformTree:function(t){for(var s=0;s<t.length;s++)t[s].name=t[s].fullname,!t[s].pid||e.isArray(t[s].subDepts)?t[s].iconClass="icon-file-normal":t[s].iconClass="icon-file-text",e.isArray(t[s].subDepts)&&(t[s].children=this.transformTree(t[s].subDepts));return t},resetNew:function(){this.roleList={name:"",code:"",tips:"",deptName:""}},rand:function(e,t){return Math.floor(Math.random()*(t-e))+e},visible:function(){this.stopshow=!0,this.stopselect=!1,this.roleList.INACTIVE="否",this.addtitle=!0,this.modifytitle=!1,this.viewtitle=!1,this.dept=!1,this.noedit=!1,this.views=!1,this.noviews=!0,this.modify=!1,this.hintshow=!1,this.statusshow1=!0,this.statusshow2=!1},detail:function(e){var t=this;this.addtitle=!1,this.modifytitle=!0,this.viewtitle=!1,this.dept=!0,this.noedit=!1,this.views=!1,this.noviews=!0,this.hintshow=!1,this.modify=!0,this.statusshow1=!1,this.statusshow2=!0,this.stopshow=!1,this.stopselect=!0;var s=this.basic_url+"/api-user/roles/"+e;this.$axios.get(s,{}).then(function(e){t.roleList=e.data,t.show=!0}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})}),this.show=!0},view:function(e){this.addtitle=!1,this.modifytitle=!1,this.viewtitle=!0,this.dept=!0,this.noedit=!0,this.views=!0,this.noviews=!1,this.roleList=e,this.show=!0},close:function(){this.show=!1,this.$emit("request")},open:function(){this.show=!0},toggle:function(e){1==this.isok1?this.maxDialog():this.rebackDialog()},maxDialog:function(t){this.isok1=!1,this.isok2=!0,e(".mask_div").width(document.body.clientWidth),e(".mask_div").height(document.body.clientHeight-60),e(".mask_div").css("top","60px")},rebackDialog:function(){this.isok1=!0,this.isok2=!1,e(".mask_div").css("width","80%"),e(".mask_div").css("height","80%"),e(".mask_div").css("top","100px")},getCheckedNodes:function(){this.cccData=this.$refs.tree.getCheckedNodes()},submitForm:function(){var e=this;this.$refs.roleList.validate(function(t){if(!t)return!1;var s=e.basic_url+"/api-user/roles/saveOrUpdate";e.$axios.post(s,e.roleList).then(function(t){console.log(t),0==t.data.resp_code&&(e.$message({message:"保存成功",type:"success"}),e.show=!1,e.$emit("request"))}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})})},getDept:function(){var e=this,t=this.basic_url+"/api-user/depts/treeByType";this.$axios.get(t,{params:{type:2}}).then(function(t){e.resourceData=t.data,e.dialogVisible=!0})},queding:function(){this.getCheckedNodes(),this.placetext=!1,this.dialogVisible=!1,this.roleList.deptId=this.cccData[0].id,this.roleList.deptName=this.cccData[0].simplename},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})}},mounted:function(){this.getKey()},watch:{val:function(){}}}}).call(t,s("7t+N"))},er0j:function(e,t,s){"use strict";(function(e){var i=s("QmSG"),a=s("GkRW"),n=s("hbvp"),l=s("h7vj"),o=s("wk1c"),r=s("IqpQ"),c=s("MmH5"),d=s("VEhc");t.a={name:"user_management",components:{vheader:a.a,navs_header:l.a,navs_left:n.a,rolemask:o.a,rolemeunmask:r.a,datalimitmask:c.a,tableControle:d.a},data:function(){return{loading:!1,basic_url:i.a.dev_url,value:"",stopoptions:[{value:"1",label:"是"},{value:"2",label:"否"}],selUser:[],checkedName:["角色编码","角色名称","是否停用","备注"],tableHeader:[{label:"角色编码",prop:"code"},{label:"角色名称",prop:"name"},{label:"是否停用",prop:"inactive"},{label:"备注",prop:"tips"}],buttons:[],roleList:[],search:!1,down:!0,up:!1,fullHeight:document.documentElement.clientHeight-210+"px",searchList:{name:"",inactive:""},resourceData:[],treeData:[],page:{currentPage:1,pageSize:10,totalCount:0},selData:[],roleIds:{}}},methods:{rowClass:function(e){e.row,e.rowIndex;return"text-align:center"},tableControle:function(e){this.checkedName=e},sizeChange:function(e){this.page.pageSize=e,this.requestData()},currentChange:function(e){this.page.currentPage=e,this.requestData()},searchinfo:function(e){this.page.currentPage=1,this.page.pageSize=20,this.requestData()},resetbtn:function(){this.searchList={name:"",inactive:""},this.requestData()},judge:function(e){return"1"==e.inactive?"是":"否"},getbtn:function(e){"添加"==e.name?this.openAddMgr():"修改"==e.name?this.modify():"高级查询"==e.name?this.modestsearch():"活动"==e.name?this.unfreeze():"不活动"==e.name?this.freezeAccount():"删除"==e.name&&this.deluserinfo()},openAddMgr:function(){this.$refs.child.resetNew(),this.$refs.child.visible(),this.$refs.child.open()},datalimit:function(){this.selData=this.selUser,0!=this.selData.length?this.selData.length>1?this.$message({message:"不可同时修改多个数据",type:"warning"}):(this.roleIds=this.selData[0].id,this.$refs.limit.getdetail(this.selData[0].id)):this.$message({message:"请您选择要修改的数据",type:"warning"})},modify:function(){this.selData=this.selUser,0!=this.selData.length?this.selData.length>1?this.$message({message:"不可同时修改多个数据",type:"warning"}):(console.log(2333333),console.log(this.selData[0].id),this.$refs.child.detail(this.selData[0].id)):this.$message({message:"请您选择要修改的数据",type:"warning"})},menu:function(){this.selData=this.selUser,0!=this.selData.length?this.selData.length>1?this.$message({message:"不可同时修改多个数据",type:"warning"}):this.$refs.role.menu(this.selData[0].id):this.$message({message:"请您选择要修改的数据",type:"warning"})},view:function(e){this.$refs.child.view(e)},modestsearch:function(){this.search=!this.search,this.down=!this.down,this.up=!this.up},delroleinfo:function(){var e=this,t=this.selUser;if(0!=t.length){for(var s=this.basic_url+"/api-user/roles/deletes",i=t,a=[],n=0;n<i.length;n++)a.push(i[n].id);var l={ids:a.toString(",")};this.$confirm("确定删除此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){t.value;e.$axios.delete(s,{params:l}).then(function(t){0==t.data.resp_code&&(e.$message({message:"删除成功",type:"success"}),e.requestData())}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要删除的数据",type:"warning"})},physicsDel:function(){var e=this,t=this.selUser;if(0!=t.length){for(var s=this.basic_url+"/api-user/roles/deletes/physicsDel",i=t,a=[],n=0;n<i.length;n++)a.push(i[n].id);var l={ids:a.toString(",")};this.$confirm("确定删除此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){t.value;e.$axios.delete(s,{params:l}).then(function(t){0==t.data.resp_code&&(e.$message({message:"删除成功",type:"success"}),e.requestData())}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要删除的数据",type:"warning"})},dateFormat:function(e,t){var s=e[t.property];return void 0==s?"":this.$moment(s).format("YYYY-MM-DD")},SelChange:function(e){this.selUser=e},requestData:function(){var e=this;this.loading=!0;var t={page:this.page.currentPage,limit:this.page.pageSize,name:this.searchList.name,inactive:this.searchList.inactive},s=this.basic_url+"/api-user/roles";this.$axios.get(s,{params:t}).then(function(t){console.log(t),e.roleList=t.data.data,e.page.totalCount=t.data.count,e.loading=!1}).catch(function(e){})},getKey:function(){var e=this,t=this.basic_url+"/api-user/depts/tree";this.$axios.get(t,{}).then(function(t){e.resourceData=t.data,e.treeData=e.transformTree(e.resourceData)})},transformTree:function(t){for(var s=0;s<t.length;s++)t[s].name=t[s].fullname,!t[s].pid||e.isArray(t[s].subDepts)?t[s].iconClass="icon-file-normal":t[s].iconClass="icon-file-text",e.isArray(t[s].subDepts)&&(t[s].children=this.transformTree(t[s].subDepts));return t},childByValue:function(e){console.log(e)}},mounted:function(){this.requestData(),this.getKey()}}}).call(t,s("7t+N"))},wk1c:function(e,t,s){"use strict";var i=s("bqI5"),a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.show?s("div",{staticClass:"mask"}):e._e(),e._v(" "),e.show?s("div",{staticClass:"mask_divbg"},[s("div",{staticClass:"mask_div"},[s("div",{staticClass:"mask_title_div clearfix"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.addtitle,expression:"addtitle"}],staticClass:"mask_title"},[e._v("添加角色")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.modifytitle,expression:"modifytitle"}],staticClass:"mask_title"},[e._v("修改角色")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.viewtitle,expression:"viewtitle"}],staticClass:"mask_title"},[e._v("查看角色")]),e._v(" "),s("div",{staticClass:"mask_anniu"},[s("span",{staticClass:"mask_span mask_max",on:{click:e.toggle}},[s("i",{class:{"icon-maximization":e.isok1,"icon-restore":e.isok2}})]),e._v(" "),s("span",{staticClass:"mask_span",on:{click:e.close}},[s("i",{staticClass:"icon-close1"})])])]),e._v(" "),s("div",{staticClass:"mask_content"},[s("el-form",{ref:"roleList",staticClass:"demo-user",attrs:{model:e.roleList,rules:e.rules,"label-width":"110px"}},[s("div",{staticClass:"accordion"},[s("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[s("el-collapse-item",{attrs:{title:"基础信息",name:"1"}},[s("el-row",{attrs:{gutter:30}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"角色编码",prop:"code"}},[s("el-input",{attrs:{disabled:e.noedit},model:{value:e.roleList.code,callback:function(t){e.$set(e.roleList,"code",t)},expression:"roleList.code"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[s("el-input",{attrs:{disabled:e.noedit},model:{value:e.roleList.name,callback:function(t){e.$set(e.roleList,"name",t)},expression:"roleList.name"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"是否停用",prop:"inactive"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:e.noedit},model:{value:e.roleList.inactive,callback:function(t){e.$set(e.roleList,"inactive",t)},expression:"roleList.inactive"}},e._l(e.stopoptions,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:30}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"备注",prop:"tips"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写",disabled:e.noedit},model:{value:e.roleList.tips,callback:function(t){e.$set(e.roleList,"tips",t)},expression:"roleList.tips"}})],1)],1)],1)],1)],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.noviews,expression:"noviews"}],staticClass:"el-dialog__footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm()}}},[e._v("保存")]),e._v(" "),s("el-button",{on:{click:e.close}},[e._v("取消")])],1)])],1)]),e._v(" "),s("el-dialog",{attrs:{"modal-append-to-body":!1,title:"提示",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("el-tree",{ref:"tree",attrs:{data:e.resourceData,"show-checkbox":"","node-key":"id","default-checked-keys":e.resourceCheckedKey,props:e.resourceProps},on:{"node-click":e.handleNodeClick,"check-change":e.handleCheckChange}}),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.queding()}}},[e._v("确 定")])],1)],1)],1):e._e()])},staticRenderFns:[]};var n=function(e){s("9dkR")},l=s("VU/8")(i.a,a,!1,n,"data-v-573bd6c0",null);t.a=l.exports}});
//# sourceMappingURL=2.c186b1fb02da0ae40553.js.map