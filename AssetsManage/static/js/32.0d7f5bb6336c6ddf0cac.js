webpackJsonp([32],{"1o4i":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("bOdI"),s=a.n(n),i=a("QmSG"),r=a("GkRW"),l=a("n5Na"),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navbar-default navbar-static-side",style:{height:t.fullHeight}},[a("div",{staticClass:"navbarbg",on:{click:function(e){t.min2max()}}},[t._m(0)]),t._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:!t.isShow,expression:"!isShow"}],staticClass:"navs",attrs:{id:"side-menu"}},t._l(t.leftNavs,function(e){return a("li",{on:{click:function(a){t.addClickNav(e)}}},[a("router-link",{attrs:{to:e.navherf}},[a("i",{class:e.navicon}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.ismin,expression:"ismin"}],staticClass:"nav-label"},[t._v(t._s(e.navtitle))])])],1)}))])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"navbar-minimalize minimalize-styl-2"},[e("i",{staticClass:"icon-menu1"})])}]};var c=function(t){a("egCj")},h=a("VU/8")(l.a,o,!1,c,"data-v-54706a69",null).exports,d=a("h7vj"),u=a("JVtq"),p=a("VEhc"),v=s()({name:"customer_management",components:{vheader:r.a,navs_left:h,navs_header:d.a,tableControle:p.a,table:u.a},data:function(){return{basic_url:i.a.dev_url,dataUrl:"/api/api-user/users",searchData:{page:1,limit:10,nickname:"",enabled:"",searchKey:"",searchValue:"",companyId:"",deptId:""},checkedName:["检验/检测方法编号","中文名称","英文名称","类别","信息状态","版本","机构","录入人","录入时间","修改人","修改时间"],tableHeader:[{label:"检验/检测方法编号",prop:"M_NUM"},{label:"中文名称",prop:"M_NAME"},{label:"英文名称",prop:"M_ENAME"},{label:"类别",prop:"M_TYPE"},{label:"信息状态",prop:"STATUS"},{label:"版本",prop:"VERSION"},{label:"机构",prop:"DEPARTMENT"},{label:"录入人",prop:"ENTERBY"},{label:"录入时间",prop:"ENTERDATE"},{label:"修改人",prop:"CHANGEBY"},{label:"修改时间",prop:"CHANGEDATE"}],leftNavs:[{navicon:"icon-user",navtitle:"用户管理",navherf:"/personinfo"},{navicon:"icon-edit",navtitle:"英文名称管理",navherf:"/dept_management"},{navicon:"icon-role-site",navtitle:"角色管理",navherf:"/role_management"},{navicon:"icon-file-text",navtitle:"客户管理",navherf:"/customer_management"},{navicon:"icon-file-text",navtitle:"产品类别",navherf:"/products_category"},{navicon:"icon-file-text",navtitle:"产品",navherf:"/products"},{navicon:"icon-file-text",navtitle:"检验/检测标准",navherf:"/testing_standard"},{navicon:"icon-file-text",navtitle:"检验/检测项目",navherf:"/testing_projects"},{navicon:"icon-file-text",navtitle:"检验/检测方法",navherf:"/testing_methods"},{navicon:"icon-file-text",navtitle:"自动编号设置",navherf:"/number_settings"}],companyId:"",deptId:"",selUser:[],"活动":!0,"不活动":!1,"男":!0,"女":!1,userList:[],search:!1,show:!1,down:!0,up:!1,isShow:!1,ismin:!0,fullHeight:document.documentElement.clientHeight-210+"px",searchList:{nickname:"",enabled:"",createTime:""},resourceData:[],resourceDialogisShow:!1,resourceCheckedKey:[],resourceProps:{children:"subDepts",label:"simplename"},userData:[],page:{currentPage:1,pageSize:10,totalCount:0},aaaData:[]}},mounted:function(){},methods:{tableControle:function(t){this.checkedName=t},sizeChange:function(t){this.page.pageSize=t,this.requestData()},currentChange:function(t){this.page.currentPage=t,this.requestData()},searchinfo:function(t){this.page.currentPage=1,this.page.pageSize=10,this.requestData()},openAddMgr:function(){this.$refs.child.visible()},modify:function(){this.aaaData=this.selUser,0!=this.aaaData.length?this.aaaData.length>1?this.$message({message:"不可同时修改多个用户",type:"warning"}):this.$refs.child.detail():this.$message({message:"请您选择要修改的用户",type:"warning"})},modestsearch:function(){this.search=!this.search,this.down=!this.down,this.up=!this.up},deluserinfo:function(){var t=this,e=this.selUser;if(0!=e.length)if(e.length>1)this.$message({message:"不可同时删除多个用户",type:"warning"});else{var a=e[0].id,n=this.basic_url+"/api-user/users/"+a;this.$axios.delete(n,{}).then(function(e){0==e.data.resp_code&&(t.$message({message:"删除成功",type:"success"}),t.requestData())}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}else this.$message({message:"请您选择要删除的用户",type:"warning"})},importData:function(){},exportData:function(){},Printing:function(){},judge:function(t){return t.enabled?"活动":"不活动"},dateFormat:function(t,e){var a=t[e.property];return void 0==a?"":this.$moment(a).format("YYYY-MM-DD")},insert:function(){this.users.push(this.user)},remove:function(t){this.users.splice(t,1)},SelChange:function(t){this.selUser=t},requestData:function(t){var e=this,a={page:this.page.currentPage,limit:this.page.pageSize,nickname:this.searchList.nickname,enabled:this.searchList.enabled,searchKey:"createTime",searchValue:this.searchList.createTime,companyId:this.companyId,deptId:this.deptId},n=this.basic_url+"/api-user/users";this.$axios.get(n,{params:a}).then(function(t){e.userList=t.data.data,e.page.totalCount=t.data.count}).catch(function(t){}),this.userList.forEach(function(t,n){var s=t.id;e.$axios.get("/users/"+s+"/roles",a).then(function(t){e.userList.role=t.data.roles[0].name}).catch(function(t){})})},handleNodeClick:function(t){},formatter:function(t,e){return t.enabled}}},"mounted",function(){this.requestData()}),m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"headerbg"},[a("vheader"),t._v(" "),a("navs_header")],1),t._v(" "),a("div",{staticClass:"contentbg"},[a("navs_left"),t._v(" "),a("div",{staticClass:"wrapper wrapper-content"},[a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"fixed-table-toolbar clearfix"},[a("div",{staticClass:"bs-bars pull-left"},[a("div",{staticClass:"hidden-xs",attrs:{id:"roleTableToolbar",role:"group"}},[a("button",{staticClass:"btn btn-green",attrs:{type:"button",id:""},on:{click:t.openAddMgr}},[a("i",{staticClass:"icon-add"}),t._v("添加\r\n\t              \t\t\t ")]),t._v(" "),a("button",{staticClass:"btn btn-blue button-margin",attrs:{type:"button"},on:{click:t.modify}},[a("i",{staticClass:"icon-edit"}),t._v("修改\r\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-red button-margin",attrs:{type:"button"},on:{click:t.deluserinfo}},[a("i",{staticClass:"icon-trash"}),t._v("删除\r\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.importData}},[a("i",{staticClass:"icon-upload-cloud"}),t._v("导入\r\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.exportData}},[a("i",{staticClass:"icon-download-cloud"}),t._v("导出\r\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.Printing}},[a("i",{staticClass:"icon-print"}),t._v("打印\r\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.modestsearch}},[a("i",{staticClass:"icon-search"}),t._v("高级查询\r\n\t\t\t\t\t    \t\t"),a("i",{directives:[{name:"show",rawName:"v-show",value:t.down,expression:"down"}],staticClass:"icon-arrow1-down"}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.up,expression:"up"}],staticClass:"icon-arrow1-up"})])])]),t._v(" "),a("div",{staticClass:"columns columns-right btn-group pull-right"},[t._m(0),t._v(" "),a("tableControle",{ref:"tableControle",attrs:{tableHeader:t.tableHeader,checkedName:t.checkedName},on:{tableControle:t.tableControle}})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.search,expression:"search"}],staticClass:"pb10"},[a("el-form",{attrs:{model:t.searchList,"label-width":"70px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:5}},[a("el-input",{model:{value:t.searchList.typename,callback:function(e){t.$set(t.searchList,"typename",e)},expression:"searchList.typename"}},[a("template",{slot:"prepend"},[t._v("类型名称")])],2)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticStyle:{margin:"4px"},attrs:{type:"primary",size:"small"},on:{click:t.searchinfo}},[t._v("搜索")])],1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userList,border:"",stripe:"",height:t.fullHeight,"default-sort":{prop:"userList",order:"descending"}},on:{"selection-change":t.SelChange}},[this.checkedName.length>0?a("el-table-column",{attrs:{type:"selection",width:"55",fixed:""}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("检验/检测方法编号")?a("el-table-column",{attrs:{label:"检验/检测方法编号",width:"150",sortable:"",prop:"M_NUM"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("中文名称")?a("el-table-column",{attrs:{label:"中文名称",width:"220",sortable:"",prop:"M_NAME"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("英文名称")?a("el-table-column",{attrs:{label:"英文名称",width:"180",sortable:"",prop:"M_ENAME"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("类别")?a("el-table-column",{attrs:{label:"类别",width:"120",sortable:"",prop:"M_TYPE"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("信息状态")?a("el-table-column",{attrs:{label:"信息状态",width:"100",sortable:"",prop:"STATUS",formatter:t.judge}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("版本")?a("el-table-column",{attrs:{label:"版本",width:"100",sortable:"",prop:"VERSION"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("机构")?a("el-table-column",{attrs:{label:"机构",width:"180",sortable:"",prop:"DEPARTMENT"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("录入人")?a("el-table-column",{attrs:{label:"录入人",width:"120",prop:"ENTERBY",sortable:"",formatter:t.dateFormat}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("录入时间")?a("el-table-column",{attrs:{label:"录入时间",width:"120",prop:"ENTERDATE",sortable:"",formatter:t.dateFormat}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("修改人")?a("el-table-column",{attrs:{label:"修改人",width:"120",prop:"CHANGEBY",sortable:"",formatter:t.dateFormat}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("修改时间")?a("el-table-column",{attrs:{label:"修改时间",width:"120",prop:"CHANGEDATE",sortable:"",formatter:t.dateFormat}}):t._e()],1),t._v(" "),this.checkedName.length>0?a("el-pagination",{staticClass:"text-right pt10",attrs:{background:"","current-page":t.page.currentPage,"page-sizes":[10,20,30,40],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next",total:t.page.totalCount},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}):t._e()],1)],1)],1)])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn btn-default btn-refresh",attrs:{id:"refresh",title:"刷新"}},[e("i",{staticClass:"icon-refresh"})])}]};var g=a("VU/8")(v,m,!1,function(t){a("irY2")},"data-v-47433b5e",null);e.default=g.exports},JVtq:function(t,e,a){"use strict";var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-table",{staticStyle:{width:"96%",margin:"0 auto"},attrs:{data:t.tableData,"default-sort":{prop:"tableData",order:"descending"}},on:{"selection-change":t.selChange}},[t.checkedName.length>0?a("el-table-column",{attrs:{type:"selection",width:"55"}}):t._e(),t._v(" "),t._l(t.tableHeader,function(e,n){return-1!=t.checkedName.indexOf(e.label)?a("el-table-column",{key:n,attrs:{label:e.label,sortable:"",prop:e.prop}}):t._e()})],2),t._v(" "),this.checkedName.length>0?a("el-pagination",{attrs:{"current-page":t.page.currentPage,"page-sizes":[10,20,30,40],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next",total:t.page.totalCount},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}):t._e()],1)},staticRenderFns:[]};var s=a("VU/8")({data:function(){return{tableData:[],page:{currentPage:1,pageSize:10,totalCount:0},selData:[]}},methods:{sizeChange:function(t){this.page.pageSize=t,this.getData()},currentChange:function(t){this.page.currentPage=t,this.getData()},selChange:function(t){this.selData=t},getData:function(){var t=this,e=this.searchData,a=this.url;this.$axios.get(a,{params:e}).then(function(e){t.tableData=e.data.data,t.page.totalCount=e.data.count}).catch(function(t){})}},props:["tableHeader","checkedName","url","searchData"],mounted:function(){this.getData()}},n,!1,function(t){a("Xvzz")},null,null);e.a=s.exports},Xvzz:function(t,e){},egCj:function(t,e){},irY2:function(t,e){},n5Na:function(t,e,a){"use strict";(function(t){var n=a("mvHQ"),s=a.n(n);e.a={name:"navs",data:function(){return{isShow:!1,ismin:!0,fullHeight:document.documentElement.clientHeight-100+"px",leftNavs:[{navicon:"icon-file-text",navtitle:"仪器和计量器具",navherf:"/instruments"},{navicon:"icon-file-text",navtitle:"使用/维护保养记录",navherf:"/usag_tending_records"},{navicon:"icon-task",navtitle:"溯源计划",navherf:"/traceability_plan"},{navicon:"icon-task",navtitle:"溯源记录",navherf:"/traceability_records"},{navicon:"icon-log",navtitle:"期间核查计划",navherf:"/verification_plan"},{navicon:"icon-log",navtitle:"期间核查记录",navherf:"/verification_records"}],selectedNav:{}}},methods:{addClickNav:function(e){sessionStorage.getItem("clickedNav")||sessionStorage.setItem("clickedNav",s()({arr:[]}));for(var a=JSON.parse(sessionStorage.getItem("clickedNav")).arr,n=!0,i=0;i<a.length;i++)e.navtitle==a[i].navtitle&&(n=!1);n&&(a.push(e),setTimeout(function(){t(".page-tabs").offset().left;var e=t(".page-tabs-content").width(),a=t(".content-tabs").width()-240;if(e>a){var n=e-a;t(".page-tabs").offset({left:-n})}},0)),sessionStorage.getItem("selectedNav")||sessionStorage.setItem("selectedNav",s()({}));var r=JSON.parse(sessionStorage.getItem("selectedNav"));r=e,sessionStorage.setItem("selectedNav",s()(r)),sessionStorage.setItem("clickedNav",s()({arr:a}))},min2max:function(){"220"==t(".navbar-static-side").width()?(t(".wrapper").css("padding-left","220px"),t(".navs>li").css("margin","0px 10px"),this.maxDialog()):"40"==t(".navbar-static-side").width()&&(t(".wrapper").css("padding-left","40px"),t(".navs>li").css("margin","0"),this.rebackDialog()),this.ismin=!this.ismin},maxDialog:function(e){t(".navbar-static-side").css("width","40px"),t(".wrapper").css("padding-left","40px"),t(".navs>li").css("margin","0")},rebackDialog:function(){t(".navbar-static-side").css("width","220px"),t(".wrapper").css("padding-left","220px"),t(".navs>li").css("margin","0px 10px")}},mounted:function(){var t=this.leftNavs[0];this.addClickNav(t)}}}).call(e,a("7t+N"))}});
//# sourceMappingURL=32.0d7f5bb6336c6ddf0cac.js.map