webpackJsonp([37],{"6b/j":function(t,e){},Cqq1:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("QmSG"),i=s("GkRW"),n=s("hbvp"),o=s("h7vj"),r=s("VEhc"),l=s("sD9b"),c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.show?s("div",{staticClass:"mask"}):t._e(),t._v(" "),t.show?s("div",{staticClass:"mask_divbg"},[s("div",{staticClass:"mask_div"},[s("div",{staticClass:"mask_title_div clearfix"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.addtitle,expression:"addtitle"}],staticClass:"mask_title"},[t._v("添加自动编号设置")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.modifytitle,expression:"modifytitle"}],staticClass:"mask_title"},[t._v("修改自动编号设置")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.viewtitle,expression:"viewtitle"}],staticClass:"mask_title"},[t._v("查看自动编号设置")]),t._v(" "),s("div",{staticClass:"mask_anniu"},[s("span",{staticClass:"mask_span mask_max",on:{click:t.toggle}},[s("i",{class:{"icon-maximization":t.isok1,"icon-restore":t.isok2}})]),t._v(" "),s("span",{staticClass:"mask_span",on:{click:t.close}},[s("i",{staticClass:"icon-close1"})])])]),t._v(" "),s("div",{staticClass:"mask_content"},[s("el-form",{ref:"numbsetForm",attrs:{model:t.numbsetForm,rules:t.rules,"label-width":"100px","status-icon":""}},[s("div",{staticClass:"accordion"},[s("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[s("el-collapse-item",{attrs:{title:"基础信息",name:"1"}},[s("el-row",{attrs:{gutter:20}}),t._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"自动编号名称",prop:"AUTOKEY","label-width":"110px"}},[s("el-input",{attrs:{disabled:t.noedit},model:{value:t.numbsetForm.AUTOKEY,callback:function(e){t.$set(t.numbsetForm,"AUTOKEY",e)},expression:"numbsetForm.AUTOKEY"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"前缀"}},[s("el-input",{attrs:{disabled:t.noedit},model:{value:t.numbsetForm.PREFIX,callback:function(e){t.$set(t.numbsetForm,"PREFIX",e)},expression:"numbsetForm.PREFIX"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"起始数",prop:"S_NUM"}},[s("el-input",{attrs:{disabled:t.noedit},model:{value:t.numbsetForm.S_NUM,callback:function(e){t.$set(t.numbsetForm,"S_NUM",e)},expression:"numbsetForm.S_NUM"}})],1)],1),t._v(" "),t.dept?s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"机构","label-width":"110px"}},[s("el-input",{attrs:{disabled:!0},model:{value:t.numbsetForm.DEPARTMENT,callback:function(e){t.$set(t.numbsetForm,"DEPARTMENT",e)},expression:"numbsetForm.DEPARTMENT"}})],1)],1):t._e()],1),t._v(" "),s("el-row",{attrs:{gutter:30}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"备注","label-width":"110px"}},[s("el-input",{attrs:{type:"textarea",disabled:t.noedit},model:{value:t.numbsetForm.MEMO,callback:function(e){t.$set(t.numbsetForm,"MEMO",e)},expression:"numbsetForm.MEMO"}})],1)],1)],1)],1),t._v(" "),s("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:t.views,expression:"views"}],attrs:{title:"其它",name:"2"}},[s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"录入人","label-width":"110px"}},[s("el-input",{attrs:{disabled:!0},model:{value:t.numbsetForm.ENTERBY,callback:function(e){t.$set(t.numbsetForm,"ENTERBY",e)},expression:"numbsetForm.ENTERBY"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"录入时间","label-width":"80px"}},[s("el-input",{attrs:{disabled:!0},model:{value:t.numbsetForm.ENTERDATE,callback:function(e){t.$set(t.numbsetForm,"ENTERDATE",e)},expression:"numbsetForm.ENTERDATE"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"修改人","label-width":"80px"}},[s("el-input",{attrs:{disabled:!0},model:{value:t.numbsetForm.CHANGEBY,callback:function(e){t.$set(t.numbsetForm,"CHANGEBY",e)},expression:"numbsetForm.CHANGEBY"}})],1)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"修改时间","label-width":"110px"}},[s("el-input",{attrs:{disabled:!0},model:{value:t.numbsetForm.CHANGEDATE,callback:function(e){t.$set(t.numbsetForm,"CHANGEDATE",e)},expression:"numbsetForm.CHANGEDATE"}})],1)],1)],1)],1)],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.noviews,expression:"noviews"}],staticClass:"el-dialog__footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("numbsetForm")}}},[t._v("保存")]),t._v(" "),s("el-button",{on:{click:t.cancelForm}},[t._v("取消")])],1)])],1)])]):t._e()])},staticRenderFns:[]};var m=function(t){s("6b/j")},u=s("VU/8")(l.a,c,!1,m,"data-v-267f4d7e",null).exports,h={name:"number_settings",components:{vheader:i.a,navs_left:n.a,navs_header:o.a,tableControle:r.a,numbsetmask:u},data:function(){return{loading:!1,basic_url:a.a.dev_url,value:"",options:[{value:"1",label:"活动"},{value:"0",label:"不活动"}],checkedName:["自动编号名称","起始数","前缀","备注","机构","录入时间","修改时间"],tableHeader:[{label:"自动编号名称",prop:"AUTOKEY"},{label:"起始数",prop:"S_NUM"},{label:"前缀",prop:"PREFIX"},{label:"备注",prop:"MEMO"},{label:"机构",prop:"DEPARTMENT"},{label:"录入时间",prop:"ENTERDATE"},{label:"修改时间",prop:"CHANGEDATE"}],loadSign:!0,commentArr:{},selMenu:[],"启用":!0,"冻结":!1,numberList:[],search:!1,show:!1,down:!0,up:!1,isShow:!1,ismin:!0,fullHeight:document.documentElement.clientHeight-210+"px",searchList:{AUTOKEY:""},page:{currentPage:1,pageSize:20,totalCount:0},aaaData:[],numbsetForm:{}}},methods:{rowClass:function(t){t.row,t.rowIndex;return"text-align:center"},loadMore:function(){var t=this,e=sessionStorage.getItem("up2down");if(this.loadSign){if("down"==e){if(this.page.currentPage++,this.page.currentPage>Math.ceil(this.page.totalCount/this.page.pageSize))return this.page.currentPage=Math.ceil(this.page.totalCount/this.page.pageSize),!1}else if(this.page.currentPage--,this.page.currentPage<1)return this.page.currentPage=1,!1;this.loadSign=!1,setTimeout(function(){t.loadSign=!0},1e3),this.requestData()}},tableControle:function(t){this.checkedName=t},sizeChange:function(t){this.page.pageSize=t,this.requestData()},currentChange:function(t){this.page.currentPage=t,this.requestData()},searchinfo:function(t){this.page.currentPage=1,this.page.pageSize=20,this.requestData()},resetbtn:function(){this.searchList={AUTOKEY:""},this.requestData()},openAddMgr:function(){this.numbsetForm={STATUS:"活动",AUTOKEY:"",PREFIX:"",S_NUM:"",MEMO:"",DEPARTMENT:"",ENTERBY:"",ENTERDATE:"",CHANGEBY:"",CHANGEDATE:""},this.$refs.child.open(),this.$refs.child.childMethods()},modify:function(){this.aaaData=this.selMenu,0!=this.aaaData.length?this.aaaData.length>1?this.$message({message:"不可同时修改多条数据",type:"warning"}):(this.numbsetForm=this.selMenu[0],this.$refs.child.detail()):this.$message({message:"请您选择要修改的数据",type:"warning"})},view:function(t){this.numbsetForm=t,this.$refs.child.view(t)},open:function(){this.show=!0},modestsearch:function(){this.search=!this.search,this.down=!this.down,this.up=!this.up},deluserinfo:function(){var t=this,e=this.selMenu;if(0!=e.length){for(var s=this.basic_url+"/api-apps/app/autokey/deletes",a=e,i=[],n=0;n<a.length;n++)i.push(a[n].ID);var o={ids:i.toString(",")};this.$confirm("确定删除此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){e.value;t.$axios.delete(s,{params:o}).then(function(e){0==e.data.resp_code&&(t.$message({message:"删除成功",type:"success"}),t.requestData())}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要删除的数据",type:"warning"})},importData:function(){},exportData:function(){},Printing:function(){},judge:function(t){return"1"==t.STATUS?"活动":"不活动"},dateFormat:function(t,e){var s=t[e.property];return void 0==s?"":this.$moment(s).format("YYYY-MM-DD")},SelChange:function(t){this.selMenu=t},requestData:function(t){var e=this;this.loading=!0;var s={page:this.page.currentPage,limit:this.page.pageSize},a=this.basic_url+"/api-apps/app/autokey";this.$axios.get(a,{params:s}).then(function(t){e.page.totalCount=t.data.count;var s=Math.ceil(e.page.totalCount/e.page.pageSize);e.page.currentPage>=s?e.loadSign=!1:e.loadSign=!0,e.commentArr[e.page.currentPage]=t.data.data;for(var a=[],i=1;i<=s;i++)if(void 0!==e.commentArr[i]&&e.commentArr[i].length>0)for(var n=0;n<e.commentArr[i].length;n++)a.push(e.commentArr[i][n]);e.numberList=a,e.loading=!1}).catch(function(t){})}},mounted:function(){this.requestData()}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"headerbg"},[s("vheader"),t._v(" "),s("navs_header")],1),t._v(" "),s("div",{staticClass:"contentbg"},[s("navs_left"),t._v(" "),s("div",{staticClass:"wrapper wrapper-content"},[s("div",{staticClass:"ibox-content"},[s("div",{staticClass:"fixed-table-toolbar clearfix"},[s("div",{staticClass:"bs-bars pull-left"},[s("div",{staticClass:"hidden-xs",attrs:{id:"roleTableToolbar",role:"group"}},[s("button",{staticClass:"btn btn-blue button-margin",attrs:{type:"button"},on:{click:t.modify}},[s("i",{staticClass:"icon-edit"}),t._v("修改\r\n\t\t\t\t\t\t\t\t")]),t._v(" "),s("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.modestsearch}},[s("i",{staticClass:"icon-search"}),t._v("高级查询\r\n\t\t\t\t\t\t    \t\t"),s("i",{directives:[{name:"show",rawName:"v-show",value:t.down,expression:"down"}],staticClass:"icon-arrow1-down"}),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:t.up,expression:"up"}],staticClass:"icon-arrow1-up"})])])]),t._v(" "),s("div",{staticClass:"columns columns-right btn-group pull-right"},[t._m(0),t._v(" "),s("tableControle",{ref:"tableControle",attrs:{tableHeader:t.tableHeader,checkedName:t.checkedName},on:{tableControle:t.tableControle}})],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.search,expression:"search"}]},[s("el-form",{attrs:{model:t.searchList,"label-width":"70px"}},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:"自动编号名称",prop:"AUTOKEY","label-width":"100px"}},[s("el-input",{model:{value:t.searchList.AUTOKEY,callback:function(e){t.$set(t.searchList,"AUTOKEY",e)},expression:"searchList.AUTOKEY"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{staticStyle:{"margin-top":"2px"},attrs:{type:"primary",size:"small"},on:{click:t.searchinfo}},[t._v("搜索")]),t._v(" "),s("el-button",{staticStyle:{"margin-top":"2px","margin-left":"2px"},attrs:{type:"primary",size:"small"},on:{click:t.resetbtn}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:0}},[s("el-col",{attrs:{span:24}},[s("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadMore,expression:"loadMore"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.numberList,border:"",stripe:"","header-cell-style":t.rowClass,height:t.fullHeight,"default-sort":{prop:"numberList",order:"descending"},"element-loading-text":"加载中…","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.9)"},on:{"selection-change":t.SelChange}},[this.checkedName.length>0?s("el-table-column",{attrs:{type:"selection",width:"55",fixed:"",align:"center"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("自动编号名称")?s("el-table-column",{attrs:{label:"自动编号名称",width:"140",sortable:"",prop:"AUTOKEY"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("p",{staticClass:"blue",attrs:{title:"点击查看详情"},on:{click:function(s){t.view(e.row)}}},[t._v(t._s(e.row.AUTOKEY)+"\r\n\t\t\t\t\t\t\t\t\t")])]}}])}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("起始数")?s("el-table-column",{attrs:{label:"起始数",width:"140",sortable:"",prop:"S_NUM"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("前缀")?s("el-table-column",{attrs:{label:"前缀",width:"140",sortable:"",prop:"PREFIX"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("备注")?s("el-table-column",{attrs:{label:"备注",width:"200",sortable:"",prop:"MEMO"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("机构")?s("el-table-column",{attrs:{label:"机构",sortable:"",prop:"DEPARTMENT"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("录入时间")?s("el-table-column",{attrs:{label:"录入时间",width:"100",prop:"ENTERDATE",sortable:"",formatter:t.dateFormat}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("修改时间")?s("el-table-column",{attrs:{label:"修改时间",width:"100",prop:"CHANGEDATE",sortable:"",formatter:t.dateFormat}}):t._e()],1),t._v(" "),this.checkedName.length>0?s("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":t.page.currentPage,"page-sizes":[10,20,30,40],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next",total:t.page.totalCount},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}):t._e()],1)],1)],1)]),t._v(" "),s("numbsetmask",{ref:"child",attrs:{numbsetForm:t.numbsetForm,page:t.page},on:{request:t.requestData}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn btn-default btn-refresh",attrs:{id:"refresh",title:"刷新"}},[e("i",{staticClass:"icon-refresh"})])}]};var p=s("VU/8")(h,d,!1,function(t){s("KhA8")},"data-v-39be2d52",null);e.default=p.exports},KhA8:function(t,e){},sD9b:function(t,e,s){"use strict";(function(t){var a=s("bOdI"),i=s.n(a),n=s("QmSG");e.a={name:"masks",props:{page:{type:Object},numbsetForm:{type:Object,default:function(){return{ID:"",STATUS:"",AUTOKEY:"",PREFIX:"",S_NUM:"",MEMO:"",DEPARTMENT:"",ENTERBY:"",ENTERDATE:"",CHANGEBY:"",CHANGEDATE:""}}}},data:function(){var t;return t={basic_url:n.a.dev_url,value:"",options:[{value:"1",label:"活动"},{value:"0",label:"不活动"}],modify:!1,selMenu:[],dialogVisible:!1,edit:!0,activeNames:["1","2"],show:!1,isok1:!0,isok2:!1,rules:{AUTOKEY:[{required:!0,message:"必填",trigger:"blur"},{validator:this.Validators.isWorknumber,trigger:"blur"}],PREFIX:[{required:!1,trigger:"blur",validator:this.Validators.isEnglish}],S_NUM:[{required:!0,message:"必填",trigger:"blur"},{validator:this.Validators.isInteger,trigger:"blur"}]},addtitle:!0,modifytitle:!1,viewtitle:!1,dept:!1,noedit:!1,views:!1,noviews:!0},i()(t,"modify",!1),i()(t,"hintshow",!1),i()(t,"statusshow1",!0),i()(t,"statusshow2",!1),t},methods:{resetNew:function(){this.numbsetForm={STATUS:"活动",AUTOKEY:"",PREFIX:"",S_NUM:"",MEMO:"",DEPARTMENT:"",ENTERBY:"",ENTERDATE:"",CHANGEBY:"",CHANGEDATE:""}},childMethods:function(){var t=this;this.$axios.get(this.basic_url+"/api-user/users/currentMap",{}).then(function(e){t.numbsetForm.DEPARTMENT=e.data.deptName,t.numbsetForm.ENTERBY=e.data.nickname;var s=new Date;t.numbsetForm.ENTERDATE=t.$moment(s).format("YYYY-MM-DD  HH:mm:ss")}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})}),this.addtitle=!0,this.modifytitle=!1,this.viewtitle=!1,this.dept=!1,this.noedit=!1,this.views=!1,this.noviews=!0,this.modify=!1,this.hintshow=!1,this.statusshow1=!0,this.statusshow2=!1},detail:function(){var t=this;this.$axios.get(this.basic_url+"/api-user/users/currentMap",{}).then(function(e){t.numbsetForm.CHANGEBY=e.data.nickname;var s=new Date;t.numbsetForm.CHANGEDATE=t.$moment(s).format("YYYY-MM-DD HH:mm:ss")}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})}),this.addtitle=!1,this.modifytitle=!0,this.viewtitle=!1,this.dept=!0,this.noedit=!1,this.views=!1,this.noviews=!0,this.hintshow=!1,this.modify=!0,this.statusshow1=!1,this.statusshow2=!0,this.show=!0},view:function(t){this.addtitle=!1,this.modifytitle=!1,this.viewtitle=!0,this.dept=!0,this.noedit=!0,this.views=!0,this.noviews=!1,this.show=!0},close:function(){this.show=!1},open:function(){this.show=!0},cancelForm:function(){this.show=!1,this.reset()},reset:function(){this.show=!1},toggle:function(t){1==this.isok1?this.maxDialog():this.rebackDialog()},maxDialog:function(e){this.isok1=!1,this.isok2=!0,t(".mask_div").width(document.body.clientWidth),t(".mask_div").height(document.body.clientHeight-60),t(".mask_div").css("top","60px")},rebackDialog:function(){this.isok1=!0,this.isok2=!1,t(".mask_div").css("width","80%"),t(".mask_div").css("height","80%"),t(".mask_div").css("top","100px")},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.numbsetForm.STATUS="1"==e.numbsetForm.STATUS||"活动"==e.numbsetForm.STATUS?"1":"0";var s=e.basic_url+"/api-apps/app/autokey/saveOrUpdate";e.$axios.post(s,e.numbsetForm).then(function(t){0==t.data.resp_code&&(e.$message({message:"保存成功",type:"success"}),e.$emit("request"),e.$refs.numbsetForm.resetFields(),e.show=!1)}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})}else e.show=!0,e.$message({message:"未填写完整，请填写",type:"warning"})})},handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})}}}}).call(e,s("7t+N"))}});
//# sourceMappingURL=37.2a55c1e4b7e8ea647805.js.map