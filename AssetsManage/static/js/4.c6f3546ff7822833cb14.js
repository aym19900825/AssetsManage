webpackJsonp([4],{"3KaX":function(t,e){},"8rq7":function(t,e,s){"use strict";(function(t){var a=s("QmSG");e.a={name:"masks",data:function(){return{innerVisible:!1,pramList:[],basic_url:a.a.dev_url,noedit:!1,userList:[],selval:[],dialogVisibleuser:!1,dialogVisible:!1,dataInfo:{param:""},page:{currentPage:1,pageSize:10,totalCount:0},resourceData:[],resourceDialogisShow:!1,resourceCheckedKey:[],resourceProps:{children:"children",label:"fullname"}}},methods:{rowClass:function(t){t.row,t.rowIndex;return"text-align:center"},SelChange:function(t){this.selval=t},sizeChange:function(t){this.page.pageSize=t,this.requestData()},currentChange:function(t){this.page.currentPage=t,this.requestData()},dateFormat:function(t,e){var s=t[e.property];return void 0==s?"":this.$moment(s).format("YYYY-MM-DD")},handleNodeClick:function(t){},handleClicks:function(t,e,s){this.getCheckboxData=t,this.i++,this.i%2==0&&(e?(this.$refs.tree.setCheckedNodes([]),this.$refs.tree.setCheckedNodes([t])):this.$refs.tree.setCheckedNodes([]))},visible:function(t){for(var e=0;e<t.length;e++)t[e].width="40%";this.pramList=t,this.innerVisible=!0},close:function(){this.show=!1},addcusname:function(){0==this.selval.length?this.$message({message:"请选择数据",type:"warning"}):this.selval.length>1?this.$message({message:"不可同时选择多条数据",type:"warning"}):(console.log(this.selval[0]),this.dialogVisibleuser=!1)},toggle:function(t){this.isok1?this.maxDialog():this.rebackDialog()},handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})},maxDialog:function(e){this.isok1=!1,this.isok2=!0,t(".mask_div").width(document.body.clientWidth),t(".mask_div").height(document.body.clientHeight-60),t(".mask_div").css("top","60px")},rebackDialog:function(){this.isok1=!0,this.isok2=!1,t(".mask_div").css("width","80%"),t(".mask_div").css("height","80%"),t(".mask_div").css("top","100px")},save:function(t){var e=this,s=this,a=this.basic_url+"/api-apps/app/asset/saveOrUpdate";this.$refs.dataInfo.validate(function(i){i||"docUpload"!=t||e.$message({message:"请先正确填写信息，再进行文档上传",type:"warning"}),i?e.$axios.post(a,s.dataInfo).then(function(s){0==s.data.resp_code&&("docUpload"==t?(e.docParm.recordid=s.data.datas.id,e.docParm.model="edit",e.$refs.docTable.autoLoad(),e.dataInfo.ID=s.data.datas.id):(e.$message({message:"保存成功",type:"success"}),e.$emit("request")))}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})}):(e.show=!0,e.$message({message:"未填写完整，请填写",type:"warning"}))})},saveAndUpdate:function(t){this.save(t)},saveAndSubmit:function(t){this.save(t),this.show=!0},addPeople:function(t){4==t?this.getDept():this.requestData()},getDept:function(){var t=this,e=this.basic_url+"/api-user/depts/treeMap";this.$axios.get(e,{}).then(function(e){t.resourceData=e.data,t.dialogVisible=!0})},requestData:function(){var t=this,e=this.basic_url+"/api-user/users";this.$axios.get(e,{params:{page:1,limit:10}}).then(function(e){t.page.totalCount=e.data.count,t.userList=e.data.data,t.dialogVisibleuser=!0}).catch(function(e){t.$message({message:"网络错误，请重试",type:"warning"})})}},mounted:function(){}}}).call(e,s("7t+N"))},PX6h:function(t,e,s){"use strict";var a=s("YjmO"),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.show?s("div",{staticClass:"mask"}):t._e(),t._v(" "),t.show?s("div",{staticClass:"mask_divbg"},[s("div",{staticClass:"mask_div"},[s("div",{staticClass:"mask_title_div clearfix"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.addtitle,expression:"addtitle"}],staticClass:"mask_title"},[t._v("添加产品类别")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.modifytitle,expression:"modifytitle"}],staticClass:"mask_title"},[t._v("修改产品类别")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.viewtitle,expression:"viewtitle"}],staticClass:"mask_title"},[t._v("查看产品类别")]),t._v(" "),s("div",{staticClass:"mask_anniu"},[s("span",{staticClass:"mask_span mask_max",on:{click:t.toggle}},[s("i",{class:{"icon-maximization":t.isok1,"icon-restore":t.isok2}})]),t._v(" "),s("span",{staticClass:"mask_span",on:{click:t.close}},[s("i",{staticClass:"icon-close1"})])])]),t._v(" "),s("div",{staticClass:"mask_content"},[s("el-form",{ref:"CATEGORY",staticClass:"demo-adduserForm",attrs:{model:t.CATEGORY,"inline-message":"",rules:t.rules,"label-width":"100px"}},[s("div",{staticClass:"accordion",attrs:{id:"information"}},[s("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[s("el-collapse-item",{attrs:{title:"产品类别",name:"1"}},[s("el-row",{staticClass:"pb10"},[s("el-col",{staticClass:"pull-right",attrs:{span:3}},[s("el-input",{attrs:{disabled:!0},model:{value:t.CATEGORY.VERSION,callback:function(e){t.$set(t.CATEGORY,"VERSION",e)},expression:"CATEGORY.VERSION"}},[s("template",{slot:"prepend"},[t._v("版本")])],2)],1)],1),t._v(" "),s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"编码",prop:"NUM"}},[s("el-input",{attrs:{disabled:t.noedit},model:{value:t.CATEGORY.NUM,callback:function(e){t.$set(t.CATEGORY,"NUM",e)},expression:"CATEGORY.NUM"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"名称",prop:"TYPE"}},[s("el-input",{attrs:{disabled:t.noedit},model:{value:t.CATEGORY.TYPE,callback:function(e){t.$set(t.CATEGORY,"TYPE",e)},expression:"CATEGORY.TYPE"}})],1)],1)],1),t._v(" "),s("el-row",[t.dept?s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"机构",prop:"DEPTIDDesc"}},[s("el-input",{attrs:{disabled:t.edit},model:{value:t.CATEGORY.DEPTIDDesc,callback:function(e){t.$set(t.CATEGORY,"DEPTIDDesc",e)},expression:"CATEGORY.DEPTIDDesc"}})],1)],1):t._e()],1)],1),t._v(" "),s("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:t.views,expression:"views"}],attrs:{title:"其它",name:"2"}},[s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"录入人",prop:"ENTERBYDesc"}},[s("el-input",{attrs:{disabled:t.edit},model:{value:t.CATEGORY.ENTERBYDesc,callback:function(e){t.$set(t.CATEGORY,"ENTERBYDesc",e)},expression:"CATEGORY.ENTERBYDesc"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"录入时间",prop:"ENTERDATE"}},[s("el-input",{attrs:{disabled:t.edit},model:{value:t.CATEGORY.ENTERDATE,callback:function(e){t.$set(t.CATEGORY,"ENTERDATE",e)},expression:"CATEGORY.ENTERDATE"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"修改人",prop:"CHANGEBYDesc"}},[s("el-input",{attrs:{placeholder:"当前修改人",disabled:t.edit},model:{value:t.CATEGORY.CHANGEBYDesc,callback:function(e){t.$set(t.CATEGORY,"CHANGEBYDesc",e)},expression:"CATEGORY.CHANGEBYDesc"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"修改时间",prop:"CHANGEDATE"}},[s("el-input",{attrs:{placeholder:"当前修改时间",disabled:t.edit},model:{value:t.CATEGORY.CHANGEDATE,callback:function(e){t.$set(t.CATEGORY,"CHANGEDATE",e)},expression:"CATEGORY.CHANGEDATE"}})],1)],1)],1)],1)],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.noviews,expression:"noviews"}],staticClass:"el-dialog__footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveAndUpdate("CATEGORY")}}},[t._v("保存")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.addtitle,expression:"addtitle"}],attrs:{type:"success"},on:{click:function(e){t.saveAndSubmit("CATEGORY")}}},[t._v("保存并继续")]),t._v(" "),t.modify?s("el-button",{staticClass:"btn-primarys",attrs:{type:"primary"},on:{click:function(e){t.modifyversion("CATEGORY")}}},[t._v("修订")]):t._e(),t._v(" "),s("el-button",{on:{click:t.close}},[t._v("取消")])],1)])],1)])]):t._e()])},staticRenderFns:[]};var o=function(t){s("sGqF")},n=s("VU/8")(a.a,i,!1,o,"data-v-7a7ffb92",null);e.a=n.exports},RDhz:function(t,e){},Wcpf:function(t,e){},YjmO:function(t,e,s){"use strict";(function(t){var a=s("mvHQ"),i=s.n(a),o=s("QmSG");e.a={name:"masks",props:{CATEGORY:{type:Object,default:function(){return{ID:"",NUM:"",TYPE:"",STATUS:"",VERSION:"",DEPARTMENT:"",ENTERBY:"",ENTERDATE:"",CHANGEBY:"",CHANGEDATE:""}}},page:Object},data:function(){return{falg:!1,basic_url:o.a.dev_url,selUser:[],edit:!0,show:!1,isok1:!0,isok2:!1,down:!0,up:!1,activeNames:["1","2"],dialogVisible:!1,selectData:[],rules:{NUM:[{required:!1,trigger:"change",validator:function(t,e,s){""!=e&&0==/^[0-9a-zA-Z()（）]+$/.test(e)?s(new Error("请填写数字、字母或括号（编码不填写可自动生成）")):s()}}],TYPE:[{required:!0,trigger:"blur",validator:function(t,e,s){""===e?s(new Error("请填写产品类别名称")):1==/^[!@#$%^&*";',.~！@#￥%……&*《》？，。?、|]+$/.test(e)?s(new Error("请规范填写名称")):s()}}]},resourceData:[],category:{},addtitle:!0,modifytitle:!1,viewtitle:!1,dept:!1,noedit:!1,views:!1,noviews:!0,modify:!1,hintshow:!1,statusshow1:!0,statusshow2:!1}},methods:{SelChange:function(t){this.selUser=t},rand:function(t,e){return Math.floor(Math.random()*(e-t))+t},visible:function(){var t=this;this.$axios.get(this.basic_url+"/api-user/users/currentMap",{}).then(function(e){console.log(e.data),t.CATEGORY.DEPTID=e.data.deptId,t.CATEGORY.ENTERBY=e.data.id;var s=new Date;t.CATEGORY.ENTERDATE=t.$moment(s).format("YYYY-MM-DD")}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})}),this.addtitle=!0,this.modifytitle=!1,this.viewtitle=!1,this.dept=!1,this.noedit=!1,this.views=!1,this.noviews=!0,this.modify=!1,this.hintshow=!1,this.statusshow1=!0,this.statusshow2=!1},detail:function(){var t=this;this.addtitle=!1,this.modifytitle=!0,this.viewtitle=!1,this.dept=!0,this.noedit=!1,this.views=!1,this.noviews=!0,this.hintshow=!1,this.modify=!0,this.statusshow1=!1,this.statusshow2=!0,this.$axios.get(this.basic_url+"/api-user/users/currentMap",{}).then(function(e){t.CATEGORY.DEPTID=e.data.deptId,t.CATEGORY.CHANGEBY=e.data.id;var s=new Date;t.CATEGORY.CHANGEDATE=t.$moment(s).format("YYYY-MM-DD");var a=i()(t.CATEGORY);t.category=JSON.parse(a)}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})}),this.show=!0},view:function(){console.log(this.CATEGORY),this.addtitle=!1,this.modifytitle=!1,this.viewtitle=!0,this.dept=!0,this.noedit=!0,this.views=!0,this.noviews=!1,this.show=!0},modifyversion:function(t){var e=this;this.$refs[t].validate(function(t){if(t){if(i()(e.category)==i()(e.CATEGORY))return e.$message({message:"没有修改内容，不允许修订！",type:"warning"}),!1;var s=e.basic_url+"/api-apps/app/productType/operate/upgraded";e.$axios.post(s,e.CATEGORY).then(function(t){0==t.data.resp_code?(e.$message({message:"修订成功",type:"success"}),e.$emit("request"),e.show=!1):(e.show=!0,1==t.data.resp_code&&(""!=t.data.resp_msg?e.$message({message:t.data.resp_msg,type:"warning"}):e.$message({message:"相同数据不可重复修订！",type:"warning"})))}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})}else e.$message({message:"未填写完整，请填写",type:"warning"})})},update:function(t){var e=this,s={id:this.CATEGORY.ID};this.$axios.get(this.basic_url+"/api-apps/app/productType/operate/updateRelate",{params:s}).then(function(t){console.log(t.data.resp_code),0==t.data.resp_code&&e.$message({message:"更新成功",type:"success"})}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})},close:function(){this.show=!1,this.$emit("request")},open:function(){this.show=!0},toggle:function(t){1==this.isok1?this.maxDialog():this.rebackDialog()},maxDialog:function(e){this.isok1=!1,this.isok2=!0,t(".mask_div").width(document.body.clientWidth),t(".mask_div").height(document.body.clientHeight-60),t(".mask_div").css("top","60px")},rebackDialog:function(){this.isok1=!0,this.isok2=!1,t(".mask_div").css("width","80%"),t(".mask_div").css("height","80%"),t(".mask_div").css("top","100px")},save:function(t){var e=this;console.log(233333),console.log(this.CATEGORY),this.$refs[t].validate(function(t){if(t){e.CATEGORY.STATUS="1"==e.CATEGORY.STATUS||"活动"==e.CATEGORY.STATUS?"1":"0";var s=e.basic_url+"/api-apps/app/productType/saveOrUpdate";e.$axios.post(s,e.CATEGORY).then(function(t){0==t.data.resp_code?(e.$message({message:"保存成功",type:"success"}),e.$emit("request"),e.$emit("reset"),e.visible()):(e.show=!0,1==t.data.resp_code&&(""!=t.data.resp_msg?e.$message({message:t.data.resp_msg,type:"warning"}):e.$message({message:"相同数据不可重复添加！",type:"warning"})))}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})}),e.falg=!0}else e.show=!0,e.$message({message:"未填写完整，请填写",type:"warning"}),e.falg=!1})},saveAndUpdate:function(t){this.save(t),this.falg&&(this.show=!1)},saveAndSubmit:function(t){this.save(t),this.show=!0},dateFormat:function(t,e){var s=t[e.property];return void 0==s?"":this.$moment(s).format("YYYY-MM-DD")},handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})}},mounted:function(){}}}).call(e,s("7t+N"))},gz3a:function(t,e){},"nul/":function(t,e,s){"use strict";(function(t){var a=s("QmSG");e.a={props:["modelId"],name:"iframemask",data:function(){return{basic_url:a.a.dev_url,innerVisible:!1,show:!1,url:"",isok1:!0,isok2:!1}},methods:{close:function(){this.show=!1},open:function(){this.show=!0},visible:function(t){var e=this.basic_url;e=this.basic_url+"api-report/reportFile/page/preview";console.log(e),this.$axios.post(e,{params:{_report_id:3}}).then(function(t){console.log(t)}),this.show=!0},toggle:function(t){1==this.isok1?this.maxDialog():this.rebackDialog()},maxDialog:function(e){this.isok1=!1,this.isok2=!0,t(".mask_div").width(document.body.clientWidth),t(".mask_div").height(document.body.clientHeight-60),t(".mask_div").css("top","60px")},rebackDialog:function(){this.isok1=!0,this.isok2=!1,t(".mask_div").css("width","80%"),t(".mask_div").css("height","80%"),t(".mask_div").css("top","100px")}},mounted:function(){}}}).call(e,s("7t+N"))},rGs0:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("QmSG"),i=s("GkRW"),o=s("h7vj"),n=s("hbvp"),r=s("PX6h"),l=s("VEhc"),c=s("bOdI"),p=s.n(c),d=s("nul/"),u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.show?s("div",{staticClass:"masks"}):t._e(),t._v(" "),t.show?s("div",{staticClass:"mask_divbg"},[s("div",{staticClass:"masks_div"},[s("div",{staticClass:"mask_title_div clearfix"},[s("div",{staticClass:"mask_title"},[t._v("查看报表")]),t._v(" "),s("div",{staticClass:"mask_anniu"},[s("span",{staticClass:"mask_span mask_max",on:{click:t.toggle}},[s("i",{class:{"icon-maximization":t.isok1,"icon-restore":t.isok2}})]),t._v(" "),s("span",{staticClass:"mask_span",on:{click:t.close}},[s("i",{staticClass:"icon-close1"})])])]),t._v(" "),s("iframe",{attrs:{src:this.url+"/ureport/preview?_u=mysql:test.ureport.xml",id:"flowIframe",width:"100%",height:"100%",frameborder:"0",scrolling:"no"}})])]):t._e()])},staticRenderFns:[]};var h=function(t){s("3KaX")},m=s("VU/8")(d.a,u,!1,h,null,null).exports,g=s("8rq7"),v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{"modal-append-to-body":!1,title:"报表参数",visible:t.innerVisible,width:"60%"},on:{"update:visible":function(e){t.innerVisible=e}}},[s("div",[s("el-form",{ref:"dataInfo",staticClass:"demo-user",attrs:{model:t.dataInfo,"label-width":"100px"}},[s("div",{staticClass:"accordion"},[s("el-collapse",t._l(t.pramList,function(e){return s("el-form-item",{key:e.id,style:{width:e.width},attrs:{label:e.label,prop:e.prop}},["1"!=e.type&&"4"!=e.type&&"3"!=e.type?s("el-input",{model:{value:t.dataInfo[e.param],callback:function(s){t.$set(t.dataInfo,e.param,s)},expression:"dataInfo[item.param]"}}):t._e(),t._v(" "),1==e.type?s("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd"},model:{value:t.dataInfo[e.param],callback:function(s){t.$set(t.dataInfo,e.param,s)},expression:"dataInfo[item.param]"}}):t._e(),t._v(" "),4==e.type||3==e.type?s("el-input",{attrs:{disabled:!0},model:{value:t.dataInfo[e.prop],callback:function(s){t.$set(t.dataInfo,e.prop,s)},expression:"dataInfo[item.prop]"}},[s("el-button",{attrs:{slot:"append",disabled:t.noedit,icon:"el-icon-search"},on:{click:function(s){t.addPeople(e.type)}},slot:"append"})],1):t._e()],1)}))],1),t._v(" "),s("div",{staticClass:"el-dialog__footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveAndUpdate("dataInfo")}}},[t._v("保存")]),t._v(" "),s("el-button",{on:{click:t.close}},[t._v("取消")])],1)])],1)]),t._v(" "),s("el-dialog",{attrs:{"modal-append-to-body":!1,title:"用户",visible:t.dialogVisibleuser,width:"80%"},on:{"update:visible":function(e){t.dialogVisibleuser=e}}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userList,border:"",stripe:"","header-cell-style":t.rowClass,"default-sort":{prop:"userList",order:"descending"}},on:{"selection-change":t.SelChange}},[s("el-table-column",{attrs:{type:"selection",width:"55",fixed:"",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{label:"用户名",sortable:"",width:"140px",prop:"username"}}),t._v(" "),s("el-table-column",{attrs:{label:"姓名",sortable:"",width:"200px",prop:"nickname"}}),t._v(" "),s("el-table-column",{attrs:{label:"性别",sortable:"",width:"100px",prop:"sexName"}}),t._v(" "),s("el-table-column",{attrs:{label:"机构",sortable:"",width:"150px",prop:"deptName"}}),t._v(" "),s("el-table-column",{attrs:{label:"手机号",sortable:"",width:"150px",prop:"phone"}}),t._v(" "),s("el-table-column",{attrs:{label:"员工号",sortable:"",width:"150px",prop:"worknumber"}}),t._v(" "),s("el-table-column",{attrs:{label:"用户有效期",prop:"user_active_date",width:"150px",sortable:"",formatter:t.dateFormat}})],1),t._v(" "),s("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":t.page.currentPage,"page-sizes":[10,20,30,40],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next",total:t.page.totalCount},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.addcusname}},[t._v("确 定")]),t._v(" "),s("el-button",{on:{click:function(e){t.dialogVisibleuser=!1}}},[t._v("取 消")])],1)],1),t._v(" "),s("el-dialog",{attrs:{"modal-append-to-body":!1,title:"机构",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-tree",{ref:"tree",attrs:{data:t.resourceData,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":t.resourceCheckedKey,props:t.resourceProps,"check-strictly":""},on:{"node-click":t.handleNodeClick,"check-change":t.handleClicks}}),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dailogconfirm()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var f,b=function(t){s("RDhz")},_={name:"report",props:["reportData"],components:{reportiframe:m,reportpramiframe:s("VU/8")(g.a,v,!1,b,null,null).exports},data:function(){return{basic_url:a.a.dev_url,innerVisible:!1,reportsList:[],selreport:[],pramList:{},appname:""}},methods:(f={SelChange:function(t){this.selchange=t},close:function(){this.innerVisible=!1},open:function(){this.innerVisible=!0},visible:function(){this.open(),this.requestData()}},p()(f,"SelChange",function(t){this.selreport=t}),p()(f,"runReport",function(){var t=this;if(0!=this.selreport.length)if(this.selreport.length>1)this.$message({message:"不可同时修改多个数据",type:"warning"});else{var e=this.selreport[0].id;this.appname=this.reportData.app;var s=this.basic_url+"/api-apps/app/"+this.appname+"/reportParams/"+e;this.$axios.get(s,{}).then(function(s){null==s.data.datas?(console.log(e),t.$refs.reportchild.visible(e),t.close()):t.$refs.reportpramchild.visible(s.data.datas)}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}else this.$message({message:"请您选择要修改的数据",type:"warning"})}),p()(f,"requestData",function(){var t=this;this.appname=this.reportData.app;var e=this.basic_url+"/api-apps/app/"+this.appname+"/report";this.$axios.get(e,{}).then(function(e){console.log(e),t.reportsList=e.data.datas,t.innerVisible=!0}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}),f),mounted:function(){}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{"modal-append-to-body":!1,title:"报表",visible:t.innerVisible,width:"60%"},on:{"update:visible":function(e){t.innerVisible=e}}},[s("div",{},[s("button",{staticClass:"btn btn-green",attrs:{type:"button"},on:{click:t.runReport}},[s("i",{staticClass:"icon-add"}),t._v("运行报表\n\t\t\t")])]),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.reportsList,border:"",stripe:"",height:"550","default-sort":{prop:"reportsList",order:"descending"}},on:{"selection-change":t.SelChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),s("el-table-column",{attrs:{label:"代码",width:"200",sortable:"",prop:"code"}}),t._v(" "),s("el-table-column",{attrs:{label:"报表名称",width:"200",sortable:"",prop:"name"}}),t._v(" "),s("el-table-column",{attrs:{label:"id",sortable:"",prop:"id"}}),t._v(" "),s("el-table-column",{attrs:{label:"报表文件",sortable:"",prop:"file"}}),t._v(" "),s("el-table-column",{attrs:{label:"备注",sortable:"",prop:"remarks"}}),t._v(" "),s("el-table-column",{attrs:{label:"类型",sortable:"",prop:"type"}}),t._v(" "),s("el-table-column",{attrs:{label:"录入人",sortable:"",prop:"createby"}}),t._v(" "),s("el-table-column",{attrs:{label:"录入时间",sortable:"",prop:"createdate"}}),t._v(" "),s("el-table-column",{attrs:{label:"修改人",sortable:"",prop:"updateby"}}),t._v(" "),s("el-table-column",{attrs:{label:"修改日期",sortable:"",prop:"updatedate"}})],1)],1),t._v(" "),s("reportiframe",{ref:"reportchild"}),t._v(" "),s("reportpramiframe",{ref:"reportpramchild",attrs:{pramList:t.pramList}})],1)},staticRenderFns:[]};var C=s("VU/8")(_,w,!1,function(t){s("gz3a")},null,null).exports,E={name:"customer_management",components:{vheader:i.a,navs_left:n.a,navs_header:o.a,categorymask:r.a,tableControle:l.a,reportmask:C},data:function(){return{scroll_old:0,reportData:{},basic_url:a.a.dev_url,loadSign:!0,commentArr:{},loading:!1,fileList:[],value:"",productType:"productType",searchData:{page:1,limit:20,nickname:"",enabled:"",searchKey:"",searchValue:"",companyId:"",deptId:""},checkedName:["编码","名称","版本","机构","录入时间","修改时间"],tableHeader:[{label:"编码",prop:"NUM"},{label:"名称",prop:"TYPE"},{label:"版本",prop:"VERSION"},{label:"机构",prop:"DEPARTMENTDesc"},{label:"录入时间",prop:"ENTERDATE"},{label:"修改时间",prop:"CHANGEDATE"}],selUser:[],categoryList:[],search:!1,show:!1,down:!0,up:!1,isShow:!1,ismin:!0,fullHeight:document.documentElement.clientHeight-210+"px",searchList:{NUM:"",TYPE:"",VERSION:"",DEPTID:""},resourceData:[],resourceDialogisShow:!1,resourceCheckedKey:[],resourceProps:{categorymaskren:"subDepts",label:"simplename"},page:{currentPage:1,pageSize:20,totalCount:0},CATEGORY:{},selectData:[]}},methods:{rowClass:function(t){t.row,t.rowIndex;return"text-align:center"},getCompany:function(){var t=this,e=this.basic_url+"/api-user/depts/treeByType";this.$axios.get(e,{params:{type:"2"}}).then(function(e){console.log(e.data),t.selectData=e.data})},loadMore:function(){var t=this,e=sessionStorage.getItem("up2down");if(this.loadSign){if("down"==e){if(this.page.currentPage++,this.page.currentPage>Math.ceil(this.page.totalCount/this.page.pageSize))return this.page.currentPage=Math.ceil(this.page.totalCount/this.page.pageSize),!1}else if(this.page.currentPage--,this.page.currentPage<1)return this.page.currentPage=1,!1;this.loadSign=!1,setTimeout(function(){t.loadSign=!0},1e3),this.requestData()}},tableControle:function(t){this.checkedName=t},sizeChange:function(t){this.page.pageSize=t,this.requestData()},currentChange:function(t){this.page.currentPage=t,this.requestData()},resetbtn:function(){this.searchList={NUM:"",TYPE:"",VERSION:"",DEPTID:""},this.requestData()},searchinfo:function(t){this.page.currentPage=1,this.page.pageSize=20,this.requestData()},reset:function(){this.CATEGORY={ID:"",NUM:"",TYPE:"",STATUS:"活动",VERSION:"1",DEPARTMENT:"",ENTERBY:"",ENTERDATE:"",CHANGEBY:"",CHANGEDATE:""},void 0!==this.$refs.CATEGORY&&this.$refs.CATEGORY.resetFields()},openAddMgr:function(){this.reset(),this.$refs.categorymask.open(),this.$refs.categorymask.visible()},modify:function(){0!=this.selUser.length?this.selUser.length>1?this.$message({message:"不可同时修改多个数据",type:"warning"}):(this.CATEGORY=this.selUser[0],this.$refs.categorymask.detail()):this.$message({message:"请您选择要修改的数据",type:"warning"})},view:function(t){this.CATEGORY=t,this.$refs.categorymask.view()},modestsearch:function(){this.search=!this.search,this.down=!this.down,this.up=!this.up},deluserinfo:function(){var t=this,e=this.selUser;if(0!=e.length){for(var s=this.basic_url+"/api-apps/app/productType/deletes",a=e,i=[],o=0;o<a.length;o++)i.push(a[o].ID);var n={ids:i.toString(",")};this.$confirm("确定删除此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){e.value;t.$axios.delete(s,{params:n}).then(function(e){0==e.data.resp_code&&(t.$message({message:"删除成功",type:"success"}),t.requestData())}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要删除的数据",type:"warning"})},handleSuccess:function(t,e,s){console.log(t),console.log(e),console.log(s)},uploadUrl:function(){return this.basic_url+"/api-apps/app/productType/importExc?access_token="+sessionStorage.getItem("access_token")},download:function(){console.log(1234);var t=this.basic_url+"/api-apps/app/productType/importExcTemplete?access_token="+sessionStorage.getItem("access_token"),e=new XMLHttpRequest;e.open("POST",t,!0),e.responseType="blob",e.setRequestHeader("client_type","DESKTOP_WEB"),e.onload=function(){if(200==this.status){var t=this.response,e=URL.createObjectURL(t);window.location.href=e}},e.send()},exportData:function(){var t=this.basic_url+"/api-apps/app/productType/exportExc?access_token="+sessionStorage.getItem("access_token"),e=new XMLHttpRequest;e.open("POST",t,!0),e.responseType="blob",e.setRequestHeader("client_type","DESKTOP_WEB"),e.onload=function(){if(200==this.status){var t=this.response,e=document.createElement("a"),s=URL.createObjectURL(t);e.href=s,e.download="productType.xls",e.click()}},e.send()},Printing:function(){},reportdata:function(){this.reportData.app=this.productType,this.$refs.reportChild.visible()},Configuration:function(){this.$router.push({path:"/inspection_project"})},judge:function(t){t.STATUS="1"==t.STATUS?"活动":"不活动"},dateFormat:function(t,e){var s=t[e.property];return void 0==s?"":this.$moment(s).format("YYYY-MM-DD")},SelChange:function(t){this.selUser=t},requestData:function(t){var e=this;this.loading=!0;var s={page:this.page.currentPage,limit:this.page.pageSize,NUM:this.searchList.NUM,TYPE:this.searchList.TYPE,VERSION:this.searchList.VERSION,DEPTID:this.searchList.DEPTID},a=this.basic_url+"/api-apps/app/productType";this.$axios.get(a,{params:s}).then(function(t){e.page.totalCount=t.data.count;var s=Math.ceil(e.page.totalCount/e.page.pageSize);e.page.currentPage>=s?e.loadSign=!1:e.loadSign=!0,e.categoryList=t.data.data,e.loading=!1}).catch(function(t){e.$message({message:"网络错误，请重试1",type:"error"})})},handleNodeClick:function(t){},formatter:function(t,e){return t.enabled},childByValue:function(t){this.$refs.navsheader.showClick(t)}},mounted:function(){this.requestData(),this.getCompany()}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"headerbg"},[s("vheader"),t._v(" "),s("navs_header",{ref:"navsheader"})],1),t._v(" "),s("div",{staticClass:"contentbg"},[s("navs_left",{ref:"navleft",on:{childByValue:t.childByValue}}),t._v(" "),s("div",{staticClass:"wrapper wrapper-content"},[s("div",{staticClass:"ibox-content"},[s("div",{staticClass:"fixed-table-toolbar clearfix"},[s("div",{staticClass:"bs-bars pull-left"},[s("div",{staticClass:"hidden-xs",attrs:{id:"roleTableToolbar",role:"group"}},[s("button",{staticClass:"btn btn-green",attrs:{type:"button",id:""},on:{click:t.openAddMgr}},[s("i",{staticClass:"icon-add"}),t._v("添加\n\t              \t\t\t")]),t._v(" "),s("button",{staticClass:"btn btn-blue button-margin",attrs:{type:"button"},on:{click:t.modify}},[s("i",{staticClass:"icon-edit"}),t._v("修改\n\t\t\t\t\t\t\t")]),t._v(" "),s("button",{staticClass:"btn btn-red button-margin",attrs:{type:"button"},on:{click:t.deluserinfo}},[s("i",{staticClass:"icon-trash"}),t._v("删除\n\t\t\t\t\t\t\t")]),t._v(" "),s("el-dropdown",{staticStyle:{"margin-top":"1px"},attrs:{size:"small","split-button":"",type:"primary"}},[t._v("\n    \t\t\t\t\t\t\t\t导入\n\t\t\t\t\t\t\t\t"),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[s("div",{on:{click:t.download}},[t._v("下载模版")])]),t._v(" "),s("el-dropdown-item",[s("el-upload",{ref:"upload",staticClass:"upload",attrs:{action:t.uploadUrl(),"on-success":t.handleSuccess,limit:1,multiple:"","method:":"post","file-list":t.fileList}},[s("div",[t._v("上传")])])],1)],1)],1),t._v(" "),s("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.exportData}},[s("i",{staticClass:"icon-download-cloud"}),t._v("导出\n\t\t\t\t\t\t\t")]),t._v(" "),s("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.Printing}},[s("i",{staticClass:"icon-print"}),t._v("打印\n\t\t\t\t\t\t\t")]),t._v(" "),s("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.reportdata}},[s("i",{staticClass:"icon-download-cloud"}),t._v("报表\n\t\t\t\t\t\t\t")]),t._v(" "),s("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.Configuration}},[s("i",{staticClass:"icon-cpu"}),t._v("配置关系\n\t\t\t\t\t\t\t")]),t._v(" "),s("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.modestsearch}},[s("i",{staticClass:"icon-search"}),t._v("高级查询\n\t\t\t\t\t    \t\t"),s("i",{directives:[{name:"show",rawName:"v-show",value:t.down,expression:"down"}],staticClass:"icon-arrow1-down"}),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:t.up,expression:"up"}],staticClass:"icon-arrow1-up"})])],1)]),t._v(" "),s("div",{staticClass:"columns columns-right btn-group pull-right"},[t._m(0),t._v(" "),s("tableControle",{ref:"tableControle",attrs:{tableHeader:t.tableHeader,checkedName:t.checkedName},on:{tableControle:t.tableControle}})],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.search,expression:"search"}]},[s("el-form",{attrs:{model:t.searchList,"label-width":"45px"}},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:"编码",prop:"NUM"}},[s("el-input",{model:{value:t.searchList.NUM,callback:function(e){t.$set(t.searchList,"NUM",e)},expression:"searchList.NUM"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:"名称",prop:"TYPE"}},[s("el-input",{model:{value:t.searchList.TYPE,callback:function(e){t.$set(t.searchList,"TYPE",e)},expression:"searchList.TYPE"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:"版本",prop:"VERSION"}},[s("el-input",{model:{value:t.searchList.VERSION,callback:function(e){t.$set(t.searchList,"VERSION",e)},expression:"searchList.VERSION"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:"机构",prop:"DEPTID"}},[s("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择"},model:{value:t.searchList.DEPTID,callback:function(e){t.$set(t.searchList,"DEPTID",e)},expression:"searchList.DEPTID"}},t._l(t.selectData,function(t,e){return s("el-option",{key:e,attrs:{value:t.id,label:t.fullname}})}))],1)],1),t._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{staticStyle:{"margin-top":"2px"},attrs:{type:"primary",size:"small"},on:{click:t.searchinfo}},[t._v("搜索")]),t._v(" "),s("el-button",{staticStyle:{"margin-top":"2px","margin-left":"2px"},attrs:{type:"primary",size:"small"},on:{click:t.resetbtn}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:0}},[s("el-col",{attrs:{span:24}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"},{name:"loadmore",rawName:"v-loadmore",value:t.loadMore,expression:"loadMore"}],staticStyle:{width:"100%"},attrs:{"header-cell-style":t.rowClass,data:t.categoryList,"element-loading-text":"加载中…","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.9)",border:"",stripe:"",height:t.fullHeight,"default-sort":{prop:"categoryList",order:"descending"}},on:{"selection-change":t.SelChange}},[this.checkedName.length>0?s("el-table-column",{attrs:{type:"selection",fixed:"",width:"55",align:"center"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("编码")?s("el-table-column",{attrs:{label:"编码",width:"155",sortable:"",prop:"NUM"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("p",{staticClass:"blue",attrs:{title:"点击查看详情"},on:{click:function(s){t.view(e.row)}}},[t._v(t._s(e.row.NUM)+"\n\t\t\t\t\t\t\t\t\t\t")])]}}])}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("名称")?s("el-table-column",{attrs:{label:"名称",sortable:"",prop:"TYPE"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("版本")?s("el-table-column",{attrs:{label:"版本",width:"100",sortable:"",prop:"VERSION",align:"right"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("机构")?s("el-table-column",{attrs:{label:"机构",width:"185",sortable:"",prop:"DEPTIDDesc"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("录入时间")?s("el-table-column",{attrs:{label:"录入时间",width:"120",prop:"ENTERDATE",sortable:"",formatter:t.dateFormat}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("修改时间")?s("el-table-column",{attrs:{label:"修改时间",width:"120",prop:"CHANGEDATE",sortable:"",formatter:t.dateFormat}}):t._e()],1),t._v(" "),this.checkedName.length>0?s("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":t.page.currentPage,"page-sizes":[10,20,30,40,100],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next",total:t.page.totalCount},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}):t._e()],1)],1)],1)]),t._v(" "),s("categorymask",{ref:"categorymask",attrs:{CATEGORY:t.CATEGORY,page:t.page},on:{request:t.requestData,reset:t.reset}}),t._v(" "),s("reportmask",{ref:"reportChild",attrs:{reportData:t.reportData}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn btn-default btn-refresh",attrs:{id:"refresh",title:"刷新"}},[e("i",{staticClass:"icon-refresh"})])}]};var y=s("VU/8")(E,k,!1,function(t){s("Wcpf")},"data-v-2cd98a2d",null);e.default=y.exports},sGqF:function(t,e){}});
//# sourceMappingURL=4.c6f3546ff7822833cb14.js.map