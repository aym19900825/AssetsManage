webpackJsonp([43],{"//AH":function(t,e,a){"use strict";(function(t){var s=a("QmSG");e.a={name:"iframemask",data:function(){return{basic_url:s.a.dev_url,innerVisible:!1,show:!1,url:"",src:"",isok1:!0,isok2:!1,addtitle:!1,modifytitle:!1}},methods:{close:function(){this.show=!1},open:function(){this.show=!0},visible:function(){var t=this.basic_url;t=t.substring(0,21),this.url=t+"5300",this.src=this.url+"/reportFile/page/create",this.modifytitle=!1,this.addtitle=!0,this.show=!0},detail:function(t){console.log(t);var e=this.basic_url;e=e.substring(0,21),this.url=e+"5300",this.src=this.url+"/reportFile/page/edit?id="+t,console.log(this.src),this.modifytitle=!0,this.addtitle=!1,this.show=!0},toggle:function(t){1==this.isok1?this.maxDialog():this.rebackDialog()},maxDialog:function(e){this.isok1=!1,this.isok2=!0,t(".mask_div").width(document.body.clientWidth),t(".mask_div").height(document.body.clientHeight-60),t(".mask_div").css("top","60px")},rebackDialog:function(){this.isok1=!0,this.isok2=!1,t(".mask_div").css("width","80%"),t(".mask_div").css("height","80%"),t(".mask_div").css("top","100px")}},mounted:function(){}}}).call(e,a("7t+N"))},TeE2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("QmSG"),i=a("GkRW"),n=a("hbvp"),r=a("h7vj"),o=a("VEhc"),l=a("//AH"),c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.show?a("div",{staticClass:"masks"}):t._e(),t._v(" "),t.show?a("div",{staticClass:"mask_divbg"},[a("div",{staticClass:"masks_div"},[a("div",{staticClass:"mask_title_div clearfix"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.addtitle,expression:"addtitle"}],staticClass:"mask_title"},[t._v("添加报表文件")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.modifytitle,expression:"modifytitle"}],staticClass:"mask_title"},[t._v("修改报表文件")]),t._v(" "),a("div",{staticClass:"mask_anniu"},[a("span",{staticClass:"mask_span mask_max",on:{click:t.toggle}},[a("i",{class:{"icon-maximization":t.isok1,"icon-restore":t.isok2}})]),t._v(" "),a("span",{staticClass:"mask_span",on:{click:t.close}},[a("i",{staticClass:"icon-close1"})])])]),t._v(" "),a("iframe",{attrs:{src:this.src,width:"100%",height:"100%",frameborder:"0",scrolling:"no"}})])]):t._e()])},staticRenderFns:[]};var h=function(t){a("u5L5")},d=a("VU/8")(l.a,c,!1,h,null,null).exports,u={name:"report",components:{vheader:i.a,navs_left:n.a,navs_header:r.a,tableControle:o.a,iframemask:d},data:function(){return{loading:!1,loadSign:!0,commentArr:{},basic_url:s.a.dev_url,checkedName:["报表名称","录入人","修改人"],tableHeader:[{label:"报表名称",prop:"nickname"},{label:"录入人",prop:"createby"},{label:"修改人",prop:"updateby"}],selUser:[],reportsList:[],search:!1,show:!1,down:!0,up:!1,isShow:!1,ismin:!0,fullHeight:document.documentElement.clientHeight-210+"px",searchList:{nickname:"",enabled:"",createTime:""},page:{currentPage:1,pageSize:20,totalCount:0}}},methods:{tableControle:function(t){this.checkedName=t},sizeChange:function(t){this.page.pageSize=t,this.requestData()},currentChange:function(t){this.page.currentPage=t,this.requestData()},resetbtn:function(){this.searchList={typename:""},this.requestData()},searchinfo:function(){this.page.currentPage=1,this.page.pageSize=10,this.requestData()},openAddMgr:function(){this.$refs.child.visible()},modify:function(){0!=this.selUser.length?this.selUser.length>1?this.$message({message:"不可同时修改多个用户",type:"warning"}):this.$refs.child.detail(this.selUser[0].id):this.$message({message:"请您选择要修改的用户",type:"warning"})},view:function(){this.$refs.reportchild.visible()},modestsearch:function(){this.search=!this.search,this.down=!this.down,this.up=!this.up},deluserinfo:function(){var t=this,e=this.selUser;if(0!=e.length)if(e.length>1)this.$message({message:"不可同时删除多个用户",type:"warning"});else{var a=e[0].id,s=this.basic_url+"/api-report/report/"+a;this.$axios.delete(s,{}).then(function(e){0==e.data.resp_code&&(t.$message({message:"删除成功",type:"success"}),t.requestData())}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}else this.$message({message:"请您选择要删除的用户",type:"warning"})},importData:function(){},exportData:function(){},Printing:function(){},dateFormat:function(t,e){var a=t[e.property];return void 0==a?"":this.$moment(a).format("YYYY-MM-DD")},SelChange:function(t){this.selUser=t},requestData:function(){var t=this;this.loading=!0;var e={page:this.page.currentPage,limit:this.page.pageSize},a=this.basic_url+"/api-report/reportFile";this.$axios.get(a,{params:e}).then(function(e){t.page.totalCount=e.data.count;var a=Math.ceil(t.page.totalCount/t.page.pageSize);t.page.currentPage>=a?t.loadSign=!1:t.loadSign=!0,t.reportsList=e.data.data,t.loading=!1}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})},loadMore:function(){var t=this,e=sessionStorage.getItem("up2down");if(this.loadSign){if("down"==e){if(this.page.currentPage++,this.page.currentPage>Math.ceil(this.page.totalCount/this.page.pageSize))return this.page.currentPage=Math.ceil(this.page.totalCount/this.page.pageSize),!1}else if(this.page.currentPage--,this.page.currentPage<1)return this.page.currentPage=1,!1;this.loadSign=!1,setTimeout(function(){t.loadSign=!0},1e3),this.requestData()}},handleNodeClick:function(t){},formatter:function(t,e){return t.enabled},childByValue:function(t){console.log(t),this.$refs.navsheader.showClick(t)}},mounted:function(){this.requestData()}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"headerbg"},[a("vheader"),t._v(" "),a("navs_header",{ref:"navsheader"})],1),t._v(" "),a("div",{staticClass:"contentbg"},[a("navs_left",{ref:"navleft",on:{childByValue:t.childByValue}}),t._v(" "),a("div",{staticClass:"wrapper wrapper-content"},[a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"fixed-table-toolbar clearfix"},[a("div",{staticClass:"bs-bars pull-left"},[a("div",{staticClass:"hidden-xs",attrs:{id:"roleTableToolbar",role:"group"}},[a("button",{staticClass:"btn btn-green",attrs:{type:"button"},on:{click:t.openAddMgr}},[a("i",{staticClass:"icon-add"}),t._v("添加\r\n\t              \t\t\t ")]),t._v(" "),a("button",{staticClass:"btn btn-blue button-margin",attrs:{type:"button"},on:{click:t.modify}},[a("i",{staticClass:"icon-edit"}),t._v("修改\r\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-red button-margin",attrs:{type:"button"},on:{click:t.deluserinfo}},[a("i",{staticClass:"icon-trash"}),t._v("删除\r\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.importData}},[a("i",{staticClass:"icon-upload-cloud"}),t._v("导入\r\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.exportData}},[a("i",{staticClass:"icon-download-cloud"}),t._v("导出\r\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.Printing}},[a("i",{staticClass:"icon-print"}),t._v("打印\r\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.modestsearch}},[a("i",{staticClass:"icon-search"}),t._v("高级查询\r\n\t\t\t\t\t    \t\t"),a("i",{directives:[{name:"show",rawName:"v-show",value:t.down,expression:"down"}],staticClass:"icon-arrow1-down"}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.up,expression:"up"}],staticClass:"icon-arrow1-up"})])])]),t._v(" "),a("div",{staticClass:"columns columns-right btn-group pull-right"},[t._m(0),t._v(" "),a("tableControle",{ref:"tableControle",attrs:{tableHeader:t.tableHeader,checkedName:t.checkedName},on:{tableControle:t.tableControle}})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.search,expression:"search"}],staticClass:"pb10"},[a("el-form",{attrs:{model:t.searchList,"label-width":"70px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:5}},[a("el-input",{model:{value:t.searchList.typename,callback:function(e){t.$set(t.searchList,"typename",e)},expression:"searchList.typename"}},[a("template",{slot:"prepend"},[t._v("类型名称")])],2)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{margin:"4px"},attrs:{type:"primary",size:"small"},on:{click:t.searchinfo}},[t._v("搜索")]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"2px","margin-left":"2px"},attrs:{type:"primary",size:"small"},on:{click:t.resetbtn}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:24}},[a("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadMore,expression:"loadMore"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.reportsList,border:"",stripe:"",height:t.fullHeight,"default-sort":{prop:"reportsList",order:"descending"},"element-loading-text":"加载中…","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.9)"},on:{"selection-change":t.SelChange}},[this.checkedName.length>0?a("el-table-column",{attrs:{type:"selection",width:"55"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("报表名称")?a("el-table-column",{attrs:{label:"报表名称",width:"200",sortable:"",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticClass:"blue",attrs:{title:"点击查看详情"},on:{click:function(a){t.view(e.row)}}},[t._v(t._s(e.row.name)+"\r\n\t\t\t\t\t\t\t\t\t\t")])]}}])}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("录入人")?a("el-table-column",{attrs:{label:"录入人",sortable:"",prop:"createby"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("修改人")?a("el-table-column",{attrs:{label:"修改人",sortable:"",prop:"updateby"}}):t._e(),t._v(" "),this.checkedName.length>0?a("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":t.page.currentPage,"page-sizes":[10,20,30,40],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next",total:t.page.totalCount},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}):t._e()],1)],1)],1)],1)]),t._v(" "),a("iframemask",{ref:"child",on:{request:t.requestData}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn btn-default btn-refresh",attrs:{id:"refresh",title:"刷新"}},[e("i",{staticClass:"icon-refresh"})])}]};var g=a("VU/8")(u,p,!1,function(t){a("bZwR")},"data-v-38bda532",null);e.default=g.exports},bZwR:function(t,e){},u5L5:function(t,e){}});
//# sourceMappingURL=43.55da25a439e7dda3bd43.js.map