webpackJsonp([43],{"7BJB":function(e,t){},GLSc:function(e,t){},IKY4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("QmSG"),a=s("GkRW"),o=s("hbvp"),r=s("h7vj"),l=s("Yp/o"),n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.show?s("div",{staticClass:"mask"}):e._e(),e._v(" "),e.show?s("div",{staticClass:"mask_divbg"},[s("div",{staticClass:"mask_div"},[s("div",{staticClass:"mask_title_div clearfix"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.addtitle,expression:"addtitle"}],staticClass:"mask_title"},[e._v("添加客户")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.modifytitle,expression:"modifytitle"}],staticClass:"mask_title"},[e._v("修改客户")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.viewtitle,expression:"viewtitle"}],staticClass:"mask_title"},[e._v("查看客户")]),e._v(" "),s("div",{staticClass:"mask_anniu"},[s("span",{staticClass:"mask_span mask_max",on:{click:e.toggle}},[s("i",{class:{"icon-maximization":e.isok1,"icon-restore":e.isok2}})]),e._v(" "),s("span",{staticClass:"mask_span",on:{click:e.close}},[s("i",{staticClass:"icon-close1"})])])]),e._v(" "),s("div",{staticClass:"mask_content"},[s("el-form",{ref:"CUSTOMER",staticClass:"demo-adduserForm",attrs:{"inline-message":"",model:e.CUSTOMER,rules:e.rules,"label-position":e.labelPosition}},[s("div",{staticClass:"content-accordion",attrs:{id:"information"}},[s("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[s("el-collapse-item",{attrs:{title:"基本信息",name:"1"}},[s("el-row",{staticClass:"pb10",staticStyle:{display:"none"},attrs:{gutter:20}},[s("el-col",{staticClass:"pull-right",attrs:{span:5}})],1),e._v(" "),s("el-row",{attrs:{gutter:30}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"组织机构代码",prop:"CODE","label-width":"110px"}},[s("el-input",{attrs:{disabled:e.noedit},model:{value:e.CUSTOMER.CODE,callback:function(t){e.$set(e.CUSTOMER,"CODE",t)},expression:"CUSTOMER.CODE"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"单位名称",prop:"NAME","label-width":"100px"}},[s("el-input",{attrs:{disabled:e.noedit},model:{value:e.CUSTOMER.NAME,callback:function(t){e.$set(e.CUSTOMER,"NAME",t)},expression:"CUSTOMER.NAME"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"类型",prop:"TYPE","label-width":"100px"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:e.noedit},model:{value:e.CUSTOMER.TYPE,callback:function(t){e.$set(e.CUSTOMER,"TYPE",t)},expression:"CUSTOMER.TYPE"}},e._l(e.SeleCUST_TYPE,function(e,t){return s("el-option",{key:t,attrs:{value:e.code,label:e.name}})}))],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:30}},[s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"联系地址",prop:"CONTACT_ADDRESS","label-width":"110px"}},[s("el-input",{attrs:{disabled:e.noedit},model:{value:e.CUSTOMER.CONTACT_ADDRESS,callback:function(t){e.$set(e.CUSTOMER,"CONTACT_ADDRESS",t)},expression:"CUSTOMER.CONTACT_ADDRESS"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"邮政编码",prop:"ZIPCODE","label-width":"100px"}},[s("el-input",{attrs:{disabled:e.noedit},model:{value:e.CUSTOMER.ZIPCODE,callback:function(t){e.$set(e.CUSTOMER,"ZIPCODE",t)},expression:"CUSTOMER.ZIPCODE"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:30}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"备注",prop:"MEMO","label-width":"110px"}},[s("el-input",{attrs:{type:"textarea",disabled:e.noedit},model:{value:e.CUSTOMER.MEMO,callback:function(t){e.$set(e.CUSTOMER,"MEMO",t)},expression:"CUSTOMER.MEMO"}})],1)],1)],1)],1),e._v(" "),s("div",{staticClass:"el-collapse-item pt10 pr20 pb20",attrs:{"aria-expanded":"true",accordion:""}},[s("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{name:"first"}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"red"},[e._v("*")]),e._v(" 资质信息")]),e._v(" "),s("div",{staticClass:"table-func table-funcb"},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.viewtitle,expression:"!viewtitle"}],attrs:{type:"success",size:"mini",round:""},on:{click:e.addfield}},[s("i",{staticClass:"icon-add"}),e._v(" "),s("font",[e._v("新建行")])],1)],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":e.rowClass,fit:!0,data:e.CUSTOMER.CUSTOMER_QUALIFICATIONList,"row-key":"ID",border:"",stripe:"","max-height":"260","highlight-current-row":"","default-sort":{prop:"CUSTOMER.CUSTOMER_QUALIFICATIONList",order:"descending"}},on:{"cell-click":e.iconOperation}},[e.viewtitle?e._e():s("el-table-column",{attrs:{prop:"iconOperation",fixed:"",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("i",{directives:[{name:"show",rawName:"v-show",value:t.row.isEditing,expression:"scope.row.isEditing"}],staticClass:"el-icon-check"}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:!t.row.isEditing,expression:"!scope.row.isEditing"}],staticClass:"el-icon-edit"})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"序号",sortable:"",width:"100px",prop:"STEP",type:"index"}}),e._v(" "),s("el-table-column",{attrs:{label:"证书编号",sortable:"",width:"120px",prop:"CERTIFICATE_NUM"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-form-item",{attrs:{prop:"CUSTOMER_QUALIFICATIONList."+t.$index+".CERTIFICATE_NUM",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[s("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.isEditing,expression:"scope.row.isEditing"}],attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.row.CERTIFICATE_NUM,callback:function(s){e.$set(t.row,"CERTIFICATE_NUM",s)},expression:"scope.row.CERTIFICATE_NUM"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.isEditing,expression:"!scope.row.isEditing"}]},[e._v(e._s(t.row.CERTIFICATE_NUM))])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"CERTIFICATE_NAME",label:"证书名称",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-form-item",{attrs:{prop:"CUSTOMER_QUALIFICATIONList."+t.$index+".CERTIFICATE_NAME",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[s("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.isEditing,expression:"scope.row.isEditing"}],attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.row.CERTIFICATE_NAME,callback:function(s){e.$set(t.row,"CERTIFICATE_NAME",s)},expression:"scope.row.CERTIFICATE_NAME"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.isEditing,expression:"!scope.row.isEditing"}]},[e._v(e._s(t.row.CERTIFICATE_NAME))])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"ACTIVE_DATE",label:"资质有效期",sortable:"",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-form-item",{attrs:{prop:"CUSTOMER_QUALIFICATIONList."+t.$index+".ACTIVE_DATE",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[s("el-form-item",{attrs:{prop:"CUSTOMER_QUALIFICATIONList."+t.$index+".ACTIVE_DATE"}},[s("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:t.row.isEditing,expression:"scope.row.isEditing"}],staticStyle:{width:"90%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.row.ACTIVE_DATE,callback:function(s){e.$set(t.row,"ACTIVE_DATE",s)},expression:"scope.row.ACTIVE_DATE"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.isEditing,expression:"!scope.row.isEditing"}]},[e._v(e._s(t.row.ACTIVE_DATE))])],1)],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"MEMO",label:"备注",sortable:"",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.isEditing,expression:"scope.row.isEditing"}],attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.row.MEMO,callback:function(s){e.$set(t.row,"MEMO",s)},expression:"scope.row.MEMO"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.isEditing,expression:"!scope.row.isEditing"}]},[e._v(e._s(t.row.MEMO))])]}}])}),e._v(" "),e.viewtitle?e._e():s("el-table-column",{attrs:{prop:"REASION",label:"附件",sortable:"",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,multiple:"",limit:3,"on-exceed":e.handleExceed,"file-list":e.fileList}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)]}}])}),e._v(" "),e.viewtitle?e._e():s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.deleteRow(t.$index,t.row,"tableList")}}},[s("i",{staticClass:"icon-trash red"})])]}}])})],1)],1),e._v(" "),s("el-tab-pane",{attrs:{name:"second"}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("i",{staticClass:"red"},[e._v("*")]),e._v(" 客户联系人")]),e._v(" "),s("div",{staticClass:"table-func table-funcb"},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.viewtitle,expression:"!viewtitle"}],attrs:{type:"success",size:"mini",round:""},on:{click:e.addrela}},[s("i",{staticClass:"icon-add"}),e._v(" "),s("font",[e._v("新建行")])],1)],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":e.rowClass,fit:!0,data:e.CUSTOMER.CUSTOMER_PERSONList,"row-key":"ID",border:"",stripe:"","max-height":"260","highlight-current-row":"highlight-current-row","default-sort":{prop:"CUSTOMER.CUSTOMER_PERSONList",order:"descending"}},on:{"cell-click":e.iconOperation}},[e.viewtitle?e._e():s("el-table-column",{attrs:{prop:"iconOperation",fixed:"",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("i",{directives:[{name:"show",rawName:"v-show",value:t.row.isEditing,expression:"scope.row.isEditing"}],staticClass:"el-icon-check"}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:!t.row.isEditing,expression:"!scope.row.isEditing"}],staticClass:"el-icon-edit"})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"联系人",sortable:"",width:"150px",prop:"PERSON"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-form-item",{attrs:{prop:"CUSTOMER_PERSONList."+t.$index+".PERSON",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[s("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.isEditing,expression:"scope.row.isEditing"}],attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.row.PERSON,callback:function(s){e.$set(t.row,"PERSON",s)},expression:"scope.row.PERSON"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.isEditing,expression:"!scope.row.isEditing"}]},[e._v(e._s(t.row.PERSON))])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"PHONE",label:"联系电话",sortable:"",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-form-item",{attrs:{prop:"CUSTOMER_PERSONList."+t.$index+".PHONE",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[s("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.isEditing,expression:"scope.row.isEditing"}],attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.row.PHONE,callback:function(s){e.$set(t.row,"PHONE",s)},expression:"scope.row.PHONE"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.isEditing,expression:"!scope.row.isEditing"}]},[e._v(e._s(t.row.PHONE))])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"FAX",label:"传真",sortable:"",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.isEditing,expression:"scope.row.isEditing"}],attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.row.FAX,callback:function(s){e.$set(t.row,"FAX",s)},expression:"scope.row.FAX"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.isEditing,expression:"!scope.row.isEditing"}]},[e._v(e._s(t.row.FAX))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"EMAIL",label:"邮箱",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-form-item",{attrs:{prop:"CUSTOMER_PERSONList."+t.$index+".EMAIL",rules:{required:!0,message:"不能为空",trigger:"blur"}}},[s("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.isEditing,expression:"scope.row.isEditing"}],attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.row.EMAIL,callback:function(s){e.$set(t.row,"EMAIL",s)},expression:"scope.row.EMAIL"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.isEditing,expression:"!scope.row.isEditing"}]},[e._v(e._s(t.row.EMAIL))])],1)]}}])}),e._v(" "),e.viewtitle?e._e():s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.deleteRow(t.$index,t.row,"mainList")}}},[s("i",{staticClass:"icon-trash red"})])]}}])})],1)],1)],1)],1),e._v(" "),s("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.views,expression:"views"}],attrs:{title:"其它",name:"3"}},[s("el-row",{attrs:{gutter:30}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"录入人",prop:"ENTERBYDesc"}},[s("el-input",{attrs:{placeholder:"当前录入人",disabled:e.edit},model:{value:e.CUSTOMER.ENTERBYDesc,callback:function(t){e.$set(e.CUSTOMER,"ENTERBYDesc",t)},expression:"CUSTOMER.ENTERBYDesc"}})],1)],1),e._v(" "),e.dept?s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"机构",prop:"DEPTIDDesc"}},[s("el-input",{attrs:{placeholder:"当前录入人机构",disabled:e.edit},model:{value:e.CUSTOMER.DEPTIDDesc,callback:function(t){e.$set(e.CUSTOMER,"DEPTIDDesc",t)},expression:"CUSTOMER.DEPTIDDesc"}})],1)],1):e._e(),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"录入时间",prop:"ENTERDATE"}},[s("el-input",{attrs:{placeholder:"当前录入时间",disabled:e.edit},model:{value:e.CUSTOMER.ENTERDATE,callback:function(t){e.$set(e.CUSTOMER,"ENTERDATE",t)},expression:"CUSTOMER.ENTERDATE"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:30}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"修改人",prop:"CHANGEBYDesc"}},[s("el-input",{attrs:{placeholder:"记录当前修改人",disabled:e.edit},model:{value:e.CUSTOMER.CHANGEBYDesc,callback:function(t){e.$set(e.CUSTOMER,"CHANGEBYDesc",t)},expression:"CUSTOMER.CHANGEBYDesc"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"修改时间",prop:"CHANGEDATE"}},[s("el-input",{attrs:{placeholder:"自动记录当前修改时间",disabled:e.edit},model:{value:e.CUSTOMER.CHANGEDATE,callback:function(t){e.$set(e.CUSTOMER,"CHANGEDATE",t)},expression:"CUSTOMER.CHANGEDATE"}})],1)],1)],1)],1)],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.noviews,expression:"noviews"}],staticClass:"content-footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveAndUpdate("CUSTOMER")}}},[e._v("保存")]),e._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.addtitle,expression:"addtitle"}],attrs:{type:"success"},on:{click:function(t){e.saveAndSubmit("CUSTOMER")}}},[e._v("保存并继续")]),e._v(" "),s("el-button",{on:{click:e.close}},[e._v("取消")])],1)])],1)])]):e._e()])},staticRenderFns:[]};var c=function(e){s("7BJB")},d=s("VU/8")(l.a,n,!1,c,"data-v-051d50a0",null).exports,u=s("VEhc"),p={name:"user_management",components:{vheader:a.a,navs_left:o.a,navs_header:r.a,tableControle:u.a,customermask:d},data:function(){return{loading:!1,basic_url:i.a.dev_url,loadSign:!0,commentArr:{},value:"",options:[{value:"1",label:"活动"},{value:"0",label:"不活动"}],searchData:{page:1,limit:10,nickname:"",enabled:"",searchKey:"",searchValue:"",companyId:"",deptId:""},checkedName:["统一信用代码/组织机构代码","单位名称","联系地址","类型","备注"],tableHeader:[{label:"统一信用代码/组织机构代码",prop:"CODE"},{label:"单位名称",prop:"NAME"},{label:"联系地址",prop:"CONTACT_ADDRESS"},{label:"类型",prop:"TYPE"},{label:"备注",prop:"MEMO"}],companyId:"",deptId:"",selUser:[],customerList:[],search:!1,show:!1,down:!0,up:!1,isShow:!1,ismin:!0,fileList:[],fullHeight:document.documentElement.clientHeight-210+"px",searchList:{NAME:"",CODE:"",PHONE:"",CONTACT_ADDRESS:"",STATUS:""},resourceData:[],resourceDialogisShow:!1,resourceCheckedKey:[],resourceProps:{children:"subDepts",label:"simplename"},page:{currentPage:1,pageSize:20,totalCount:0},buttons:[]}},methods:{rowClass:function(e){e.row,e.rowIndex;return"text-align:center"},loadMore:function(){var e=this,t=sessionStorage.getItem("up2down");if(this.loadSign){if("down"==t){if(this.page.currentPage++,this.page.currentPage>Math.ceil(this.page.totalCount/this.page.pageSize))return this.page.currentPage=Math.ceil(this.page.totalCount/this.page.pageSize),!1}else if(this.page.currentPage--,this.page.currentPage<1)return this.page.currentPage=1,!1;this.loadSign=!1,setTimeout(function(){e.loadSign=!0},1e3),this.requestData()}},tableControle:function(e){this.checkedName=e},sizeChange:function(e){this.page.pageSize=e,this.requestData()},currentChange:function(e){this.page.currentPage=e,this.requestData()},searchinfo:function(e){this.page.currentPage=1,this.page.pageSize=20,this.requestData()},resetbtn:function(){this.searchList={NAME:"",CODE:"",PHONE:"",CONTACT_ADDRESS:"",STATUS:""},this.requestData()},getbtn:function(e){"添加"==e.name?this.openAddMgr():"修改"==e.name?this.modify():"高级查询"==e.name?this.modestsearch():"删除"==e.name?this.deluserinfo():"物理删除"==e.name&&this.physicsDel()},openAddMgr:function(){this.$refs.child.open(),this.$refs.child.visible()},modify:function(){0!=this.selUser.length?this.selUser.length>1?this.$message({message:"不可同时修改多个数据",type:"warning"}):this.$refs.child.detail(this.selUser[0].ID):this.$message({message:"请您选择要修改的数据",type:"warning"})},view:function(e){this.$refs.child.view(e)},modestsearch:function(){this.search=!this.search,this.down=!this.down,this.up=!this.up},deluserinfo:function(){var e=this,t=this.selUser;if(0!=t.length){for(var s=this.basic_url+"/api-apps/app/customer/deletes",i=t,a=[],o=0;o<i.length;o++)a.push(i[o].ID);var r={ids:a.toString(",")};this.$confirm("确定删除此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){t.value;e.$axios.delete(s,{params:r}).then(function(t){0==t.data.resp_code&&(e.$message({message:"删除成功",type:"success"}),e.requestData())}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要删除的数据",type:"warning"})},physicsDel:function(){var e=this,t=this.selUser;if(0!=t.length){for(var s=this.basic_url+"/api-apps/app/customer/deletes/physicsDel",i=t,a=[],o=0;o<i.length;o++)a.push(i[o].ID);var r={ids:a.toString(",")};this.$confirm("确定删除此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){t.value;e.$axios.delete(s,{params:r}).then(function(t){0==t.data.resp_code&&(e.$message({message:"删除成功",type:"success"}),e.requestData())}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要删除的数据",type:"warning"})},importData:function(){},exportData:function(){var e=this.basic_url+"/api-apps/app/customer/exportExc?access_token="+sessionStorage.getItem("access_token"),t=new XMLHttpRequest;t.open("POST",e,!0),t.responseType="blob",t.setRequestHeader("client_type","DESKTOP_WEB"),t.onload=function(){if(200==this.status){var e=this.response,t=document.createElement("a"),s=URL.createObjectURL(e);t.href=s,t.download="customer.xls",t.click()}},t.send()},Printing:function(){},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},judge:function(e){return"1"==e.STATUS?"活动":"不活动"},dateFormat:function(e,t){var s=e[t.property];return void 0==s?"":this.$moment(s).format("YYYY-MM-DD")},SelChange:function(e){this.selUser=e},requestData:function(e){var t=this;this.loading=!0;var s={page:this.page.currentPage,limit:this.page.pageSize,NAME:this.searchList.NAME,CODE:this.searchList.CODE,PHONE:this.searchList.PHONE,CONTACT_ADDRESS:this.searchList.CONTACT_ADDRESS,STATUS:this.searchList.STATUS},i=this.basic_url+"/api-apps/app/customer";this.$axios.get(i,{params:s}).then(function(e){console.log(e),t.page.totalCount=e.data.count;var s=Math.ceil(t.page.totalCount/t.page.pageSize);t.page.currentPage>=s?t.loadSign=!1:t.loadSign=!0,t.commentArr[t.page.currentPage]=e.data.data;for(var i=[],a=1;a<=s;a++)if(void 0!==t.commentArr[a]&&t.commentArr[a].length>0)for(var o=0;o<t.commentArr[a].length;o++)i.push(t.commentArr[a][o]);t.customerList=i,t.loading=!1}).catch(function(e){})},handleNodeClick:function(e){},formatter:function(e,t){return e.enabled},childvalue:function(e){console.log(e),this.getbutton(e)},getbutton:function(e){var t=this;console.log(e);var s={menuId:e.id,roleId:this.$store.state.roleid},i=this.basic_url+"/api-user/permissions/getPermissionByRoleIdAndSecondMenu";this.$axios.get(i,{params:s}).then(function(e){console.log(e),t.buttons=e.data}).catch(function(e){})}},mounted:function(){this.requestData()}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"headerbg"},[s("vheader"),e._v(" "),s("navs_header",{ref:"navsheader"})],1),e._v(" "),s("div",{staticClass:"contentbg"},[s("navs_left",{ref:"navleft",on:{childByValue:e.childvalue}}),e._v(" "),s("div",{staticClass:"wrapper wrapper-content"},[s("div",{staticClass:"ibox-content"},[s("div",{staticClass:"fixed-table-toolbar clearfix"},[s("div",{staticClass:"bs-bars pull-left"},[s("div",{staticClass:"hidden-xs",attrs:{id:"roleTableToolbar",role:"group"}},e._l(e.buttons,function(t){return s("button",{staticClass:"btn mr5",class:t.style,on:{click:function(s){e.getbtn(t)}}},[s("i",{class:t.icon}),e._v(e._s(t.name)+"\r\n\t\t\t\t\t\t\t")])}))]),e._v(" "),s("div",{staticClass:"columns columns-right btn-group pull-right"},[e._m(0),e._v(" "),s("tableControle",{ref:"tableControle",attrs:{tableHeader:e.tableHeader,checkedName:e.checkedName},on:{tableControle:e.tableControle}})],1)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.search,expression:"search"}]},[s("el-form",{attrs:{model:e.searchList,"label-width":"70px"}},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"统一信用代码/组织机构代码",prop:"CODE","label-width":"190px"}},[s("el-input",{model:{value:e.searchList.CODE,callback:function(t){e.$set(e.searchList,"CODE",t)},expression:"searchList.CODE"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:"单位名称",prop:"NAME"}},[s("el-input",{model:{value:e.searchList.NAME,callback:function(t){e.$set(e.searchList,"NAME",t)},expression:"searchList.NAME"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:"联系地址",prop:"CONTACT_ADDRESS"}},[s("el-input",{model:{value:e.searchList.CONTACT_ADDRESS,callback:function(t){e.$set(e.searchList,"CONTACT_ADDRESS",t)},expression:"searchList.CONTACT_ADDRESS"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{staticStyle:{"margin-top":"2px"},attrs:{type:"primary",size:"small"},on:{click:e.searchinfo}},[e._v("搜索")]),e._v(" "),s("el-button",{staticStyle:{"margin-top":"2px","margin-left":"2px"},attrs:{type:"primary",size:"small"},on:{click:e.resetbtn}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:0}},[s("el-col",{attrs:{span:24}},[s("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.customerList,border:"",stripe:"","header-cell-style":e.rowClass,height:e.fullHeight,"default-sort":{prop:"customerList",order:"descending"},"element-loading-text":"加载中…","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.9)"},on:{"selection-change":e.SelChange}},[this.checkedName.length>0?s("el-table-column",{attrs:{type:"selection",width:"55",fixed:"",align:"center"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("统一信用代码/组织机构代码")?s("el-table-column",{attrs:{label:"组织机构代码",width:"200",sortable:"",prop:"CODE"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"blue",attrs:{title:"点击查看详情"},on:{click:function(s){e.view(t.row.ID)}}},[e._v(e._s(t.row.CODE)+"\r\n\t\t\t\t\t\t\t\t\t")])]}}])}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("单位名称")?s("el-table-column",{attrs:{label:"单位名称",sortable:"",prop:"NAME"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("联系地址")?s("el-table-column",{attrs:{label:"联系地址",sortable:"",prop:"CONTACT_ADDRESS"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("类型")?s("el-table-column",{attrs:{label:"类型",sortable:"",prop:"TYPE"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("备注")?s("el-table-column",{attrs:{label:"备注",sortable:"",prop:"MEMO"}}):e._e()],1),e._v(" "),this.checkedName.length>0?s("el-pagination",{staticClass:"text-right pt10",attrs:{background:"","current-page":e.page.currentPage,"page-sizes":[10,20,30,40],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.totalCount},on:{"size-change":e.sizeChange,"current-change":e.currentChange}}):e._e()],1)],1)],1)]),e._v(" "),s("customermask",{ref:"child",attrs:{page:e.page},on:{request:e.requestData}})],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"btn btn-default btn-refresh",attrs:{id:"refresh",title:"刷新"}},[t("i",{staticClass:"icon-refresh"})])}]};var m=s("VU/8")(p,h,!1,function(e){s("GLSc")},"data-v-55b8238c",null);t.default=m.exports},"Yp/o":function(e,t,s){"use strict";(function(e){var i,a=s("bOdI"),o=s.n(a),r=s("QmSG");t.a={name:"customer_masks",data:function(){var e;return e={basic_url:r.a.dev_url,personinfo:!1,loadSign:!0,commentArr:{},value:"",options:[{value:"1",label:"活动"},{value:"0",label:"不活动"}],Selectsys_depttype:[],selUser:[],modify:!1,statusshow1:!0,statusshow2:!1,edit:!0,show:!1,isok1:!0,isok2:!1,down:!0,up:!1,addtitle:!0,modifytitle:!1,activeName:"first",activeNames:["1","2","3"],labelPosition:"right",dialogVisible:!1,selectData:[],fileList:[],CUSTOMER:{CUSTOMER_QUALIFICATIONList:[],CUSTOMER_PERSONList:[]},rules:{CODE:[{required:!0,message:"必填",trigger:"blur"},{validator:this.Validators.isWorknumber,trigger:"blur"}],NAME:[{required:!0,message:"必填",trigger:"blur"},{validator:this.Validators.isNickname,trigger:"blur"}],CONTACT_ADDRESS:[{required:!0,message:"必填",trigger:"blur"},{validator:this.Validators.isSpecificKey,trigger:"blur"}],MEMO:[{required:!1,trigger:"blur",validator:this.Validators.isSpecificKey}],ZIPCODE:[{required:!1,trigger:"blur",validator:this.Validators.isZipcode}]},resourceData:[],page:{currentPage:1,pageSize:10,totalCount:0},falg:!0,index:0},o()(e,"addtitle",!0),o()(e,"modifytitle",!1),o()(e,"viewtitle",!1),o()(e,"dept",!1),o()(e,"noedit",!1),o()(e,"views",!1),o()(e,"noviews",!0),o()(e,"modify",!1),o()(e,"hintshow",!1),o()(e,"statusshow1",!0),o()(e,"statusshow2",!1),e},methods:(i={rowClass:function(e){e.row,e.rowIndex;return"text-align:center"},handleClick:function(e,t){console.log(e,t)},iconOperation:function(e,t,s,i){"iconOperation"===t.property&&(e.isEditing=!e.isEditing)},SelChange:function(e){this.selUser=e},rand:function(e,t){return Math.floor(Math.random()*(t-e))+e},addfield:function(){this.CUSTOMER.CUSTOMER_QUALIFICATIONList.push({STEP:"",CERTIFICATE_NUM:"",CERTIFICATE_NAME:"",ACTIVE_DATE:"",STATUS:"",MEMO:"",isEditing:!0})},addrela:function(){this.CUSTOMER.CUSTOMER_PERSONList.push({ID:"",CODE:"",PERSON:"",PHONE:"",FAX:"",EMAIL:"",STATUS:"",MEMO:"",ENTERBY:"",ENTERDATE:"",CHANGEBY:"",CHANGEDATE:"",DEPTID:"",isEditing:!0})},deleteRow:function(e,t,s){var i=this;console.log(t);var a="";if(console.log(s),a="tableList"==s?"CUSTOMER_QUALIFICATION":"CUSTOMER_PERSON",t.ID){var o=this.basic_url+"/api-apps/app/customer/"+a+"/"+t.ID;this.$confirm("确定删除此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){t.value;i.$axios.delete(o,{}).then(function(t){console.log(t),0==t.data.resp_code?(i.CUSTOMER[a+"List"].splice(e,1),i.$message({message:"删除成功",type:"success"})):i.$message({message:t.data.resp_msg,type:"error"})}).catch(function(e){i.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.CUSTOMER[a+"List"].splice(e,1)}},o()(i,"rand",function(e,t){return Math.floor(Math.random()*(t-e))+e}),o()(i,"reset",function(){this.CUSTOMER={ID:"",CODE:"",NAME:"",CONTACT_ADDRESS:"",PHONE:"",PERSON:"",TYPE:"",ZIPCODE:"",STATUS:"活动",FAX:"",EMAIL:"",ENTERBY:"",ENTERDATE:"",CHANGEBY:"",CHANGEDATE:"",DEPTID:"",MEMO:"",CUSTOMER_QUALIFICATIONList:[],CUSTOMER_PERSONList:[]}}),o()(i,"visible",function(){var e=this;this.reset(),this.addtitle=!0,this.modifytitle=!1,this.viewtitle=!1,this.dept=!1,this.noedit=!1,this.views=!1,this.noviews=!0,this.modify=!1,this.hintshow=!1,this.statusshow1=!0,this.statusshow2=!1;var t=new Date;this.CUSTOMER.ENTERDATE=this.$moment(t).format("YYYY-MM-DD HH:mm:ss"),this.$axios.get(this.basic_url+"/api-user/users/currentMap",{}).then(function(t){e.CUSTOMER.ENTERBY=t.data.id,e.CUSTOMER.DEPTID=t.data.deptId}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})}),o()(i,"getsys_depttype",function(){var e=this,t=this.basic_url+"/api-user/dicts/findChildsByCode?code=CUST_TYPE";this.$axios.get(t,{}).then(function(t){e.SeleCUST_TYPE=t.data}).catch(function(e){console.log("请求失败")})}),o()(i,"detail",function(e){var t=this;this.addtitle=!1,this.modifytitle=!0,this.viewtitle=!1,this.dept=!0,this.noedit=!1,this.views=!1,this.noviews=!0,this.hintshow=!1,this.modify=!0,this.statusshow1=!1,this.statusshow2=!0,this.$axios.get(this.basic_url+"/api-user/users/currentMap",{}).then(function(e){t.CUSTOMER.CHANGEBY=e.data.id,t.CUSTOMER.DEPTID=e.data.deptId;var s=new Date;t.CUSTOMER.CHANGEDATE=t.$moment(s).format("yyyy-MM-dd hh:mm:ss")}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})}),this.$axios.get(this.basic_url+"/api-apps/app/customer/"+e,{}).then(function(e){console.log(e.data);for(var s=0;s<e.data.CUSTOMER_QUALIFICATIONList.length;s++)e.data.CUSTOMER_QUALIFICATIONList[s].isEditing=!1;for(s=0;s<e.data.CUSTOMER_PERSONList.length;s++)e.data.CUSTOMER_PERSONList[s].isEditing=!1;t.CUSTOMER=e.data,t.CUSTOMER.STATUS="1"==t.CUSTOMER.STATUS?"活动":"不活动",t.show=!0}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}),o()(i,"view",function(e){var t=this;this.addtitle=!1,this.modifytitle=!1,this.viewtitle=!0,this.dept=!0,this.noedit=!0,this.views=!0,this.noviews=!1,this.$axios.get(this.basic_url+"/api-apps/app/customer/"+e,{}).then(function(e){t.CUSTOMER=e.data,t.CUSTOMER.STATUS="1"==t.CUSTOMER.STATUS?"活动":"不活动",t.show=!0}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})}),this.show=!0}),o()(i,"handleRemove",function(e,t){console.log(e,t)}),o()(i,"handlePreview",function(e){console.log(e)}),o()(i,"handleExceed",function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")}),o()(i,"beforeRemove",function(e,t){return this.$confirm("确定移除 "+e.name+"？")}),o()(i,"close",function(){this.show=!1,this.$emit("request")}),o()(i,"open",function(){this.show=!0}),o()(i,"toggle",function(e){1==this.isok1?this.maxDialog():this.rebackDialog()}),o()(i,"maxDialog",function(t){this.isok1=!1,this.isok2=!0,e(".mask_div").width(document.body.clientWidth),e(".mask_div").height(document.body.clientHeight-60),e(".mask_div").css("top","60px")}),o()(i,"rebackDialog",function(){this.isok1=!0,this.isok2=!1,e(".mask_div").css("width","80%"),e(".mask_div").css("height","80%"),e(".mask_div").css("top","100px")}),o()(i,"save",function(){var e=this;this.$refs.CUSTOMER.validate(function(t){if(t)if(0==e.CUSTOMER.CUSTOMER_QUALIFICATIONList.length||0==e.CUSTOMER.CUSTOMER_PERSONList.length)e.$message({message:"表格信息为必填内容",type:"warning"}),e.falg=!1;else{e.CUSTOMER.STATUS="活动"==e.CUSTOMER.STATUS?"1":"0";var s=e.basic_url+"/api-apps/app/customer/saveOrUpdate";e.$axios.post(s,e.CUSTOMER).then(function(t){0==t.data.resp_code&&(e.$message({message:"保存成功",type:"success"}),e.$emit("request"))}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})}),e.falg=!0}else e.show=!0,e.$message({message:"有必填项未填写，请重新填写",type:"warning"}),e.falg=!1})}),o()(i,"saveAndUpdate",function(){this.save(),this.falg&&(this.show=!1),this.$emit("request")}),o()(i,"saveAndSubmit",function(){this.save(),this.reset(),this.show=!0,this.$emit("request")}),o()(i,"handleClose",function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})}),i),mounted:function(){this.getsys_depttype()}}}).call(t,s("7t+N"))}});
//# sourceMappingURL=43.7052a0273dadcde09bc8.js.map