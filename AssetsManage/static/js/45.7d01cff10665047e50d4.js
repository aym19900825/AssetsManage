webpackJsonp([45],{"6Fz+":function(t,e){},S4ri:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("QmSG"),i=a("GkRW"),o=a("hbvp"),n=a("h7vj"),r=a("VEhc"),l=a("xBjX"),c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.show?a("div",{staticClass:"mask"}):t._e(),t._v(" "),t.show?a("div",{staticClass:"mask_divbg"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mask_div"},[a("div",{staticClass:"mask_title_div clearfix"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.addtitle,expression:"addtitle"}],staticClass:"mask_title"},[t._v("添加检验/检测标准")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.modifytitle,expression:"modifytitle"}],staticClass:"mask_title"},[t._v("修改检验/检测标准")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.viewtitle,expression:"viewtitle"}],staticClass:"mask_title"},[t._v("查看检验/检测标准")]),t._v(" "),a("div",{staticClass:"mask_anniu"},[a("span",{staticClass:"mask_span mask_max",on:{click:t.toggle}},[a("i",{class:{"icon-maximization":t.isok1,"icon-restore":t.isok2}})]),t._v(" "),a("span",{staticClass:"mask_span",on:{click:t.close}},[a("i",{staticClass:"icon-close1"})])])]),t._v(" "),a("el-form",{ref:"dataInfo",staticClass:"demo-user",attrs:{model:t.dataInfo,"inline-message":"",rules:t.rules,"label-width":"80px"}},[a("div",{staticClass:"mask_content"},[a("div",{staticClass:"accordion",attrs:{id:"information"}},[a("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"基本信息",name:"1"}},[a("el-row",{staticClass:"pb10",staticStyle:{"margin-right":"5px"}},[a("el-col",{staticClass:"pull-right",attrs:{span:3}},[a("el-input",{attrs:{disabled:!0},model:{value:t.dataInfo.VERSION,callback:function(e){t.$set(t.dataInfo,"VERSION",e)},expression:"dataInfo.VERSION"}},[a("template",{slot:"prepend"},[t._v("版本")])],2)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"标准编号",prop:"S_NUM"}},[a("el-input",{attrs:{disabled:t.noedit,placeholder:"编码不填写可自动生成"},model:{value:t.dataInfo.S_NUM,callback:function(e){t.$set(t.dataInfo,"S_NUM",e)},expression:"dataInfo.S_NUM"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.dataInfo.S_NAME,placement:"top"}},[a("el-form-item",{attrs:{label:"标准名称",prop:"S_NAME"}},[a("el-input",{attrs:{disabled:t.noedit},model:{value:t.dataInfo.S_NAME,callback:function(e){t.$set(t.dataInfo,"S_NAME",e)},expression:"dataInfo.S_NAME"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"英文名称",prop:"S_ENGNAME"}},[a("el-input",{attrs:{disabled:t.noedit},on:{focus:function(e){t.editBox("S_ENGNAME")}},model:{value:t.dataInfo.S_ENGNAME,callback:function(e){t.$set(t.dataInfo,"S_ENGNAME",e)},expression:"dataInfo.S_ENGNAME"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发布时间",prop:"RELEASETIME"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",disabled:t.noedit},model:{value:t.dataInfo.RELEASETIME,callback:function(e){t.$set(t.dataInfo,"RELEASETIME",e)},expression:"dataInfo.RELEASETIME"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"启用时间",prop:"STARTETIME"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",disabled:t.noedit},model:{value:t.dataInfo.STARTETIME,callback:function(e){t.$set(t.dataInfo,"STARTETIME",e)},expression:"dataInfo.STARTETIME"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发布单位",prop:"RELEASE_UNIT"}},[a("el-input",{attrs:{disabled:t.noedit},model:{value:t.dataInfo.RELEASE_UNIT,callback:function(e){t.$set(t.dataInfo,"RELEASE_UNIT",e)},expression:"dataInfo.RELEASE_UNIT"}})],1)],1)],1),t._v(" "),a("el-row",[t.dept?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"机构",prop:"DEPTIDDesc"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.dataInfo.DEPTIDDesc,callback:function(e){t.$set(t.dataInfo,"DEPTIDDesc",e)},expression:"dataInfo.DEPTIDDesc"}})],1)],1):t._e()],1)],1),t._v(" "),a("el-collapse-item",{attrs:{title:"文件",name:"2"}},[a("doc-table",{ref:"docTable",attrs:{docParm:t.docParm},on:{saveParent:t.save,showLoading:t.showLoading,closeLoading:t.closeLoading}})],1),t._v(" "),a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:t.views,expression:"views"}],attrs:{title:"其它",name:"3"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"录入人",prop:"ENTERBYDesc"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.dataInfo.ENTERBYDesc,callback:function(e){t.$set(t.dataInfo,"ENTERBYDesc",e)},expression:"dataInfo.ENTERBYDesc"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"录入时间",prop:"ENTERDATE"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.dataInfo.ENTERDATE,callback:function(e){t.$set(t.dataInfo,"ENTERDATE",e)},expression:"dataInfo.ENTERDATE"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"修改人",prop:"CHANGEBYDesc"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.dataInfo.CHANGEBYDesc,callback:function(e){t.$set(t.dataInfo,"CHANGEBYDesc",e)},expression:"dataInfo.CHANGEBYDesc"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"修改时间",prop:"CHANGEDATE"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.dataInfo.CHANGEDATE,callback:function(e){t.$set(t.dataInfo,"CHANGEDATE",e)},expression:"dataInfo.CHANGEDATE"}})],1)],1)],1)],1)],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.noviews,expression:"noviews"}],staticClass:"el-dialog__footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveAndUpdate("dataInfo")}}},[t._v("保存")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.addtitle,expression:"addtitle"}],attrs:{type:"success"},on:{click:function(e){t.saveAndSubmit("dataInfo")}}},[t._v("保存并继续")]),t._v(" "),t.modify?a("el-button",{staticClass:"btn-primarys",attrs:{type:"primary"},on:{click:function(e){t.modifyversion("dataInfo")}}},[t._v("修订")]):t._e(),t._v(" "),a("el-button",{on:{click:t.close}},[t._v("取消")])],1)])])],1),t._v(" "),a("el-dialog",{attrs:{"modal-append-to-body":!1,title:"信息",visible:t.dialogFormVisible,"before-close":t.resetEditBox},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"英文名称","label-width":t.formLabelWidth,prop:"editDataInfo"}},[a("el-input",{attrs:{type:"textarea",rows:4,autocomplete:"off"},model:{value:t.editDataInfo,callback:function(e){t.editDataInfo=e},expression:"editDataInfo"}})],1),t._v(" "),a("el-form-item",{staticClass:"text-center pt20"},[a("el-button",{on:{click:t.resetEditBox}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveEditBox}},[t._v("确 定")])],1)],1)],1)],1):t._e()])},staticRenderFns:[]};var d=function(t){a("6Fz+")},p=a("VU/8")(l.a,c,!1,d,"data-v-52d29a52",null).exports,h=a("jk2w"),u={name:"testing_standard",components:{vheader:i.a,navs_header:n.a,tableControle:r.a,navs_left:o.a,standardmask:p,reportmask:h.a},data:function(){return{reportData:{},loading:!1,basic_url:s.a.dev_url,fullHeight:document.documentElement.clientHeight-210+"px",value:"",options:[{value:"1",label:"活动"},{value:"0",label:"不活动"}],loadSign:!0,commentArr:{},searchData:{page:1,limit:10,searchKey:"",searchValue:"",companyId:"",deptId:""},checkedName:["标准编号","标准名称","英文名称","发布时间","启用时间","版本","机构","录入时间","修改时间"],tableHeader:[{label:"标准编号",prop:"S_NUM"},{label:"标准名称",prop:"S_NAME"},{label:"英文名称",prop:"S_ENGNAME"},{label:"发布时间",prop:"RELEASETIME"},{label:"启用时间",prop:"STARTETIME"},{label:"版本",prop:"VERSION"},{label:"机构",prop:"DEPTIDDesc"},{label:"录入时间",prop:"ENTERDATE"},{label:"修改时间",prop:"CHANGEDATE"}],companyId:"",deptId:"",selUser:[],standardList:[],search:!1,show:!1,down:!0,up:!1,isShow:!1,ismin:!0,statusshow1:!0,statusshow2:!0,searchList:{S_NUM:"",S_NAME:"",VERSION:"",DEPTID:"",RELEASETIME:"",STARTETIME:"",STATUS:""},resourceData:[],resourceDialogisShow:!1,resourceCheckedKey:[],resourceProps:{children:"subDepts",label:"simplename"},userData:[],page:{currentPage:1,pageSize:20,totalCount:0},dataInfo:{},selectData:[]}},methods:{rowClass:function(t){t.row,t.rowIndex;return"text-align:center"},getCompany:function(){var t=this,e=this.basic_url+"/api-user/depts/treeByType";this.$axios.get(e,{params:{type:"2"}}).then(function(e){console.log(e.data),t.selectData=e.data})},loadMore:function(){var t=this,e=sessionStorage.getItem("up2down");if(this.loadSign){if("down"==e){if(this.page.currentPage++,this.page.currentPage>Math.ceil(this.page.totalCount/this.page.pageSize))return this.page.currentPage=Math.ceil(this.page.totalCount/this.page.pageSize),!1}else if(this.page.currentPage--,this.page.currentPage<1)return this.page.currentPage=1,!1;this.loadSign=!1,console.log("this.page.currentPage",this.page.currentPage),setTimeout(function(){t.loadSign=!0},1e3),this.requestData()}},tableControle:function(t){this.checkedName=t},sizeChange:function(t){this.page.pageSize=t,this.requestData()},currentChange:function(t){this.page.currentPage=t,this.requestData()},resetbtn:function(){this.searchList={S_NUM:"",S_NAME:"",VERSION:"",DEPTID:"",RELEASETIME:"",STARTETIME:"",STATUS:""},this.requestData()},searchinfo:function(t){this.page.currentPage=1,this.page.pageSize=10,this.requestData()},reset:function(){this.dataInfo={VERSION:"1",STATUS:"活动",S_NUM:"",S_NAME:"",S_ENGNAME:"",RELEASETIME:"",STARTETIME:"",RELEASE_UNIT:"",DEPARTMENT:"",ENTERBY:"",ENTERDATE:"",CHANGEBY:"",CHANGEDATE:""},this.$refs.dataInfo},openAddMgr:function(){this.reset(),this.$refs.child.open(),this.$refs.child.visible()},modify:function(){0!=this.selUser.length?this.selUser.length>1?this.$message({message:"不可同时修改多个数据",type:"warning"}):(this.dataInfo=this.selUser[0],this.$refs.child.detail(this.selUser[0].ID)):this.$message({message:"请您选择要修改的数据",type:"warning"})},view:function(t){this.dataInfo=t,this.$refs.child.view()},modestsearch:function(){this.search=!this.search,this.down=!this.down,this.up=!this.up},deluserinfo:function(){var t=this,e=this.selUser;if(0!=e.length){for(var a=this.basic_url+"/api-apps/app/inspectionSta/deletes",s=e,i=[],o=0;o<s.length;o++)i.push(s[o].ID);var n={ids:i.toString(",")};this.$confirm("确定删除此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){e.value;t.$axios.delete(a,{params:n}).then(function(e){0==e.data.resp_code&&(t.$message({message:"删除成功",type:"success"}),t.requestData())}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要删除的数据",type:"warning"})},physicsDel:function(){var t=this,e=this.selUser;if(0!=e.length){for(var a=this.basic_url+"/api-apps/app/inspectionSta/deletes/physicsDel",s=e,i=[],o=0;o<s.length;o++)i.push(s[o].ID);var n={ids:i.toString(",")};this.$confirm("确定删除此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){e.value;t.$axios.delete(a,{params:n}).then(function(e){0==e.data.resp_code&&(t.$message({message:"删除成功",type:"success"}),t.requestData())}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要删除的数据",type:"warning"})},importData:function(){},exportData:function(){var t=this.basic_url+"/api-apps/app/inspectionSta/exportExc?access_token="+sessionStorage.getItem("access_token"),e=new XMLHttpRequest;e.open("POST",t,!0),e.responseType="blob",e.setRequestHeader("client_type","DESKTOP_WEB"),e.onload=function(){if(200==this.status){var t=this.response,e=document.createElement("a"),a=URL.createObjectURL(t);e.href=a,e.download="inspectionSta.xls",e.click()}},e.send()},Printing:function(){},reportdata:function(){this.reportData.app=this.productType,this.$refs.reportChild.visible()},judge:function(t){return"1"==t.STATUS?"活动":"不活动"},dateFormat:function(t,e){var a=t[e.property];return void 0==a?"":this.$moment(a).format("YYYY-MM-DD")},SelChange:function(t){this.selUser=t},requestData:function(){var t=this;this.loading=!0;var e={page:this.page.currentPage,limit:this.page.pageSize,S_NUM:this.searchList.S_NUM,S_NAME:this.searchList.S_NAME,VERSION:this.searchList.VERSION,S_ENGNAME:this.searchList.S_ENGNAME,DEPTID:this.searchList.DEPTID,RELEASETIME:this.searchList.RELEASETIME,STARTETIME:this.searchList.STARTETIME,STATUS:this.searchList.STATUS},a=this.basic_url+"/api-apps/app/inspectionSta";this.$axios.get(a,{params:e}).then(function(e){t.page.totalCount=e.data.count;var a=Math.ceil(t.page.totalCount/t.page.pageSize);t.page.currentPage>=a?t.loadSign=!1:t.loadSign=!0,t.standardList=e.data.data,t.loading=!1}).catch(function(t){})},handleNodeClick:function(t){},formatter:function(t,e){return t.enabled},childByValue:function(t){this.$refs.navsheader.showClick(t)}},mounted:function(){this.requestData(),this.getCompany()}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"headerbg"},[a("vheader"),t._v(" "),a("navs_header",{ref:"navsheader"})],1),t._v(" "),a("div",{staticClass:"contentbg"},[a("navs_left",{ref:"navleft",on:{childByValue:t.childByValue}}),t._v(" "),a("div",{staticClass:"wrapper wrapper-content"},[a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"fixed-table-toolbar clearfix"},[a("div",{staticClass:"bs-bars pull-left"},[a("div",{staticClass:"hidden-xs",attrs:{id:"roleTableToolbar",role:"group"}},[a("button",{staticClass:"btn btn-green",attrs:{type:"button",id:""},on:{click:t.openAddMgr}},[a("i",{staticClass:"icon-add"}),t._v("添加\n\t              \t\t\t ")]),t._v(" "),a("button",{staticClass:"btn btn-blue button-margin",attrs:{type:"button"},on:{click:t.modify}},[a("i",{staticClass:"icon-edit"}),t._v("修改\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-red button-margin",attrs:{type:"button"},on:{click:t.deluserinfo}},[a("i",{staticClass:"icon-trash"}),t._v("删除\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-red button-margin",attrs:{type:"button"},on:{click:t.physicsDel}},[a("i",{staticClass:"icon-trash"}),t._v("物理删除\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.importData}},[a("i",{staticClass:"icon-upload-cloud"}),t._v("导入\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.exportData}},[a("i",{staticClass:"icon-download-cloud"}),t._v("导出\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.Printing}},[a("i",{staticClass:"icon-print"}),t._v("打印\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.reportdata}},[a("i",{staticClass:"icon-file-text1"}),t._v("报表\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.modestsearch}},[a("i",{staticClass:"icon-search"}),t._v("高级查询\n\t\t\t\t\t    \t\t"),a("i",{directives:[{name:"show",rawName:"v-show",value:t.down,expression:"down"}],staticClass:"icon-arrow1-down"}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.up,expression:"up"}],staticClass:"icon-arrow1-up"})])])]),t._v(" "),a("div",{staticClass:"columns columns-right btn-group pull-right"},[t._m(0),t._v(" "),a("tableControle",{ref:"tableControle",attrs:{tableHeader:t.tableHeader,checkedName:t.checkedName},on:{tableControle:t.tableControle}})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.search,expression:"search"}]},[a("el-form",{attrs:{model:t.searchList,"label-width":"70px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"标准编号",prop:"S_NUM"}},[a("el-input",{model:{value:t.searchList.S_NUM,callback:function(e){t.$set(t.searchList,"S_NUM",e)},expression:"searchList.S_NUM"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"标准名称",prop:"S_NAME"}},[a("el-input",{model:{value:t.searchList.S_NAME,callback:function(e){t.$set(t.searchList,"S_NAME",e)},expression:"searchList.S_NAME"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"英文名称",prop:"S_ENGNAME"}},[a("el-input",{model:{value:t.searchList.S_ENGNAME,callback:function(e){t.$set(t.searchList,"S_ENGNAME",e)},expression:"searchList.S_ENGNAME"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"版本",prop:"VERSION","label-width":"45px"}},[a("el-input",{model:{value:t.searchList.VERSION,callback:function(e){t.$set(t.searchList,"VERSION",e)},expression:"searchList.VERSION"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"机构",prop:"DEPTID","label-width":"45px"}},[a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择"},model:{value:t.searchList.DEPTID,callback:function(e){t.$set(t.searchList,"DEPTID",e)},expression:"searchList.DEPTID"}},t._l(t.selectData,function(t,e){return a("el-option",{key:e,attrs:{value:t.id,label:t.fullname}})}))],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"发布时间",prop:"RELEASETIME"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"发布时间","value-format":"yyyy-MM-dd"},model:{value:t.searchList.RELEASETIME,callback:function(e){t.$set(t.searchList,"RELEASETIME",e)},expression:"searchList.RELEASETIME"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"启用时间",prop:"STARTETIME"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"启用时间","value-format":"yyyy-MM-dd"},model:{value:t.searchList.STARTETIME,callback:function(e){t.$set(t.searchList,"STARTETIME",e)},expression:"searchList.STARTETIME"}},[t._v(">\n\t\t\t\t\t\t\t\t\t\t")])],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{"margin-top":"2px"},attrs:{type:"primary",size:"small"},on:{click:t.searchinfo}},[t._v("搜索")]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"2px","margin-left":"2px"},attrs:{type:"primary",size:"small"},on:{click:t.resetbtn}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:24}},[a("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadMore,expression:"loadMore"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"header-cell-style":t.rowClass,data:t.standardList,border:"",stripe:"",height:t.fullHeight,"default-sort":{prop:"standardList",order:"descending"},"element-loading-text":"加载中…","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.9)"},on:{"selection-change":t.SelChange}},[this.checkedName.length>0?a("el-table-column",{attrs:{type:"selection",width:"55",fixed:"",align:"center"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("标准编号")?a("el-table-column",{attrs:{label:"标准编号",width:"120",sortable:"",prop:"S_NUM"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticClass:"blue",attrs:{title:"点击查看详情"},on:{click:function(a){t.view(e.row)}}},[t._v(t._s(e.row.S_NUM)+"\n\t\t\t\t\t\t\t\t\t\t")])]}}])}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("标准名称")?a("el-table-column",{attrs:{label:"标准名称",width:"220",sortable:"",prop:"S_NAME"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("英文名称")?a("el-table-column",{attrs:{label:"英文名称",width:"220",sortable:"",prop:"S_ENGNAME"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("发布时间")?a("el-table-column",{attrs:{label:"发布时间",width:"100",sortable:"",prop:"RELEASETIME",formatter:t.dateFormat}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("启用时间")?a("el-table-column",{attrs:{label:"启用时间",width:"100",sortable:"",prop:"STARTETIME",formatter:t.dateFormat}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("版本")?a("el-table-column",{attrs:{label:"版本",width:"70",sortable:"",prop:"VERSION",align:"right"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("机构")?a("el-table-column",{attrs:{label:"机构",width:"180",sortable:"",prop:"DEPTIDDesc"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("录入时间")?a("el-table-column",{attrs:{label:"录入时间",width:"100",prop:"ENTERDATE",sortable:"",formatter:t.dateFormat}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("修改时间")?a("el-table-column",{attrs:{label:"修改时间",width:"100",prop:"CHANGEDATE",sortable:"",formatter:t.dateFormat}}):t._e()],1),t._v(" "),this.checkedName.length>0?a("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":t.page.currentPage,"page-sizes":[10,20,30,40,100],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next",total:t.page.totalCount},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}):t._e()],1)],1)],1)]),t._v(" "),a("standardmask",{ref:"child",attrs:{dataInfo:t.dataInfo,page:t.page},on:{request:t.requestData}})],1),t._v(" "),a("reportmask",{ref:"reportChild",attrs:{reportData:t.reportData}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn btn-default btn-refresh",attrs:{id:"refresh",title:"刷新"}},[e("i",{staticClass:"icon-refresh"})])}]};var f=a("VU/8")(u,m,!1,function(t){a("k5xn")},"data-v-2d630dc0",null);e.default=f.exports},k5xn:function(t,e){},xBjX:function(t,e,a){"use strict";(function(t){var s=a("mvHQ"),i=a.n(s),o=a("QmSG"),n=a("bZCE"),r=a("zL8q");a.n(r);e.a={name:"masks",props:{dataInfo:{type:Object,default:function(){return{ID:"",S_NUM:"",S_NAME:"",S_ENGNAME:"",RELEASETIME:"",STARTETIME:"",VERSION:1,RELEASE_UNIT:"",DEPARTMENT:"",ENTERBY:"",ENTERDATE:"",CHANGEBY:"",CHANGEDATE:""}}},page:Object},components:{docTable:n.a},data:function(){return{loading:!1,editDataInfo:"",editDataInfoProp:"",docParm:{model:"new",recordid:1,userid:1,username:"",deptid:1,deptfullname:"",appname:"",appid:1},dialogTableVisible:!1,dialogFormVisible:!1,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},formLabelWidth:"120px",falg:!1,basic_url:o.a.dev_url,options:[{value:"1",label:"活动"},{value:"0",label:"不活动"}],value:"",selUser:[],edit:!0,show:!1,isok1:!0,isok2:!1,down:!0,up:!1,activeNames:["1","2","3"],dialogVisible:!1,leaddata:[{columnname:"author",description:"作者姓名",type:"字符串(string)",length:"6",retain:""},{columnname:"author",description:"作者姓名",type:"字符串(string)",length:"6",retain:""},{columnname:"author",description:"作者姓名",type:"字符串(string)",length:"6",retain:""},{columnname:"author",description:"作者姓名",type:"字符串(string)",length:"6",retain:""}],rules:{S_NUM:[{required:!1,trigger:"blur",validator:this.Validators.isCodeNum}],S_NAME:[{required:!0,trigger:"blur",validator:this.Validators.isNickname}],S_ENGNAME:[{required:!0,trigger:"blur",validator:this.Validators.isEnglish}],editDataInfoProp:[{required:!0,trigger:"blur",message:"必填"},{validator:this.Validators.isEnglish,trigger:"blur"}],RELEASE_UNIT:[{required:!0,trigger:"blur",message:"必填"},{validator:this.Validators.isSpecificKey,trigger:"blur"}]},resourceData:[],addtitle:!0,modifytitle:!1,viewtitle:!1,dept:!1,noedit:!1,views:!1,noviews:!0,modify:!1,hintshow:!1,statusshow1:!0,statusshow2:!1}},methods:{showLoading:function(){this.loading=!0},closeLoading:function(){this.loading=!1},editBox:function(t){this.dialogFormVisible=!0,this.editDataInfoProp=t,this.editDataInfo=this.dataInfo[t]},saveEditBox:function(){var t=this.editDataInfoProp;this.dataInfo[t]=this.editDataInfo,this.resetEditBox()},resetEditBox:function(){this.dialogFormVisible=!1,this.editDataInfo="",this.editDataInfoProp=""},SelChange:function(t){this.selUser=t},addfield:function(){this.dataInfo.attributes.push({columnname:"",description:"",type:"",length:"",retain:""})},delfield:function(t){var e=this.dataInfo.attributes.indexOf(t);-1!==e&&this.dataInfo.attributes.splice(e,1)},importdia:function(){this.dialogVisible=!0},getUser:function(t){var e=this;this.$axios.get(this.basic_url+"/api-user/users/currentMap",{}).then(function(a){if("new"!=t){e.dataInfo.DEPTID=a.data.deptId,e.dataInfo.CHANGEBY=a.data.id;var s=new Date;e.dataInfo.CHANGEDATE=e.$moment(s).format("YYYY-MM-DD");var o=i()(e.dataInfo);e.DATAINFO=JSON.parse(o)}else if("new"==t){e.dataInfo.DEPARTMENT="",e.dataInfo.DEPTID=a.data.deptId,e.dataInfo.ENTERBY=a.data.id;s=new Date;e.dataInfo.ENTERDATE=e.$moment(s).format("YYYY-MM-DD");var n=i()(e.dataInfo);e.DATAINFO=JSON.parse(n)}e.docParm.userid=a.data.id,e.docParm.username=a.data.username,e.docParm.deptid=a.data.deptId,e.docParm.deptfullname=a.data.deptName}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})},visible:function(){this.addtitle=!0,this.modifytitle=!1,this.viewtitle=!1,this.dept=!1,this.noedit=!1,this.views=!1,this.noviews=!0,this.modify=!1,this.hintshow=!1,this.statusshow1=!0,this.statusshow2=!1,this.getUser("new"),this.docParm={model:"new",appname:"检验检测项目_检验/检测标准",recordid:1,appid:13}},detail:function(){this.addtitle=!1,this.modifytitle=!0,this.viewtitle=!1,this.dept=!0,this.noedit=!1,this.views=!1,this.noviews=!0,this.hintshow=!1,this.modify=!0,this.statusshow1=!1,this.statusshow2=!0,this.getUser("edit");var t=this;setTimeout(function(){t.docParm.model="edit",t.docParm.appname="检验检测项目_检验/检测标准",t.docParm.recordid=t.dataInfo.ID,t.docParm.appid=13,t.$refs.docTable.getData()},100),this.show=!0},view:function(){this.addtitle=!1,this.modifytitle=!1,this.viewtitle=!0,this.dept=!0,this.noedit=!0,this.views=!0,this.noviews=!1,this.show=!0;var t=this;setTimeout(function(){t.docParm.model="view",t.docParm.appname="检验检测项目_检验/检测标准",t.docParm.recordid=t.dataInfo.ID,t.docParm.appid=13,t.$refs.docTable.getData()},100)},close:function(){this.show=!1,this.$emit("request")},open:function(){this.show=!0},toggle:function(t){1==this.isok1?this.maxDialog():this.rebackDialog()},maxDialog:function(e){this.isok1=!1,this.isok2=!0,t(".mask_div").width(document.body.clientWidth),t(".mask_div").height(document.body.clientHeight-60),t(".mask_div").css("top","60px")},rebackDialog:function(){this.isok1=!0,this.isok2=!1,t(".mask_div").css("width","80%"),t(".mask_div").css("height","80%"),t(".mask_div").css("top","100px")},modifyversion:function(){var t=this;this.$refs.dataInfo.validate(function(e){if(e){var a=i()(t.DATAINFO);if(i()(t.dataInfo)==a)return t.$message({message:"没有修改内容，不允许修订",type:"warning"}),!1;var s=t.basic_url+"/api-apps/app/inspectionSta/operate/upgraded";t.$axios.post(s,t.dataInfo).then(function(e){0==e.data.resp_code&&(t.$message({message:"保存成功",type:"success"}),t.show=!1,t.$emit("request"))}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}else t.$message({message:"未填写完整，请填写",type:"warning"})})},update:function(t){var e=this,a={id:this.dataInfo.ID};this.$axios.get(this.basic_url+"/api-apps/app/inspectionSta/operate/updateRelate",{params:a}).then(function(t){console.log(t.data.resp_code),0==t.data.resp_code&&e.$message({message:"更新成功",type:"success"})}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})},save:function(t){var e=this;this.$refs.dataInfo.validate(function(a){if(e.dataInfo.RELEASETIME=e.$moment(e.dataInfo.RELEASETIME).format("YYYY-MM-DD HH:mm:ss"),e.dataInfo.STARTETIME=e.$moment(e.dataInfo.STARTETIME).format("YYYY-MM-DD HH:mm:ss"),a||"docUpload"!=t||e.$message({message:"请先正确填写信息，再进行文档上传",type:"warning"}),a){e.dataInfo.STATUS="1"==e.dataInfo.STATUS||"活动"==e.dataInfo.STATUS?"1":"0";var s=e.basic_url+"/api-apps/app/inspectionSta/saveOrUpdate";e.$axios.post(s,e.dataInfo).then(function(a){0==a.data.resp_code?"docUpload"==t?(e.docParm.recordid=a.data.datas.id,e.docParm.model="edit",e.$refs.docTable.autoLoad(),e.dataInfo.ID=a.data.datas.id):(e.$message({message:"保存成功",type:"success"}),e.$emit("request"),e.$emit("reset"),e.visible()):(e.show=!0,1==a.data.resp_code&&(""!=a.data.resp_msg?e.$message({message:a.data.resp_msg,type:"warning"}):e.$message({message:"相同数据不可重复添加！",type:"warning"})))}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})}),e.falg=!0}else e.show=!0,e.$message({message:"未填写完整，请填写",type:"warning"}),e.falg=!1})},saveAndUpdate:function(t){this.save(t),this.falg&&(this.show=!1)},saveAndSubmit:function(t){this.save(t),this.$emit("reset"),this.show=!0},handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})}}}}).call(e,a("7t+N"))}});
//# sourceMappingURL=45.7d01cff10665047e50d4.js.map