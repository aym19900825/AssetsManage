webpackJsonp([48],{"3+88":function(e,t){},"4SlH":function(e,t,s){"use strict";(function(e){var a=s("mvHQ"),i=s.n(a),o=s("bOdI"),n=s.n(o),r=s("QmSG"),l=s("bZCE");t.a={name:"masks",components:{docTable:l.a},data:function(){var e;return{docParm:(e={model:"new",appname:"",recordid:1,userid:1,username:"",deptid:1,deptfullname:""},n()(e,"appname",""),n()(e,"appid",1),e),falg:!1,basic_url:r.a.dev_url,selUser:[],edit:!0,show:!1,isok1:!0,isok2:!1,down:!0,up:!1,activeNames:["1","2","3","4"],dialogVisible:!1,selectData:[],rules:{NUM:[{required:!1,trigger:"blur",validator:this.Validators.isCodeNum}],DECRIPTION:[{required:!0,message:"请填写",trigger:"blur"},{validator:this.Validators.isSpecificKey,trigger:"blur"}]},resourceData:[],addtitle:!0,modifytitle:!1,viewtitle:!1,dept:!1,noedit:!1,views:!1,noviews:!0,modify:!1,hintshow:!1,statusshow1:!0,statusshow2:!1,CATEGORY:{RAW_DATA_TEMPATE_DETAILList:[]},testing_filesForm:{inspectionList:[]}}},methods:{rowClass:function(e){e.row,e.rowIndex;return"text-align:center"},addfield:function(){this.CATEGORY.RAW_DATA_TEMPATE_DETAILList.push({ID:"",ROWNUMBER:"",COLNUMBER:"",DATALENGTH:"",DATATYPE:"",DESCRIPTION:"",FORMULA:"",GRIDTYPE:"",HASFORMULA:"",COLSPAN:"",ROWSPAN:"",ISSPAN:"",isEditing:!0})},deletemodule:function(e,t){t.splice(e,1)},SelChange:function(e){this.selUser=e},sizeChange:function(e){this.page.pageSize=e,this.requestData_doclinks()},currentChange:function(e){this.page.currentPage=e,this.requestData_doclinks()},searchinfo:function(e){this.page.currentPage=1,this.page.pageSize=10,this.requestData_doclinks()},rand:function(e,t){return Math.floor(Math.random()*(t-e))+e},getUser:function(e){var t=this;this.$axios.get(this.basic_url+"/api-user/users/currentMap",{}).then(function(s){t.CATEGORY.DEPARTMENT="",t.CATEGORY.DEPTID=s.data.deptId,t.CATEGORY.ENTERBY=s.data.id;var a=new Date;if(t.docParm.userid=s.data.id,t.docParm.username=s.data.username,t.docParm.deptid=s.data.deptId,t.docParm.deptfullname=s.data.deptName,t.CATEGORY.ENTERDATE=t.$moment(a).format("YYYY-MM-DD"),"new"!=e){var o=i()(t.CATEGORY);t.category=JSON.parse(o)}}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})},visible:function(){this.getUser("new"),this.docParm={model:"new",appname:"检验检测项目_原始数据模板",recordid:1,appid:17},this.addtitle=!0,this.modifytitle=!1,this.viewtitle=!1,this.dept=!1,this.noedit=!1,this.views=!1,this.noviews=!0,this.modify=!1,this.hintshow=!1,this.statusshow1=!0,this.statusshow2=!1},detail:function(e){var t=this;this.addtitle=!1,this.modifytitle=!0,this.viewtitle=!1,this.dept=!0,this.noedit=!1,this.views=!1,this.noviews=!0,this.hintshow=!1,this.modify=!0,this.statusshow1=!1,this.statusshow2=!0,this.getUser("edit");var s=this,a=this.basic_url+"/api-apps/app/rawDataTem/"+e;this.$axios.get(a,{}).then(function(e){console.log(23333),console.log(e.data);for(var s=0;s<e.data.RAW_DATA_TEMPATE_DETAILList.length;s++)e.data.RAW_DATA_TEMPATE_DETAILList[s].isEditing=!1;t.CATEGORY=e.data}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})}),setTimeout(function(){s.docParm.model="edit",s.docParm.appname="检验检测项目_原始数据模板",s.docParm.recordid=s.CATEGORY.ID,s.docParm.appid=17,s.$refs.docTable.getData()},100),this.show=!0},view:function(){this.addtitle=!1,this.modifytitle=!1,this.viewtitle=!0,this.dept=!0,this.noedit=!0,this.views=!0,this.noviews=!1,this.show=!0;var e=this;setTimeout(function(){e.docParm.model="view",e.docParm.appname="检验检测项目_原始数据模板",e.docParm.recordid=e.CATEGORY.ID,e.docParm.appid=17,e.$refs.docTable.getData()},100)},update:function(e){var t=this,s={ID:this.CATEGORY.ID};this.$axios.get(this.basic_url+"/api-apps/app/rawDataTem/operate/updateRelate",{params:s}).then(function(e){console.log(e),console.log(e.data.resp_code),0==e.data.resp_code&&t.$message({message:"更新成功",type:"success"})}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})},close:function(){this.show=!1,this.$emit("request")},open:function(){this.show=!0},toggle:function(e){1==this.isok1?this.maxDialog():this.rebackDialog()},maxDialog:function(t){this.isok1=!1,this.isok2=!0,e(".mask_div").width(document.body.clientWidth),e(".mask_div").height(document.body.clientHeight-60),e(".mask_div").css("top","60px")},rebackDialog:function(){this.isok1=!0,this.isok2=!1,e(".mask_div").css("width","80%"),e(".mask_div").css("height","80%"),e(".mask_div").css("top","100px")},save:function(e){var t=this;this.$refs.CATEGORY.validate(function(s){if(s||"docUpload"!=e||t.$message({message:"请先正确填写信息，再进行文档上传",type:"warning"}),s){t.CATEGORY.STATUS="1"==t.CATEGORY.STATUS||"活动"==t.CATEGORY.STATUS?"1":"0";var a=t.basic_url+"/api-apps/app/rawDataTem/saveOrUpdate";t.$axios.post(a,t.CATEGORY).then(function(s){0==s.data.resp_code?(t.$message({message:"保存成功",type:"success"}),"docUpload"==e?(t.docParm.recordid=s.data.datas.id,t.docParm.model="edit",t.$refs.docTable.autoLoad(),t.CATEGORY.ID=s.data.datas.id):(t.$emit("request"),t.$emit("reset"),t.visible())):(t.show=!0,1==s.data.resp_code&&(""!=s.data.resp_msg?t.$message({message:s.data.resp_msg,type:"warning"}):t.$message({message:"相同数据不可重复添加！",type:"warning"})))}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})}),t.falg=!0}else t.show=!0,t.$message({message:"未填写完整，请填写",type:"warning"}),t.falg=!1})},saveAndUpdate:function(e){this.save(e),this.falg&&(this.show=!1)},saveAndSubmit:function(e){this.save(e),this.show=!0},iconOperation:function(e,t,s,a){"iconOperation"===t.property&&(e.isEditing=!e.isEditing)},addfield_doclinks:function(){for(var e=this,t=!1,s=0;s<this.testing_filesForm.inspectionList.length;s++){if(0!=this.testing_filesForm.inspectionList[s].isEditing){t=!0;break}t=!1}0==t?this.$axios.get(this.basic_url+"/api-user/users/currentMap",{}).then(function(t){e.currentUser=t.data.nickname;var s=new Date;e.currentDate=e.$moment(s).format("YYYY-MM-DD  HH:mm:ss");var a={DOCLINKS:"FLS"+e.$moment(s).format("YYYYMMDDHHmmss"),DESCRIPTION:"",DOC_SIZE:"",ROUTE:"",ENTERBY:e.currentUser,ENTERDATE:e.currentDate,isEditing:!0};e.testing_filesForm.inspectionList.unshift(a)}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})}):this.$message.warning("请先保存当前编辑项")},saveRow:function(e){var t=this;this.$refs.testing_filesForm.validate(function(e){if(!e)return!1;var s=t.basic_url+"/api-apps/app/doclinks/saveOrUpdate";t.$axios.post(s,t.submitData).then(function(e){0==e.data.resp_code&&(t.$message({message:"保存成功",type:"success"}),t.requestData_doclinks())}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})})},deleteRow:function(e){var t=this;this.$confirm("确定删除此文件文件吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(s){s.value;var a=t.basic_url+"/api-apps/app/doclinks/"+e.ID;t.$axios.delete(a,{}).then(function(e){0==e.data.resp_code&&(t.$message({message:"删除成功",type:"success"}),t.requestData_doclinks())}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})},loadMore:function(){var e=this;if(this.loadSign){if(this.loadSign=!1,this.page.currentPage++,this.page.currentPage>Math.ceil(this.page.totalCount/this.page.pageSize))return;setTimeout(function(){e.loadSign=!0},1e3),this.requestData_doclinks()}},dateFormat:function(e,t){var s=e[t.property];return void 0==s?"":this.$moment(s).format("YYYY-MM-DD")},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})}}}}).call(t,s("7t+N"))},KAfb:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("QmSG"),i=s("GkRW"),o=s("h7vj"),n=s("hbvp"),r=s("4SlH"),l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.show?s("div",{staticClass:"mask"}):e._e(),e._v(" "),e.show?s("div",{staticClass:"mask_divbg"},[s("div",{staticClass:"mask_div"},[s("div",{staticClass:"mask_title_div clearfix"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.addtitle,expression:"addtitle"}],staticClass:"mask_title"},[e._v("添加原始数据模板")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.modifytitle,expression:"modifytitle"}],staticClass:"mask_title"},[e._v("修改原始数据模板")]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.viewtitle,expression:"viewtitle"}],staticClass:"mask_title"},[e._v("查看原始数据模板")]),e._v(" "),s("div",{staticClass:"mask_anniu"},[s("span",{staticClass:"mask_span mask_max",on:{click:e.toggle}},[s("i",{class:{"icon-maximization":e.isok1,"icon-restore":e.isok2}})]),e._v(" "),s("span",{staticClass:"mask_span",on:{click:e.close}},[s("i",{staticClass:"icon-close1"})])])]),e._v(" "),s("div",{staticClass:"mask_content"},[s("el-form",{ref:"CATEGORY",staticClass:"demo-adduserForm",attrs:{model:e.CATEGORY,"inline-message":"",rules:e.rules,"label-width":"100px"}},[s("div",{staticClass:"accordion",attrs:{id:"information"}},[s("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[s("el-collapse-item",{attrs:{title:"原始数据模板",name:"1"}},[s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"编码",prop:"NUM"}},[s("el-input",{attrs:{disabled:e.noedit},model:{value:e.CATEGORY.NUM,callback:function(t){e.$set(e.CATEGORY,"NUM",t)},expression:"CATEGORY.NUM"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{label:"模板描述",prop:"DECRIPTION"}},[s("el-input",{attrs:{disabled:e.noedit},model:{value:e.CATEGORY.DECRIPTION,callback:function(t){e.$set(e.CATEGORY,"DECRIPTION",t)},expression:"CATEGORY.DECRIPTION"}})],1)],1)],1),e._v(" "),s("el-row",[e.dept?s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"机构",prop:"DEPTIDDesc"}},[s("el-input",{attrs:{disabled:e.edit},model:{value:e.CATEGORY.DEPTIDDesc,callback:function(t){e.$set(e.CATEGORY,"DEPTIDDesc",t)},expression:"CATEGORY.DEPTIDDesc"}})],1)],1):e._e()],1)],1),e._v(" "),s("el-collapse-item",{attrs:{title:"原始数据模板单元信息",name:"2"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.noviews,expression:"noviews"}],staticClass:"table-func"},[s("el-button",{attrs:{type:"success",size:"mini",round:""},on:{click:e.addfield}},[s("i",{staticClass:"icon-add"}),e._v(" "),s("font",[e._v("新建行")])],1)],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":e.rowClass,fit:!0,data:e.CATEGORY.RAW_DATA_TEMPATE_DETAILList,"row-key":"ID",border:"",stripe:"","max-height":"260","highlight-current-row":"highlight-current-row","default-sort":{prop:"CATEGORY.RAW_DATA_TEMPATE_DETAILList",order:"descending"}},on:{"cell-click":e.iconOperation}},[s("el-table-column",{directives:[{name:"show",rawName:"v-show",value:!e.viewtitle,expression:"!viewtitle"}],attrs:{prop:"iconOperation",fixed:"",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(e){return[e.row.isEditing?s("i",{staticClass:"el-icon-check"}):s("i",{staticClass:"el-icon-edit"})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"序号",sortable:"",width:"80px","label-width":"150px",type:"index"}}),e._v(" "),s("el-table-column",{attrs:{prop:"ROWNUMBER",label:"列号",sortable:"",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEditing?s("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:t.row.ROWNUMBER,callback:function(s){e.$set(t.row,"ROWNUMBER",s)},expression:"scope.row.ROWNUMBER"}}):s("span",[e._v(e._s(t.row.ROWNUMBER))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"COLNUMBER",label:"行号",sortable:"",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEditing?s("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:t.row.COLNUMBER,callback:function(s){e.$set(t.row,"COLNUMBER",s)},expression:"scope.row.COLNUMBER"}}):s("span",[e._v(e._s(t.row.COLNUMBER))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"DATALENGTH",label:"数据长度",sortable:"",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEditing?s("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:t.row.DATALENGTH,callback:function(s){e.$set(t.row,"DATALENGTH",s)},expression:"scope.row.DATALENGTH"}}):s("span",[e._v(e._s(t.row.DATALENGTH))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"DATATYPE",label:"值类型",sortable:"",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEditing?s("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:t.row.DATATYPE,callback:function(s){e.$set(t.row,"DATATYPE",s)},expression:"scope.row.DATATYPE"}}):s("span",[e._v(e._s(t.row.DATATYPE))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"DESCRIPTION",label:"单元格描述",sortable:"",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEditing?s("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:t.row.DESCRIPTION,callback:function(s){e.$set(t.row,"DESCRIPTION",s)},expression:"scope.row.DESCRIPTION"}}):s("span",[e._v(e._s(t.row.DESCRIPTION))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"FORMULA",label:"计算公式",sortable:"",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEditing?s("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:t.row.FORMULA,callback:function(s){e.$set(t.row,"FORMULA",s)},expression:"scope.row.FORMULA"}}):s("span",[e._v(e._s(t.row.FORMULA))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"GRIDTYPE",label:"单元格类型",sortable:"",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEditing?s("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:t.row.GRIDTYPE,callback:function(s){e.$set(t.row,"GRIDTYPE",s)},expression:"scope.row.GRIDTYPE"}}):s("span",[e._v(e._s(t.row.GRIDTYPE))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"HASFORMULA",label:"是否使用计算公式",sortable:"",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEditing?s("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:t.row.HASFORMULA,callback:function(s){e.$set(t.row,"HASFORMULA",s)},expression:"scope.row.HASFORMULA"}}):s("span",[e._v(e._s(t.row.HASFORMULA))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"COLSPAN",label:"合并列",sortable:"",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEditing?s("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:t.row.COLSPAN,callback:function(s){e.$set(t.row,"COLSPAN",s)},expression:"scope.row.COLSPAN"}}):s("span",[e._v(e._s(t.row.COLSPAN))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"ROWSPAN",label:"合并行",sortable:"",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEditing?s("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:t.row.ROWSPAN,callback:function(s){e.$set(t.row,"ROWSPAN",s)},expression:"scope.row.ROWSPAN"}}):s("span",[e._v(e._s(t.row.ROWSPAN))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"ISSPAN",label:"是否合并",sortable:"",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEditing?s("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:t.row.ISSPAN,callback:function(s){e.$set(t.row,"ISSPAN",s)},expression:"scope.row.ISSPAN"}}):s("span",[e._v(e._s(t.row.ISSPAN))])]}}])}),e._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.viewtitle,expression:"!viewtitle"}],attrs:{type:"text",size:"small"},on:{click:function(s){e.deletemodule(t.$index,e.CATEGORY.RAW_DATA_TEMPATE_DETAILList)}}},[s("i",{staticClass:"icon-trash red"})])]}}])})],1)],1),e._v(" "),s("el-collapse-item",{attrs:{title:"文件",name:"3"}},[s("doc-table",{ref:"docTable",attrs:{docParm:e.docParm}})],1),e._v(" "),s("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.views,expression:"views"}],attrs:{title:"其它",name:"4"}},[s("el-row",[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"录入人",prop:"ENTERBYDesc"}},[s("el-input",{attrs:{disabled:e.edit},model:{value:e.CATEGORY.ENTERBYDesc,callback:function(t){e.$set(e.CATEGORY,"ENTERBYDesc",t)},expression:"CATEGORY.ENTERBYDesc"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"录入时间",prop:"ENTERDATE"}},[s("el-input",{attrs:{disabled:e.edit},model:{value:e.CATEGORY.ENTERDATE,callback:function(t){e.$set(e.CATEGORY,"ENTERDATE",t)},expression:"CATEGORY.ENTERDATE"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"修改人",prop:"CHANGEBYDesc"}},[s("el-input",{attrs:{placeholder:"当前修改人",disabled:e.edit},model:{value:e.CATEGORY.CHANGEBYDesc,callback:function(t){e.$set(e.CATEGORY,"CHANGEBYDesc",t)},expression:"CATEGORY.CHANGEBYDesc"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"修改时间",prop:"CHANGEDATE"}},[s("el-input",{attrs:{placeholder:"当前修改时间",disabled:e.edit},model:{value:e.CATEGORY.CHANGEDATE,callback:function(t){e.$set(e.CATEGORY,"CHANGEDATE",t)},expression:"CATEGORY.CHANGEDATE"}})],1)],1)],1)],1)],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.noviews,expression:"noviews"}],staticClass:"el-dialog__footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveAndUpdate("CATEGORY")}}},[e._v("保存")]),e._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.addtitle,expression:"addtitle"}],attrs:{type:"success"},on:{click:function(t){e.saveAndSubmit("CATEGORY")}}},[e._v("保存并继续")]),e._v(" "),s("el-button",{on:{click:e.close}},[e._v("取消")])],1)])],1)])]):e._e()])},staticRenderFns:[]};var c=function(e){s("3+88")},d=s("VU/8")(r.a,l,!1,c,"data-v-1c1f6816",null).exports,p=s("VEhc"),u={name:"customer_management",components:{vheader:i.a,navs_left:n.a,navs_header:o.a,categorymask:d,tableControle:p.a},data:function(){return{loading:!1,basic_url:a.a.dev_url,loadSign:!0,commentArr:{},value:"",options:[{value:"1",label:"活动"},{value:"0",label:"不活动"}],searchData:{page:1,limit:20,nickname:"",enabled:"",searchKey:"",searchValue:"",companyId:"",deptId:""},checkedName:["编码","模板描述","录入时间","机构"],tableHeader:[{label:"编码",prop:"NUM"},{label:"模板描述",prop:"DECRIPTION"},{label:"录入时间",prop:"ENTERDATE"},{label:"机构",prop:"DEPTIDDesc"}],selUser:[],categoryList:[],search:!1,show:!1,down:!0,up:!1,isShow:!1,ismin:!0,fullHeight:document.documentElement.clientHeight-210+"px",searchList:{DECRIPTION:"",DEPTID:""},resourceData:[],resourceDialogisShow:!1,resourceCheckedKey:[],resourceProps:{categorymaskren:"subDepts",label:"simplename"},page:{currentPage:1,pageSize:20,totalCount:0},CATEGORY:{},selectData:[]}},methods:{rowClass:function(e){e.row,e.rowIndex;return"text-align:center"},getCompany:function(){var e=this,t=this.basic_url+"/api-user/depts/treeByType";this.$axios.get(t,{params:{type:"2"}}).then(function(t){e.selectData=t.data})},loadMore:function(){var e=this,t=sessionStorage.getItem("up2down");if(this.loadSign){if("down"==t){if(this.page.currentPage++,this.page.currentPage>Math.ceil(this.page.totalCount/this.page.pageSize))return this.page.currentPage=Math.ceil(this.page.totalCount/this.page.pageSize),!1}else if(this.page.currentPage--,this.page.currentPage<1)return this.page.currentPage=1,!1;this.loadSign=!1,console.log("this.page.currentPage",this.page.currentPage),setTimeout(function(){e.loadSign=!0},1e3),this.requestData()}},tableControle:function(e){this.checkedName=e},sizeChange:function(e){this.page.pageSize=e,this.requestData()},currentChange:function(e){this.page.currentPage=e,this.requestData()},resetbtn:function(){this.searchList={DECRIPTION:"",DEPTID:""},this.requestData()},searchinfo:function(e){this.page.currentPage=1,this.page.pageSize=10,this.requestData()},reset:function(){this.CATEGORY={ID:"",NUM:"",TYPE:"",STATUS:"活动",VERSION:"1",DEPARTMENT:"",ENTERBY:"",ENTERDATE:"",CHANGEBY:"",CHANGEDATE:""},void 0!==this.$refs.CATEGORY&&this.$refs.CATEGORY.resetFields()},openAddMgr:function(){this.reset(),this.$refs.categorymask.open(),this.$refs.categorymask.visible()},modify:function(){0!=this.selUser.length?this.selUser.length>1?this.$message({message:"不可同时修改多个数据",type:"warning"}):(this.CATEGORY=this.selUser[0],this.$refs.categorymask.detail(this.selUser[0].ID)):this.$message({message:"请您选择要修改的数据",type:"warning"})},view:function(e){this.CATEGORY=e,this.$refs.categorymask.view()},modestsearch:function(){this.search=!this.search,this.down=!this.down,this.up=!this.up},deluserinfo:function(){var e=this,t=this.selUser;if(0!=t.length){for(var s=this.basic_url+"/api-apps/app/rawDataTem/deletes",a=t,i=[],o=0;o<a.length;o++)i.push(a[o].ID);var n={ids:i.toString(",")};this.$confirm("确定删除此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){t.value;e.$axios.delete(s,{params:n}).then(function(t){0==t.data.resp_code&&(e.$message({message:"删除成功",type:"success"}),e.requestData())}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要删除的数据",type:"warning"})},importData:function(){},exportData:function(){var e=this.basic_url+"/api-apps/app/rawDataTem/exportExc?access_token="+sessionStorage.getItem("access_token"),t=new XMLHttpRequest;t.open("POST",e,!0),t.responseType="blob",t.setRequestHeader("client_type","DESKTOP_WEB"),t.onload=function(){if(200==this.status){var e=this.response,t=document.createElement("a"),s=URL.createObjectURL(e);t.href=s,t.download="rawDataTem.xls",t.click()}},t.send()},Printing:function(){},judge:function(e){e.STATUS="1"==e.STATUS?"活动":"不活动"},dateFormat:function(e,t){var s=e[t.property];return void 0==s?"":this.$moment(s).format("YYYY-MM-DD")},SelChange:function(e){this.selUser=e},requestData:function(){var e=this;this.loading=!0;var t={page:this.page.currentPage,limit:this.page.pageSize,DECRIPTION:this.searchList.DECRIPTION,DEPTID:this.searchList.DEPTID};console.log(t);var s=this.basic_url+"/api-apps/app/rawDataTem";this.$axios.get(s,{params:t}).then(function(t){e.page.totalCount=t.data.count;var s=Math.ceil(e.page.totalCount/e.page.pageSize);e.page.currentPage>=s?e.loadSign=!1:e.loadSign=!0,e.categoryList=t.data.data,e.loading=!1}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})},handleNodeClick:function(e){},formatter:function(e,t){return e.enabled}},mounted:function(){this.requestData(),this.getCompany()}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"headerbg"},[s("vheader"),e._v(" "),s("navs_header",{ref:"navsheader"})],1),e._v(" "),s("div",{staticClass:"contentbg"},[s("navs_left"),e._v(" "),s("div",{staticClass:"wrapper wrapper-content"},[s("div",{staticClass:"ibox-content"},[s("div",{staticClass:"fixed-table-toolbar clearfix"},[s("div",{staticClass:"bs-bars pull-left"},[s("div",{staticClass:"hidden-xs",attrs:{id:"roleTableToolbar",role:"group"}},[s("button",{staticClass:"btn btn-green",attrs:{type:"button",id:""},on:{click:e.openAddMgr}},[s("i",{staticClass:"icon-add"}),e._v("添加\n\t              \t\t\t ")]),e._v(" "),s("button",{staticClass:"btn btn-blue button-margin",attrs:{type:"button"},on:{click:e.modify}},[s("i",{staticClass:"icon-edit"}),e._v("修改\n\t\t\t\t\t\t\t")]),e._v(" "),s("button",{staticClass:"btn btn-red button-margin",attrs:{type:"button"},on:{click:e.deluserinfo}},[s("i",{staticClass:"icon-trash"}),e._v("删除\n\t\t\t\t\t\t\t")]),e._v(" "),s("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:e.importData}},[s("i",{staticClass:"icon-upload-cloud"}),e._v("导入\n\t\t\t\t\t\t\t")]),e._v(" "),s("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:e.exportData}},[s("i",{staticClass:"icon-download-cloud"}),e._v("导出\n\t\t\t\t\t\t\t")]),e._v(" "),s("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:e.Printing}},[s("i",{staticClass:"icon-print"}),e._v("打印\n\t\t\t\t\t\t\t")]),e._v(" "),s("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:e.modestsearch}},[s("i",{staticClass:"icon-search"}),e._v("高级查询\n\t\t\t\t\t    \t\t"),s("i",{directives:[{name:"show",rawName:"v-show",value:e.down,expression:"down"}],staticClass:"icon-arrow1-down"}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.up,expression:"up"}],staticClass:"icon-arrow1-up"})])])]),e._v(" "),s("div",{staticClass:"columns columns-right btn-group pull-right"},[e._m(0),e._v(" "),s("tableControle",{ref:"tableControle",attrs:{tableHeader:e.tableHeader,checkedName:e.checkedName},on:{tableControle:e.tableControle}})],1)]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.search,expression:"search"}]},[s("el-form",{attrs:{model:e.searchList,"label-width":"70px"}},[s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:"模板描述",prop:"DECRIPTION"}},[s("el-input",{model:{value:e.searchList.DECRIPTION,callback:function(t){e.$set(e.searchList,"DECRIPTION",t)},expression:"searchList.DECRIPTION"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:5}},[s("el-form-item",{attrs:{label:"机构",prop:"DEPTID"}},[s("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择"},model:{value:e.searchList.DEPTID,callback:function(t){e.$set(e.searchList,"DEPTID",t)},expression:"searchList.DEPTID"}},e._l(e.selectData,function(e,t){return s("el-option",{key:t,attrs:{value:e.id,label:e.fullname}})}))],1)],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{staticStyle:{"margin-top":"2px"},attrs:{type:"primary",size:"small"},on:{click:e.searchinfo}},[e._v("搜索")]),e._v(" "),s("el-button",{staticStyle:{"margin-top":"2px","margin-left":"2px"},attrs:{type:"primary",size:"small"},on:{click:e.resetbtn}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:0}},[s("el-col",{attrs:{span:24}},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"}],staticStyle:{width:"100%"},attrs:{"header-cell-style":e.rowClass,data:e.categoryList,border:"",stripe:"",height:e.fullHeight,"element-loading-text":"加载中…","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.9)","default-sort":{prop:"categoryList",order:"descending"}},on:{"selection-change":e.SelChange}},[this.checkedName.length>0?s("el-table-column",{attrs:{type:"selection",fixed:"",width:"55",align:"center"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("编码")?s("el-table-column",{attrs:{label:"编码",width:"155",sortable:"",prop:"NUM"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"blue",attrs:{title:"点击查看详情"},on:{click:function(s){e.view(t.row)}}},[e._v(e._s(t.row.NUM)+"\n\t\t\t\t\t\t\t\t\t\t")])]}}])}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("模板描述")?s("el-table-column",{attrs:{label:"模板描述",sortable:"",prop:"DECRIPTION"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("录入时间")?s("el-table-column",{attrs:{label:"录入时间",width:"120",prop:"ENTERDATE",sortable:"",formatter:e.dateFormat}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("机构")?s("el-table-column",{attrs:{label:"机构",width:"185",sortable:"",prop:"DEPTIDDesc"}}):e._e()],1),e._v(" "),this.checkedName.length>0?s("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":e.page.currentPage,"page-sizes":[10,20,30,40,100],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.totalCount},on:{"size-change":e.sizeChange,"current-change":e.currentChange}}):e._e()],1)],1)],1)]),e._v(" "),s("categorymask",{ref:"categorymask",attrs:{CATEGORY:e.CATEGORY,page:e.page},on:{request:e.requestData,reset:e.reset}})],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"btn btn-default btn-refresh",attrs:{id:"refresh",title:"刷新"}},[t("i",{staticClass:"icon-refresh"})])}]};var m=s("VU/8")(u,h,!1,function(e){s("l3VK")},"data-v-28e48cc0",null);t.default=m.exports},l3VK:function(e,t){}});
//# sourceMappingURL=48.470be066c1167c57cac9.js.map