webpackJsonp([56],{"6UDw":function(t,e,a){"use strict";(function(t){var s=a("QmSG"),i=a("GkRW"),l=a("hbvp"),n=a("h7vj"),r=a("VEhc"),o=a("v37i"),c=a("jk2w");e.a={name:"samples",components:{vheader:i.a,navs_left:l.a,navs_header:n.a,tableControle:r.a,samplesmask:o.a,reportmask:c.a},data:function(){return{reportData:{},loading:!1,basic_url:s.a.dev_url,isShow:!1,ismin:!0,loadSign:!0,commentArr:{},checkedName:["样品编号","样品名称","样品类别","委托单位","生产单位","型号","数量","收样人","收样日期","接样人","接样日期","状态","信息状态"],tableHeader:[{label:"样品编号",prop:"ITEMNUM"},{label:"样品名称",prop:"DESCRIPTION"},{label:"样品类别",prop:"TYPE"},{label:"委托单位",prop:"P_NAME"},{label:"生产单位",prop:"P_NAME"},{label:"型号",prop:"MODEL"},{label:"数量",prop:"QUATITY"},{label:"收样人",prop:"ACCEPT_PERSON"},{label:"收样日期",prop:"ACCEPT_DATE"},{label:"状态",prop:"STATEDesc"},{label:"信息状态",prop:"STATUS"}],companyId:"",deptId:"",selMenu:[],samplesList:[],fullHeight:document.documentElement.clientHeight-210+"px",search:!1,show:!1,down:!0,up:!1,searchList:{ITEMNUM:"",V_NAME:"",DESCRIPTION:"",ACCEPT_PERSON:"",TYPE:"",ACCEPT_DATE:""},resourceData:[],resourceDialogisShow:!1,resourceCheckedKey:[],resourceProps:{children:"subDepts",label:"fullname"},treeData:[],page:{currentPage:1,pageSize:20,totalCount:0},samplesForm:{}}},methods:{rowClass:function(t){t.row,t.rowIndex;return"text-align:center"},renderContent:function(t,e){e.node;var a=e.data;e.store;return t("span",[t("i",{class:a.iconClass}),t("span",[a.lable])])},nodeClick:function(t){"icon-file-text"!=t.iconClass&&("icon-file-normal"==t.iconClass?t.iconClass="icon-file-open":t.iconClass="icon-file-normal"),this.handleNodeClick()},expandClick:function(t){"icon-file-text"!=t.iconClass&&("icon-file-normal"==t.iconClass?t.iconClass="icon-file-open":t.iconClass="icon-file-normal"),t.isFolder=!t.isFolder},loadMore:function(){var t=this,e=sessionStorage.getItem("up2down");if(this.loadSign){if("down"==e){if(this.page.currentPage++,this.page.currentPage>Math.ceil(this.page.totalCount/this.page.pageSize))return this.page.currentPage=Math.ceil(this.page.totalCount/this.page.pageSize),!1}else if(this.page.currentPage--,this.page.currentPage<1)return this.page.currentPage=1,!1;this.loadSign=!1,setTimeout(function(){t.loadSign=!0},1e3),this.requestData()}},tableControle:function(t){this.checkedName=t},sizeChange:function(t){this.page.pageSize=t,this.requestData()},currentChange:function(t){this.page.currentPage=t,this.requestData()},searchinfo:function(t){this.page.currentPage=1,this.page.pageSize=20,this.requestData()},resetbtn:function(){this.searchList={ITEMNUM:"",V_NAME:"",DESCRIPTION:"",ACCEPT_PERSON:"",TYPE:"",ACCEPT_DATE:""},this.requestData()},openAddMgr:function(){this.$refs.child.visible()},modify:function(){0!=this.selMenu.length?this.selMenu.length>1?this.$message({message:"不可同时修改多条数据",type:"warning"}):this.$refs.child.detail(this.selMenu[0].ID):this.$message({message:"请您选择要修改的数据",type:"warning"})},view:function(t){this.$refs.child.view(t)},modestsearch:function(){this.search=!this.search,this.down=!this.down,this.up=!this.up},reportdata:function(){this.reportData.app=this.productType,this.$refs.reportChild.visible()},deluserinfo:function(){var t=this,e=this.selMenu;if(0!=e.length){for(var a=this.basic_url+"/api-apps/app/item/deletes",s=e,i=[],l=0;l<s.length;l++)i.push(s[l].ID);var n={ids:i.toString(",")};this.$confirm("确定删除此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){e.value;t.$axios.delete(a,{params:n}).then(function(e){0==e.data.resp_code&&(t.$message({message:"删除成功",type:"success"}),t.requestData())}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要删除的数据",type:"warning"})},physicsDel:function(){var t=this,e=this.selMenu;if(0!=e.length){for(var a=this.basic_url+"/api-apps/app/item/deletes/physicsDel",s=e,i=[],l=0;l<s.length;l++)i.push(s[l].ID);var n={ids:i.toString(",")};this.$confirm("确定删除此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){e.value;t.$axios.delete(a,{params:n}).then(function(e){0==e.data.resp_code&&(t.$message({message:"删除成功",type:"success"}),t.requestData())}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要删除的数据",type:"warning"})},importData:function(){},exportData:function(){},Printing:function(){},dateFormat:function(t,e){var a=t[e.property];return void 0==a?"":this.$moment(a).format("YYYY-MM-DD")},SelChange:function(t){this.selMenu=t},requestData:function(t){var e=this;this.loading=!0;var a={page:this.page.currentPage,limit:this.page.pageSize,ITEMNUM:this.searchList.ITEMNUM,V_NAME:this.searchList.V_NAME,DESCRIPTION:this.searchList.DESCRIPTION,ACCEPT_PERSON:this.searchList.ACCEPT_PERSON,TYPE:this.searchList.TYPE,ACCEPT_DATE:this.searchList.ACCEPT_DATE},s=this.basic_url+"/api-apps/app/item";this.$axios.get(s,{params:a}).then(function(t){e.page.totalCount=t.data.count;var a=Math.ceil(e.page.totalCount/e.page.pageSize);e.page.currentPage>=a?e.loadSign=!1:e.loadSign=!0,e.samplesList=t.data.data,e.loading=!1}).catch(function(t){e.$message({message:"网络错误，请重试1",type:"error"})})},formatter:function(t,e){return t.enabled},getKey:function(){var t=this,e=this.basic_url+"/api-apps/appCustom/tree";this.$axios.get(e,{}).then(function(e){t.resourceData=e.data.datas,t.treeData=t.transformTree(t.resourceData),console.log(t.treeData)})},transformTree:function(e){for(var a=0;a<e.length;a++)e[a].name=e[a].fullname||e[a].TYPE||e[a].pName||e[a].PRO_NAME,e[a].lable=e[a].fullname||e[a].TYPE||e[a].pName||e[a].PRO_NAME,t.isArray(e[a].children)?e[a].iconClass="icon-file-normal":e[a].iconClass="icon-file-text",t.isArray(e[a].children)&&(e[a].subDepts=this.transformTree(e[a].children));return e},handleNodeClick:function(t){"1"==t.type?(this.companyId=t.id,this.deptId=""):(this.deptId=t.id,this.companyId=""),this.requestData()},min3max:function(){t(".lefttree").hasClass("el-col-5")?(t(".lefttree").removeClass("el-col-5"),t(".lefttree").addClass("el-col-1"),t(".leftcont").removeClass("el-col-19"),t(".leftcont").addClass("el-col-23"),t(".icon-doubleok").removeClass("icon-double-angle-left"),t(".icon-doubleok").addClass("icon-double-angle-right")):(t(".lefttree").removeClass("el-col-1"),t(".lefttree").addClass("el-col-5"),t(".leftcont").removeClass("el-col-23"),t(".leftcont").addClass("el-col-19"),t(".icon-doubleok").removeClass("icon-double-angle-right"),t(".icon-doubleok").addClass("icon-double-angle-left")),this.ismin=!this.ismin},childByValue:function(t){this.$refs.navsheader.showClick(t)}},mounted:function(){this.requestData(),this.getKey()}}}).call(e,a("7t+N"))},OU6K:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("6UDw"),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"headerbg"},[a("vheader"),t._v(" "),a("navs_header",{ref:"navsheader"})],1),t._v(" "),a("div",{staticClass:"contentbg"},[a("navs_left",{ref:"navleft",on:{childByValue:t.childByValue}}),t._v(" "),a("div",{staticClass:"wrapper wrapper-content"},[a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"fixed-table-toolbar clearfix"},[a("div",{staticClass:"bs-bars pull-left"},[a("div",{staticClass:"hidden-xs",attrs:{id:"roleTableToolbar",role:"group"}},[a("button",{staticClass:"btn btn-green",attrs:{type:"button",id:""},on:{click:t.openAddMgr}},[a("i",{staticClass:"icon-add"}),t._v("添加\n                      \t\t\t ")]),t._v(" "),a("button",{staticClass:"btn btn-blue button-margin",attrs:{type:"button"},on:{click:t.modify}},[a("i",{staticClass:"icon-edit"}),t._v("修改\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-red button-margin",attrs:{type:"button"},on:{click:t.deluserinfo}},[a("i",{staticClass:"icon-trash"}),t._v("删除\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-red button-margin",attrs:{type:"button"},on:{click:t.physicsDel}},[a("i",{staticClass:"icon-trash"}),t._v("物理删除\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.importData}},[a("i",{staticClass:"icon-upload-cloud"}),t._v("导入\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.exportData}},[a("i",{staticClass:"icon-download-cloud"}),t._v("导出\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.reportdata}},[a("i",{staticClass:"icon-clipboard"}),t._v("报表\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.Printing}},[a("i",{staticClass:"icon-print"}),t._v("打印\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.modestsearch}},[a("i",{staticClass:"icon-search"}),t._v("高级查询\n\t\t\t\t\t\t    \t\t"),a("i",{directives:[{name:"show",rawName:"v-show",value:t.down,expression:"down"}],staticClass:"icon-arrow1-down"}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.up,expression:"up"}],staticClass:"icon-arrow1-up"})])])]),t._v(" "),a("div",{staticClass:"columns columns-right btn-group pull-right"},[t._m(0),t._v(" "),a("tableControle",{ref:"tableControle",attrs:{tableHeader:t.tableHeader,checkedName:t.checkedName},on:{tableControle:t.tableControle}})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.search,expression:"search"}]},[a("el-form",{attrs:{model:t.searchList,"label-width":"70px"}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"样品编号",prop:"ITEMNUM"}},[a("el-input",{model:{value:t.searchList.ITEMNUM,callback:function(e){t.$set(t.searchList,"ITEMNUM",e)},expression:"searchList.ITEMNUM"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"样品类别",prop:"TYPE"}},[a("el-input",{model:{value:t.searchList.TYPE,callback:function(e){t.$set(t.searchList,"TYPE",e)},expression:"searchList.TYPE"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"委托单位",prop:"V_NAME"}},[a("el-input",{model:{value:t.searchList.V_NAME,callback:function(e){t.$set(t.searchList,"V_NAME",e)},expression:"searchList.V_NAME"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"样品名称",prop:"DESCRIPTION"}},[a("el-input",{model:{value:t.searchList.DESCRIPTION,callback:function(e){t.$set(t.searchList,"DESCRIPTION",e)},expression:"searchList.DESCRIPTION"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"收样人",prop:"ACCEPT_PERSON"}},[a("el-input",{model:{value:t.searchList.ACCEPT_PERSON,callback:function(e){t.$set(t.searchList,"ACCEPT_PERSON",e)},expression:"searchList.ACCEPT_PERSON"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"收样日期",prop:"ACCEPT_DATE"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择"},model:{value:t.searchList.ACCEPT_DATE,callback:function(e){t.$set(t.searchList,"ACCEPT_DATE",e)},expression:"searchList.ACCEPT_DATE"}})],1)])],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{"margin-top":"2px"},attrs:{type:"primary",size:"small"},on:{click:t.searchinfo}},[t._v("搜索")]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"2px","margin-left":"2px"},attrs:{type:"primary",size:"small"},on:{click:t.resetbtn}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{staticClass:"lefttree",attrs:{span:5}},[a("div",{staticClass:"lefttreebg"},[a("div",{staticClass:"left_tree_title clearfix",on:{click:function(e){t.min3max()}}},[t.ismin?a("div",{staticClass:"pull-left pr20"},[t._v("检索分类")]):t._e(),t._v(" "),a("span",{staticClass:"pull-right navbar-minimalize minimalize-styl-2"},[a("i",{staticClass:"icon-doubleok icon-double-angle-left blue"})])]),t._v(" "),a("div",{staticClass:"left_treebg",style:{height:t.fullHeight}},[t.ismin?a("div",{staticClass:"p15"},[a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:t.resourceData,"node-key":"id","default-expand-all":"",indent:22,"render-content":t.renderContent,props:t.resourceProps},on:{"node-click":t.handleNodeClick}})],1):t._e()])])]),t._v(" "),a("el-col",{staticClass:"leftcont v-resize",attrs:{span:19}},[a("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadMore,expression:"loadMore"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.samplesList,"header-cell-style":t.rowClass,border:"",stripe:"",height:t.fullHeight,"default-sort":{prop:"samplesList",order:"descending"},"element-loading-text":"加载中…","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.9)"},on:{"selection-change":t.SelChange}},[this.checkedName.length>0?a("el-table-column",{attrs:{type:"selection",width:"55",fixed:"",align:"center"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("样品编号")?a("el-table-column",{attrs:{label:"样品编号",sortable:"",width:"200px",prop:"ITEMNUM"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticClass:"blue",attrs:{title:"点击查看详情"},on:{click:function(a){t.view(e.row.ID)}}},[t._v(t._s(e.row.ITEMNUM)+"\n\t\t\t\t\t\t\t\t\t\t")])]}}])}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("样品名称")?a("el-table-column",{attrs:{label:"样品名称",sortable:"",width:"200px",prop:"DESCRIPTION"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("样品类别")?a("el-table-column",{attrs:{label:"样品类别",sortable:"",width:"200px",prop:"TYPE"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("委托单位")?a("el-table-column",{attrs:{label:"委托单位",sortable:"",width:"200px",prop:"V_NAME"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("生产单位")?a("el-table-column",{attrs:{label:"生产单位",sortable:"",width:"200px",prop:"P_NAME"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("型号")?a("el-table-column",{attrs:{label:"型号",width:"100px",prop:"MODEL",sortable:""}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("数量")?a("el-table-column",{attrs:{label:"数量",width:"100px",prop:"QUATITY",sortable:""}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("收样人")?a("el-table-column",{attrs:{label:"收样人",sortable:"",width:"140px",prop:"ACCEPT_PERSON"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("收样日期")?a("el-table-column",{attrs:{label:"收样日期",sortable:"",width:"140px",formatter:t.dateFormat,prop:"ACCEPT_DATE"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("接样人")?a("el-table-column",{attrs:{label:"接样人",sortable:"",width:"140px",prop:"RECIP_PERSON"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("接样日期")?a("el-table-column",{attrs:{label:"接样日期",sortable:"",width:"140px",formatter:t.dateFormat,prop:"RECIP_DATE"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("状态")?a("el-table-column",{attrs:{label:"状态",sortable:"",width:"100px",prop:"STATEDesc"}}):t._e()],1),t._v(" "),this.checkedName.length>0?a("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":t.page.currentPage,"page-sizes":[10,20,30,40],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next",total:t.page.totalCount},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}):t._e()],1)],1)],1)])],1),t._v(" "),a("samplesmask",{ref:"child",attrs:{page:t.page},on:{request:t.requestData,requestTree:t.getKey}}),t._v(" "),a("reportmask",{ref:"reportChild",attrs:{reportData:t.reportData}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn btn-default btn-refresh",attrs:{id:"refresh",title:"刷新"}},[e("i",{staticClass:"icon-refresh"})])}]};var l=function(t){a("YW+Q")},n=a("VU/8")(s.a,i,!1,l,null,null);e.default=n.exports},"YW+Q":function(t,e){}});
//# sourceMappingURL=56.14cc09972a33b29193fe.js.map