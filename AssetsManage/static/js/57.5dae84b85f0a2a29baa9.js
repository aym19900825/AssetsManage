webpackJsonp([57],{UGxW:function(e,t){},dKeM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("QmSG"),r=a("GkRW"),i=a("h7vj"),l={name:"task",components:{vheader:r.a,navs_header:i.a},data:function(){return{basic_url:s.a.dev_url,fullHeight:document.documentElement.clientHeight-210+"px",search:!1,todoList:[],commentArr:{},checkedName:["数据id","App","当前环节","应用","单据号","任务状态","创建时间"],tableHeader:[{label:"数据id",prop:"bizid"},{label:"App",prop:"app"},{label:"当前环节",prop:"name"},{label:"应用",prop:"appDesc"},{label:"单据号",prop:"bizNum"},{label:"任务状态",prop:"state"},{label:"创建时间",prop:"createTime"}],searchList:{createTime:""},page:{currentPage:1,pageSize:10,totalCount:0}}},methods:{rowClass:function(e){e.row,e.rowIndex;return"text-align:center"},audit:function(e){console.log(e),this.$router.push({path:e.bizMenuUrl,query:{bizId:e.bizId}}),this.$store.dispatch("setMenuIdAct",e.bizFirstMenuId)},SelChange:function(e){this.selUser=e},sizeChange:function(e){this.page.pageSize=e,this.requestData()},currentChange:function(e){this.page.currentPage=e,this.requestData()},loadMore:function(){var e=this;if(this.loadSign){if(this.loadSign=!1,this.page.currentPage++,this.page.currentPage>Math.ceil(this.page.totalCount/this.page.pageSize))return;setTimeout(function(){e.loadSign=!0},1e3),this.requestData()}},requestData:function(){var e=this,t=this.basic_url+"/api-apps/app/flow/flow/todo";this.$axios.get(t,{}).then(function(t){console.log(t.data),e.page.totalCount=t.data.count;var a=Math.ceil(e.page.totalCount/e.page.pageSize);e.page.currentPage>=a?e.loadSign=!1:e.loadSign=!0,e.commentArr[e.page.currentPage]=t.data.data;for(var s=[],r=1;r<=a;r++)if(void 0!==e.commentArr[r]&&e.commentArr[r].length>0)for(var i=0;i<e.commentArr[r].length;i++)s.push(e.commentArr[r][i]);e.todoList=s}).catch(function(e){})}},mounted:function(){this.requestData()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"headerbg"},[a("vheader"),e._v(" "),a("navs_header",{ref:"navsheader"})],1),e._v(" "),a("div",{staticClass:"contentbg"},[a("div",{staticClass:"wrapper-content"},[a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"fixed-table-toolbar clearfix"},[e._m(0),e._v(" "),a("div",{staticClass:"columns columns-right btn-group pull-right"},[e._m(1),e._v(" "),a("div",{staticClass:"keep-open btn-group",attrs:{title:"列"}},[a("el-dropdown",{staticClass:"pl10 btn btn-default btn-outline",attrs:{"hide-on-click":!1}},[a("span",{staticClass:"el-dropdown-link"},[a("font",{staticClass:"J_tabClose"},[a("i",{staticClass:"icon-menu3"})]),e._v(" "),a("i",{staticClass:"el-icon-arrow-down icon-arrow2-down"})],1),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-checkbox-group",{model:{value:e.checkedName,callback:function(t){e.checkedName=t},expression:"checkedName"}},e._l(e.tableHeader,function(e,t){return a("el-dropdown-item",{key:t},[a("el-checkbox",{attrs:{label:e.label,name:"type"}})],1)}))],1)],1)],1)])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.search,expression:"search"}]},[a("el-form",{attrs:{model:e.searchList}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:6}}),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"时间",prop:"createTime","label-width":"70px"}},[a("el-input",{model:{value:e.searchList.createTime,callback:function(t){e.$set(e.searchList,"createTime",t)},expression:"searchList.createTime"}})],1)],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"leftcont v-resize",attrs:{span:24}},[a("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"}],staticStyle:{width:"100%"},attrs:{data:e.todoList,"header-cell-style":e.rowClass,border:"",stripe:"",height:e.fullHeight,"default-sort":{prop:"todoList",order:"descending"}},on:{"selection-change":e.SelChange}},[this.checkedName.length>0?a("el-table-column",{attrs:{type:"selection",width:"55",fixed:"",align:"center"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("数据id")?a("el-table-column",{attrs:{label:"数据id",sortable:"",width:"140px",prop:"bizid"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("单据号")?a("el-table-column",{attrs:{label:"单据号",sortable:"",prop:"bizNum"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticClass:"blue",attrs:{title:"点击查看详情"},on:{click:function(a){e.audit(t.row)}}},[e._v(e._s(t.row.bizNum)+"\r\n\t\t\t\t\t\t\t\t\t\t")])]}}])}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("App")?a("el-table-column",{attrs:{label:"App",sortable:"",width:"140px",prop:"app"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("当前环节")?a("el-table-column",{attrs:{label:"当前环节",sortable:"",prop:"name"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("应用")?a("el-table-column",{attrs:{label:"应用",sortable:"",prop:"appDesc"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("任务状态")?a("el-table-column",{attrs:{label:"任务状态",sortable:"",width:"100px",align:"center",prop:"state"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("创建时间")?a("el-table-column",{attrs:{label:"创建时间",sortable:"",width:"160px",prop:"createTime"}}):e._e()],1),e._v(" "),this.checkedName.length>0?a("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":e.page.currentPage,"page-sizes":[10,20,30,40],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.totalCount},on:{"size-change":e.sizeChange,"current-change":e.currentChange}}):e._e()],1)],1)],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bs-bars pull-left"},[t("div",{staticClass:"hidden-xs",attrs:{id:"roleTableToolbar",role:"group"}},[t("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"}},[t("i",{staticClass:"icon-search"}),this._v("高级查询\r\n\t\t\t\t\t\t\t\t")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"btn btn-default btn-refresh",attrs:{id:"refresh",title:"刷新"}},[t("i",{staticClass:"icon-refresh"})])}]};var o=a("VU/8")(l,n,!1,function(e){a("UGxW")},"data-v-1935d0e8",null);t.default=o.exports}});
//# sourceMappingURL=57.5dae84b85f0a2a29baa9.js.map