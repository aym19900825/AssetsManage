webpackJsonp([60],{"+Dy2":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("9mdI"),i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"headerbg"},[a("vheader"),e._v(" "),a("navs_header",{ref:"navsheader"})],1),e._v(" "),a("div",{staticClass:"contentbg"},[a("navs_left",{ref:"navleft",on:{childByValue:e.childByValue}}),e._v(" "),a("div",{staticClass:"wrapper wrapper-content"},[a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"fixed-table-toolbar clearfix"},[a("div",{staticClass:"bs-bars pull-left"},[a("div",{staticClass:"hidden-xs",attrs:{id:"roleTableToolbar",role:"group"}},[a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:e.reportdata}},[a("i",{staticClass:"icon-clipboard"}),e._v("报表\n\t\t\t\t\t\t\t")]),e._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:e.modestsearch}},[a("i",{staticClass:"icon-search"}),e._v("高级查询\n\t\t\t\t\t\t    \t\t"),a("i",{directives:[{name:"show",rawName:"v-show",value:e.down,expression:"down"}],staticClass:"icon-arrow1-down"}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.up,expression:"up"}],staticClass:"icon-arrow1-up"})])])]),e._v(" "),a("div",{staticClass:"columns columns-right btn-group pull-right"},[e._m(0),e._v(" "),a("tableControle",{ref:"tableControle",attrs:{tableHeader:e.tableHeader,checkedName:e.checkedName},on:{tableControle:e.tableControle}})],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.search,expression:"search"}],staticClass:"pb10"},[a("el-form",{attrs:{model:e.searchList,"label-width":"70px"}},[a("el-row",{staticClass:"pb5",attrs:{gutter:30}},[a("el-col",{attrs:{span:7}},[a("el-input",{model:{value:e.searchList.filename,callback:function(t){e.$set(e.searchList,"filename",t)},expression:"searchList.filename"}},[a("template",{slot:"prepend"},[e._v("名称")])],2)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{margin:"4px"},attrs:{type:"primary",size:"small"},on:{click:e.searchinfo}},[e._v("搜索")]),e._v(" "),a("el-button",{staticStyle:{"margin-top":"2px","margin-left":"2px"},attrs:{type:"primary",size:"small"},on:{click:e.resetbtn}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{staticClass:"leftcont v-resize"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.fileList,border:"",height:e.fullHeight,"default-sort":{prop:"fileList",order:"descending"},"element-loading-text":"加载中…","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.9)"}},[-1!=this.checkedName.indexOf("名称")?a("el-table-column",{attrs:{label:"名称",sortable:"",prop:"filename"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("状态")?a("el-table-column",{attrs:{label:"状态",sortable:"",width:"200px",prop:"filestatus"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("上传时间")?a("el-table-column",{attrs:{label:"上传时间",sortable:"",width:"200px",prop:"uploadtime"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("大小")?a("el-table-column",{attrs:{label:"大小",sortable:"",width:"140px",prop:"filesize"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(t.row.filesize+"M")}})]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"top",trigger:"click"}},[a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text",disabled:0==e.fileAuth.fileread},on:{click:function(a){e.read(t.row)}}},[e._v("显示")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text",disabled:0==e.fileAuth.filedownload},on:{click:function(a){e.download(t.row)}}},[e._v("下载")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text",disabled:0==e.fileAuth.fileedit}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text",disabled:0==e.fileAuth.fileprint}},[e._v("打印")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text",disabled:0==e.fileAuth.fileduplicate}},[e._v("复制")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text",disabled:0==e.fileAuth.filedelete}},[e._v("删除")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},on:{click:function(a){e.showDo(t.row)}},slot:"reference"},[e._v("文件权限")])],1)]}}])})],1),e._v(" "),this.checkedName.length>0?a("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":e.page.currentPage,"page-sizes":[10,20,30,40],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.totalCount},on:{"size-change":e.sizeChange,"current-change":e.currentChange}}):e._e()],1)],1)],1)])],1),e._v(" "),a("reportmask",{ref:"reportChild",attrs:{reportData:e.reportData}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"btn btn-default btn-refresh",attrs:{id:"refresh",title:"刷新"}},[t("i",{staticClass:"icon-refresh"})])}]};var l=function(e){a("y3la")},r=a("VU/8")(s.a,i,!1,l,null,null);t.default=r.exports},"9mdI":function(e,t,a){"use strict";(function(e){var s=a("QmSG"),i=a("GkRW"),l=a("hbvp"),r=a("h7vj"),n=a("VEhc"),o=a("v37i"),c=a("jk2w");t.a={name:"samples",components:{vheader:i.a,navs_header:r.a,navs_left:l.a,tableControle:n.a,samplesmask:o.a,reportmask:c.a},data:function(){return{reportData:{},loading:!1,visible2:!1,basic_url:s.a.dev_url,file_url:s.a.file_url,po_url:s.a.po_url,isShow:!1,ismin:!0,loadSign:!0,commentArr:{},checkedName:["名称","状态","大小","上传时间"],tableHeader:[{label:"名称",prop:"filename"},{label:"状态",prop:"filestatus"},{label:"大小",prop:"filesize"},{label:"上传时间",prop:"uploadtime"}],companyId:"",deptId:"",selMenu:[],fileList:[],fullHeight:document.documentElement.clientHeight-210+"px",search:!1,show:!1,down:!0,up:!1,searchList:{filename:""},resourceData:[],resourceDialogisShow:!1,resourceCheckedKey:[],resourceProps:{children:"subDepts",label:"fullname"},treeData:[],page:{currentPage:1,pageSize:10,totalCount:0},userParm:{},fileAuth:{filedelete:0,filedownload:0,fileduplicate:0,fileedit:0,fileprint:0,fileread:0,fileupload:0},fileAuthShow:!1,samplesForm:{}}},methods:{download:function(e){var t=e.filepath+"&userid="+this.userParm.userid+"&username="+this.userParm.username+"&deptid="+this.userParm.deptid+"&deptfullname="+this.userParm.deptfullname;window.open(t)},read:function(e){var t=this.po_url+"/show?filename="+e.filename+"&userid="+this.userParm.userid+"&username="+this.userParm.username+"&deptid="+this.userParm.deptid+"&deptfullname="+this.userParm.deptfullname;window.open(t)},showDo:function(e){var t=this,a={userid:this.userParm.userid,fileid:e.fileid},s=this.file_url+"/file/privilege";this.$axios.post(s,a).then(function(e){t.fileAuth=e.data,console.log(0==t.fileAuth.fileread)}).catch(function(e){})},tableControle:function(e){this.checkedName=e},sizeChange:function(e){this.page.pageSize=e,this.requestData()},currentChange:function(e){this.page.currentPage=e,this.requestData()},resetbtn:function(){this.searchList={filename:""},this.requestData()},searchinfo:function(e){this.page.currentPage=1,this.page.pageSize=10,this.requestData()},modify:function(){0!=this.selMenu.length?this.selMenu.length>1?this.$message({message:"不可同时修改多条数据",type:"warning"}):this.$refs.child.detail(this.selMenu[0].ID):this.$message({message:"请您选择要修改的数据",type:"warning"})},modestsearch:function(){this.search=!this.search,this.down=!this.down,this.up=!this.up},reportdata:function(){this.reportData.app=this.productType,this.$refs.reportChild.visible()},deluserinfo:function(){var e=this,t=this.selMenu;if(0!=t.length){for(var a=this.basic_url+"/api-apps/app/item/deletes",s=t,i=[],l=0;l<s.length;l++)i.push(s[l].ID);var r={ids:i.toString(",")};this.$confirm("确定删除此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){t.value;e.$axios.delete(a,{params:r}).then(function(t){0==t.data.resp_code&&(e.$message({message:"删除成功",type:"success"}),e.requestData())}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要删除的数据",type:"warning"})},SelChange:function(e){this.selMenu=e},requestData:function(e){var t=this;this.loading=!0;var a={page:this.page.currentPage,limit:this.page.pageSize,userid:this.userParm.userid,filename:this.searchList.filename},s=this.file_url+"/file/baseKeywordList";this.$axios.post(s,a).then(function(e){t.page.totalCount=e.data.total,t.fileList=e.data.vBaseKeywordFiles,t.loading=!1}).catch(function(e){})},transformTree:function(t){for(var a=0;a<t.length;a++)t[a].name=t[a].fullname,!t[a].pid||e.isArray(t[a].subDepts)?t[a].iconClass="icon-file-normal":t[a].iconClass="icon-file-text",e.isArray(t[a].subDepts)&&(t[a].children=this.transformTree(t[a].subDepts));return t},handleNodeClick:function(e){"1"==e.type?(this.companyId=e.id,this.deptId=""):(this.deptId=e.id,this.companyId=""),this.requestData()},min3max:function(){e(".lefttree").hasClass("el-col-5")?(e(".lefttree").removeClass("el-col-5"),e(".lefttree").addClass("el-col-1"),e(".leftcont").removeClass("el-col-19"),e(".leftcont").addClass("el-col-23"),e(".icon-doubleok").removeClass("icon-double-angle-left"),e(".icon-doubleok").addClass("icon-double-angle-right")):(e(".lefttree").removeClass("el-col-1"),e(".lefttree").addClass("el-col-5"),e(".leftcont").removeClass("el-col-23"),e(".leftcont").addClass("el-col-19"),e(".icon-doubleok").removeClass("icon-double-angle-right"),e(".icon-doubleok").addClass("icon-double-angle-left")),this.ismin=!this.ismin},childByValue:function(e){this.$refs.navsheader.showClick(e)}},mounted:function(){var e=this,t=this.basic_url+"/api-user/users/currentMap";this.$axios.get(t,{}).then(function(t){e.userParm.userid=t.data.id,e.userParm.username=t.data.username,e.userParm.deptid=t.data.deptId,e.userParm.deptName=t.data.deptName,e.requestData()}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})}}}).call(t,a("7t+N"))},y3la:function(e,t){}});
//# sourceMappingURL=60.d34158db53754c4e759d.js.map