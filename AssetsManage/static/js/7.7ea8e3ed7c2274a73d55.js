webpackJsonp([7],{"660k":function(t,e,a){"use strict";(function(t){var s=a("pFYg"),i=a.n(s),l=a("mvHQ"),r=a.n(l),o=a("bOdI"),n=a.n(o),c=a("QmSG"),d=a("bZCE");e.a={name:"masks",components:{docTable:d.a},data:function(){var t,e=this;return t={docParm:{model:"new",recordid:1,userid:1,username:"",deptid:1,deptfullname:"",appname:"",appid:1},basic_url:c.a.dev_url,showEdit:[],showBtn:[],showBtnOrdinary:!0,fullHeight:document.documentElement.clientHeight-210+"px",value:"",assignshow:!1,options:[{value:"1",label:"活动"},{value:"0",label:"不活动"}],loadSign:!0,commentArr:{},selUser:[],productList:[],edit:!0,col_but1:!0,col_but2:!0,show:!1,modify:!1,isok1:!0,isok2:!1,down:!0,up:!1,addtitle:!0,modifytitle:!1,viewtitle:!1,noviews:!0,views:!1,activeName:"first",activeNames:["1","2","3","4","5","6","7"],dialogVisible:!1,dialogVisible2:!1,dialogVisible3:!1,dialogVisible4:!1,diaVisCustom:!1,searchList:{S_NUM:"",S_NAME:"",VERSION:"",DEPARTMENT:"",RELEASETIME:"",STARTETIME:"",STATUS:""},dataList:[{name:"",description:""}],search:"",selectData:[],standardList:[],projectList:[],fileList:[],page:{currentPage:1,pageSize:10,totalCount:0},WORKPLAN:{},inspectionList_child:{WORLPLANLINE_BASISList:[],WORLPLANLINE_PROJECTList:[]},rules:{PROP_UNIT:[{required:!0,validator:function(t,e,a){""===e?a(new Error("请选择提出单位")):a()},trigger:"change"}],basisList:[{required:!0,validator:function(t,e,a){""===e?a(new Error("请选择检测依据")):a()},trigger:"change"}],DESCRIPTION:[{required:!0,trigger:"blur",validator:this.Validators.isFillTips}],TYPE:[{required:!0,message:"请选择类别",trigger:"change"}],COMPACTOR:[{required:!0,trigger:"blur",message:"必填"},{trigger:"blur",validator:this.Validators.isNickname}],C_PERSON:[{required:!0,trigger:"blur",message:"必填"},{trigger:"blur",validator:this.Validators.isNickname}],APPRPERSON:[{required:!0,trigger:"blur",message:"必填"},{trigger:"blur",validator:this.Validators.isNickname}],CONTACT_ADDRESS:[{required:!0,trigger:"blur",validator:function(t,e,a){""===e?a(new Error("请填写联系地址")):a()}}],PHONE:[{required:!0,trigger:"blur",validator:function(t,e,a){""===e?a(new Error("请填写联系电话")):a()}}],EMAIL:[{required:!0,trigger:"blur",validator:function(t,e,a){""===e?a(new Error("电子邮箱不能为空")):/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)?a():a(new Error("请输入有效的邮箱"))}}],ITEMTYPE:[{required:!0,validator:function(t,a,s){void 0===e.WORKPLAN.ITEMTYPE||""===e.WORKPLAN.ITEMTYPE||null===e.WORKPLAN.ITEMTYPE?s(new Error("必填")):s()}}],YEAR:[{type:"string",required:!0,message:"请选择年度",trigger:"change"}],REPORTDATE:[{type:"string",required:!0,message:"请选择提报日期",trigger:"change"}],ITEM_NAME:[{required:!0,message:"请填写",trigger:"blur"}],MODEL:[{required:!0,message:"请填写",trigger:"blur"}],REMARKS:[{required:!0,message:"请填写",trigger:"blur"}]},resourceData:[],worlplanlist:[],basisList:[],proTestList:[],isEditList:!1,editPlan:{},frontId:1,index:0},n()(t,"views",!0),n()(t,"dept",!0),n()(t,"categoryList",[]),n()(t,"proindex",0),n()(t,"deptindex",0),n()(t,"falg",!1),n()(t,"customerList",[]),n()(t,"deptnum",""),n()(t,"requestnum",0),n()(t,"itemtypenum",""),n()(t,"pronamenum",""),n()(t,"basisnums",""),n()(t,"noedit",!1),t},methods:{getCompany:function(){var t=this,e=this.basic_url+"/api-user/depts/treeByType";this.$axios.get(e,{params:{type:"2"}}).then(function(e){t.selectData=e.data})},resetbtn:function(){var t;this.searchList=(t={S_NUM:"",S_NAME:"",VERSION:"",DEPARTMENT:"",RELEASETIME:"",STARTETIME:"",STATUS:"",P_NUM:"",DEPTID:"",P_NAME:""},n()(t,"VERSION",""),n()(t,"STATUS",""),t)},rowClass:function(t){t.row,t.rowIndex;return"text-align:center"},toNum:function(t){return t.replace(/\,|\￥/g,"")},toPrice:function(t){var e=document.getElementById("cost").value,a=parseFloat(this.toNum(e)).toFixed(2).toString().split(".");a[0]=a[0].replace(new RegExp("(\\d)(?=(\\d{3})+$)","ig"),"$1,"),t.CHECKCOST=a.join(".")},changeEdit:function(t){this.$nextTick(function(){t.isEditing=!t.isEditing})},prodeptbtn:function(t){this.requestDeptname(),this.diaVisCustom=!0,this.proindex=t,this.requestnum="3",this.deptnum="1"},getdeptbtn:function(t){this.requestDeptname(),this.diaVisCustom=!0,this.deptindex=t,this.requestnum="3",this.deptnum="2"},adddeptname:function(){0==this.selUser.length?this.$message({message:"请选择数据",type:"warning"}):this.selUser.length>1?this.$message({message:"不可同时选择多条数据",type:"warning"}):("1"==this.deptnum?this.proindex.V_NAME=this.selUser[0].NAME:"2"==this.deptnum&&(this.deptindex.SJ_NAME=this.selUser[0].NAME),this.diaVisCustom=!1,this.requestDeptname())},delPlan:function(t,e,a,s){var i=this;if(e.ID){var l=this.basic_url+"/api-apps/app/workplan/"+a+"/"+e.ID;this.$axios.delete(l,{}).then(function(e){0==e.data.resp_code?i[s].splice(t,1):i.$message({message:e.data.resp_msg,type:"error"})}).catch(function(t){i.$message({message:"网络错误，请重试",type:"error"})})}else this[s].splice(t,1)},assign:function(t){var e=this,a=t.ID;1==t.ISCREATED?this.$message({message:"已经下达工作任务通知书，请勿重复下达",type:"warning"}):this.$axios.get(this.basic_url+"/api-apps/app/workplan/operate/createWorkNotice?ID="+a,{}).then(function(t){0==t.data.resp_code?e.$message({message:"下达工作任务通知书成功",type:"success"}):e.$message({message:t.data.resp_msg,type:"warning"})}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})},iconOperation:function(t){t.isEditing=!t.isEditing,this.isEditList=t.isEditing;var e=this.editPlan.frontId;if(e)for(var a=this.worlplanlist,s=0,i=a.length;s<i;s++)e==a[s].frontId&&(a[s].WORLPLANLINE_PROJECTList=JSON.parse(r()(this.proTestList)),a[s].WORLPLANLINE_BASISList=JSON.parse(r()(this.basisList)),a[s].isEditing=!1);t.isEditing?(this.editPlan=t,this.proTestList=t.WORLPLANLINE_PROJECTList,this.basisList=t.WORLPLANLINE_BASISList):(this.editPlan={},this.proTestList=[],this.basisList=[])},handleExceed:function(t,e){this.$message.warning("当前限制选择 3 个文件，本次选择了 "+t.length+" 个文件，共选择了 "+(t.length+e.length)+" 个文件")},beforeRemove:function(t,e){return this.$confirm("确定移除 "+t.name+"？")},judge:function(t){return"1"==t.STATUS?"活动":"不活动"},dateFormat:function(t,e){var a=t[e.property];return void 0==a?"":this.$moment(a).format("YYYY-MM-DD HH:mm:ss")},addbasis:function(){var t=this.selUser;if(0!=t.length){for(var e=this.selUser,a=[],s=0;s<e.length;s++)a.push(e[s].S_NUM);this.basisnums=a.toString(",");for(s=0;s<t.length;s++)t[s].ID="",t[s].WP_NUM=this.WORKPLAN.WP_NUM,t[s].WP_LINENUM=this.editPlan.WP_LINENUM,t[s].NUMBER=this.proTestList.length>0?this.proTestList[this.proTestList.length-1].NUMBER+s+1:1,this.basisList.push(JSON.parse(r()(t[s])));return this.dialogVisible=!1,void this.$message({message:"添加成功",type:"success"})}this.$message({message:"请选择数据",type:"warning"})},addbasis2:function(){var t=this.selUser;if(0!=t.length){for(var e=0;e<t.length;e++)t[e].P_DESC=t[e].P_NAME,t[e].isEditing=!1,t[e].ID="",t[e].REMARKS=this.editPlan.REMARKS,t[e].WP_NUM=this.WORKPLAN.WP_NUM,t[e].WP_LINENUM=this.editPlan.WP_LINENUM,t[e].NUMBER=this.proTestList.length>0?this.proTestList[this.proTestList.length-1].NUMBER+e+1:1,this.proTestList.push(JSON.parse(r()(t[e])));return this.dialogVisible2=!1,void this.$message({message:"添加成功",type:"success"})}this.$message({message:"请选择数据",type:"warning"})},addproclass:function(){0==this.selUser.length?this.$message({message:"请选择数据",type:"warning"}):this.selUser.length>1?this.$message({message:"不可同时选择多条数据",type:"warning"}):(this.dialogVisible3=!1,this.itemtypenum=this.selUser[0].NUM,this.WORKPLAN.ITEMTYPE=this.selUser[0].TYPE,this.$emit("request"))},addproduct:function(t){this.WORKPLAN.ITEMTYPE&&this.requestProname(),this.requestnum="2",this.dialogVisible4=!0,this.proindex=t},addproname:function(){0==this.selUser.length?this.$message({message:"请选择数据",type:"warning"}):this.selUser.length>1?this.$message({message:"不可同时选择多条数据",type:"warning"}):(this.dialogVisible4=!1,this.pronamenum=this.selUser[0].PRO_NUM,this.proindex.ITEM_NAME=this.selUser[0].PRO_NAME,this.$emit("request"))},requestProname:function(){var t=this,e=(this.page.currentPage,this.page.pageSize,this.basic_url+"/api-apps/app/product2?NUM_wheres="+this.itemtypenum);this.$axios.get(e,{}).then(function(e){t.page.totalCount=e.data.count;var a=Math.ceil(t.page.totalCount/t.page.pageSize);t.page.currentPage>=a?t.loadSign=!1:t.loadSign=!0,t.commentArr[t.page.currentPage]=e.data.data;for(var s=[],i=1;i<=a;i++)if(void 0!==t.commentArr[i]&&t.commentArr[i].length>0)for(var l=0;l<t.commentArr[i].length;l++)s.push(t.commentArr[i][l]);t.productList=s}).catch(function(t){})},handleClick:function(t,e){},basisleadbtn:function(){this.requestBasis(),this.requestnum="4",this.dialogVisible=!0},basisleadbtn2:function(){this.requestProject(),this.requestnum="5",this.dialogVisible2=!0},requestBasis:function(){var t=this,e=(this.page.currentPage,this.page.pageSize,this.searchList.S_NUM,this.searchList.S_NAME,this.searchList.S_ENGNAME,this.searchList.VERSION,this.searchList.DEPTID,this.searchList.RELEASETIME,this.searchList.STARTETIME,this.basic_url+"/api-apps/app/inspectionSta2?PRO_NUM_wheres="+this.pronamenum);this.$axios.get(e,{}).then(function(e){t.page.totalCount=e.data.count;var a=Math.ceil(t.page.totalCount/t.page.pageSize);t.page.currentPage>=a?t.loadSign=!1:t.loadSign=!0,t.commentArr[t.page.currentPage]=e.data.data;for(var s=[],i=1;i<=a;i++)if(void 0!==t.commentArr[i]&&t.commentArr[i].length>0)for(var l=0;l<t.commentArr[i].length;l++)s.push(t.commentArr[i][l]);t.standardList=s}).catch(function(t){})},requestProject:function(){var t,e=this;t={page:this.page.currentPage,limit:this.page.pageSize,S_NAME:this.searchList.S_NAME,VERSION:this.searchList.VERSION,DEPARTMENT:this.searchList.DEPARTMENT,RELEASETIME:this.searchList.RELEASETIME,STARTETIME:this.searchList.STARTETIME,STATUS:this.searchList.STATUS,P_NUM:this.searchList.P_NUM,DEPTID:this.searchList.DEPTID,P_NAME:this.searchList.P_NAME},n()(t,"VERSION",this.searchList.VERSION),n()(t,"STATUS",this.searchList.STATUS);this.$axios.get(this.basic_url+"/api-apps/app/inspectionPro2?S_NUM_where_in="+this.basisnums,{}).then(function(t){e.page.totalCount=t.data.count;var a=Math.ceil(e.page.totalCount/e.page.pageSize);e.page.currentPage>=a?e.loadSign=!1:e.loadSign=!0,e.commentArr[e.page.currentPage]=t.data.data;for(var s=[],i=1;i<=a;i++)if(void 0!==e.commentArr[i]&&e.commentArr[i].length>0)for(var l=0;l<e.commentArr[i].length;l++)s.push(e.commentArr[i][l]);e.projectList=s}).catch(function(t){})},addprobtn:function(){null==this.WORKPLAN.PROP_UNIT||void 0==this.WORKPLAN.PROP_UNIT||""==this.WORKPLAN.PROP_UNIT?this.$message({message:"请先选择提出单位",type:"warning"}):(this.dialogVisible3=!0,this.requestnum="1",this.requesCategory())},requestDeptname:function(){var t=this,e={page:this.page.currentPage,limit:this.page.pageSize},a=this.basic_url+"/api-apps/app/customer";this.$axios.get(a,{params:e}).then(function(e){t.page.totalCount=e.data.count;var a=Math.ceil(t.page.totalCount/t.page.pageSize);t.page.currentPage>=a?t.loadSign=!1:t.loadSign=!0,t.commentArr[t.page.currentPage]=e.data.data;for(var s=[],i=1;i<=a;i++)if(void 0!==t.commentArr[i]&&t.commentArr[i].length>0)for(var l=0;l<t.commentArr[i].length;l++)s.push(t.commentArr[i][l]);t.customerList=s}).catch(function(t){})},requesCategory:function(){var t=this,e={page:this.page.currentPage,limit:this.page.pageSize};console.log(this.WORKPLAN.PROP_UNIT),this.$axios.get(this.basic_url+"/api-apps/app/productType2?DEPTID="+this.WORKPLAN.PROP_UNIT,{params:e}).then(function(e){t.page.totalCount=e.data.count;var a=Math.ceil(t.page.totalCount/t.page.pageSize);t.page.currentPage>=a?t.loadSign=!1:t.loadSign=!0,t.commentArr[t.page.currentPage]=e.data.data;for(var s=[],i=1;i<=a;i++)if(void 0!==t.commentArr[i]&&t.commentArr[i].length>0)for(var l=0;l<t.commentArr[i].length;l++)s.push(t.commentArr[i][l]);t.categoryList=s}).catch(function(t){})},handleChange:function(t){},SelChange:function(t){this.selUser=t},addfield1:function(){if(0==this.isEditList){var t=new Date;this.currentDate=this.$moment(t).format("YYYY-MM-DD"),this.index=this.index+1;var e={ID:"",WP_NUM:10001,WP_LINENUM:this.index,ITEM_NAME:"",MODEL:"",V_NAME:"",BASIS:"",P_NAME:"",CHECKCOST:0,REASION:"",SJ_NAME:"",MEMO:"",isEditing:!0,frontId:this.frontId++,STATUS:"1",VENDOR:""};this.worlplanlist.push(e),this.editPlan=this.worlplanlist[0],this.basisList=[],this.proTestList=[],this.isEditList=!0}else this.$message.warning("请先保存当前编辑项")},addfield2:function(){},addfield4:function(){this.WORKPLAN.WORLPLANLINE_PROJECTList.push({NUMBER:"",P_NUM:"",P_DESC:"",REMARKS:"",VERSION:""})},delfield1:function(t){var e=this.WORKPLAN.WORLPLANLINEList.indexOf(t);-1!==e&&this.WORKPLAN.WORLPLANLINEList.splice(e,1)},delfield3:function(t){var e=this.inspectionList_child.WORLPLANLINE_BASISList.indexOf(t);-1!==e&&this.inspectionList_child.WORLPLANLINE_BASISList.splice(e,1)},delfield4:function(t){var e=this.inspectionList_child.WORLPLANLINE_PROJECTList.indexOf(t);-1!==e&&this.inspectionList_child.WORLPLANLINE_PROJECTList.splice(e,1)},col_but:function(t){"col_but1"==t&&(this.col_but1=!this.col_but1,this.down=!this.down,this.up=!this.up),"col_but2"==t&&(this.col_but2=!this.col_but2,this.down=!this.down,this.up=!this.up)},getUser:function(t){var e=this;this.$axios.get(this.basic_url+"/api-user/users/currentMap",{}).then(function(a){if("new"==t)e.WORKPLAN.DEPTID=a.data.deptId,e.WORKPLAN.ENTERBY=a.data.id,e.WORKPLAN.ENTERDATE=e.$moment(s).format("YYYY-MM-DD");else{e.WORKPLAN.DEPTID=a.data.deptId,e.WORKPLAN.CHANGEBY=a.data.id,e.WORKPLAN.CHANGEBY=a.data.nickname;var s=new Date;e.WORKPLAN.CHANGEDATE=e.$moment(s).format("YYYY-MM-DD")}e.docParm.userid=a.data.id,e.docParm.username=a.data.username,e.docParm.deptid=a.data.deptId,e.docParm.deptfullname=a.data.deptName}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})},visible:function(){this.assignshow=!1;var t=new Date,e=this.$moment(e).format("YYYY-MM-DD"),a=t.getFullYear().toString();this.WORKPLAN={ID:"",WP_NUM:"",DESCRIPTION:"",YEAR:a,TYPE:"",STATUS:"1",STATUSDesc:"草稿",LEADER_STATUS:"1",STATUSDATE:e,ITEMTYPE:"",PROP_UNIT:"",ENTERBY:"",ENTERDATE:e,CHANGEBY:"",CHANGEDATE:"",COMPACTOR:"",C_PERSON:"",APPRPERSON:"",REPORTDATE:e,MEMO:"",MESSSTATUS:"1",SYNCHRONIZATION_TIME:""},this.worlplanlist=[],this.basisList=[],this.proTestList=[],this.isEditList=!1,this.docParm={model:"new",appname:"年度计划",recordid:1,appid:20},this.getUser("new"),this.addtitle=!0,this.modifytitle=!1,this.viewtitle=!1,this.modify=!1,this.views=!1,this.dept=!1,this.show=!0,this.edit=!0,this.noedit=!1},detail:function(t){var e=this;this.getCompany(),this.assignshow=!0,this.$axios.get(this.basic_url+"/api-apps/app/workplan/"+t,{}).then(function(t){for(var a=0;a<t.data.WORLPLANLINEList.length;a++)t.data.WORLPLANLINEList[a].isEditing=!1;console.log(3333344444),console.log(t.data),t.data.PROP_UNIT=Number(t.data.PROP_UNIT),console.log("======================="),console.log(i()(t.data.PROP_UNIT)),e.WORKPLAN=t.data,e.worlplanlist=t.data.WORLPLANLINEList;for(var s=t.data.WORLPLANLINEList,l=(a=0,s.length);a<l;a++)s[a].isEditing=!1,s[a].frontId=e.frontId++;e.basisList=t.data.WORLPLANLINEList.length>0?t.data.WORLPLANLINEList[0].WORLPLANLINE_BASISList:[],e.proTestList=t.data.WORLPLANLINEList.length>0?t.data.WORLPLANLINEList[0].WORLPLANLINE_PROJECTList:[],e.getUser("edit");var r=e;setTimeout(function(){r.docParm.model="edit",r.docParm.appname="年度计划",r.docParm.recordid=r.WORKPLAN.ID,r.docParm.appid=20,r.$refs.docTable.getData()},100);var o=e.basic_url+"/api-user/depts/treeByType";e.$axios.get(o,{params:{type:"2"}}).then(function(t){e.selectData=t.data})}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})});var a=this.basic_url+"/api-user/depts/treeByType?id="+this.WORKPLAN.PROP_UNIT;this.$axios.get(a,{}).then(function(t){e.selectData=t.data}),console.log(233333333),console.log(this.WORKPLAN),this.viewtitle=!1,this.addtitle=!1,this.modifytitle=!0,this.modify=!0,this.views=!1,this.dept=!0,this.show=!0,this.edit=!0,this.noedit=!1},view:function(t){var e=this;this.addtitle=!1,this.modifytitle=!1,this.viewtitle=!0,this.views=!0,this.dept=!0,this.noviews=!1,this.edit=!0,this.noedit=!0;var a=this;setTimeout(function(){a.docParm.model="view",a.docParm.appname="年度计划",a.docParm.recordid=a.WORKPLAN.ID,a.docParm.appid=20,a.$refs.docTable.getData()},100);var s=this.basic_url+"/api-apps/app/workplan/"+t;this.$axios.get(s,{}).then(function(t){e.WORKPLAN=t.data,e.worlplanlist=t.data.WORLPLANLINEList;for(var a=t.data.WORLPLANLINEList,s=0,i=a.length;s<i;s++)a[s].isEditing=!1,a[s].frontId=e.frontId++;e.basisList=t.data.WORLPLANLINEList.length>0?t.data.WORLPLANLINEList[0].WORLPLANLINE_BASISList:[],e.proTestList=t.data.WORLPLANLINEList.length>0?t.data.WORLPLANLINEList[0].WORLPLANLINE_PROJECTList:[],e.show=!0}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})},close:function(){this.show=!1,this.$emit("request")},toggle:function(t){1==this.isok1?this.maxDialog():this.rebackDialog()},maxDialog:function(e){this.isok1=!1,this.isok2=!0,t(".mask_div").width(document.body.clientWidth),t(".mask_div").height(document.body.clientHeight-60),t(".mask_div").css("top","60px")},rebackDialog:function(){this.isok1=!0,this.isok2=!1,t(".mask_div").css("width","80%"),t(".mask_div").css("height","80%"),t(".mask_div").css("top","100px")},save:function(t){var e=this;this.$refs.WORKPLAN.validate(function(a){if(a||"docUpload"!=t||e.$message({message:"请先正确填写信息，再进行文档上传",type:"warning"}),a){if(!(e.worlplanlist.length>0))return e.$message({message:"年度计划列表是必填项，请填写！",type:"warning"}),!1;for(var s=0;s<e.worlplanlist.length;s++){if(!e.worlplanlist[s].WORLPLANLINE_PROJECTList||!e.worlplanlist[s].WORLPLANLINE_BASISList||0==e.worlplanlist[s].WORLPLANLINE_PROJECTList.length||0==e.worlplanlist[s].WORLPLANLINE_BASISList.length)return e.$message({message:"检测依据、检测项目与要求是必填项，请填写！",type:"warning"}),!1;if(e.isEditList)return e.$message({message:"年度计划列表的数据，需保存",type:"warning"}),!1;e.WORKPLAN.WORLPLANLINEList=e.worlplanlist;var i=e.basic_url+"/api-apps/app/workplan/saveOrUpdate";e.$axios.post(i,e.WORKPLAN).then(function(a){0==a.data.resp_code?"docUpload"==t?(e.docParm.recordid=a.data.datas.id,e.docParm.model="edit",e.$refs.docTable.autoLoad(),e.WORKPLAN.ID=a.data.datas.id):(e.$message({message:"保存成功",type:"success"}),e.show=!1,e.$emit("request")):e.$message({message:a.data.resp_msg,type:"error"})}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})}),e.falg=!0}}else e.show=!0,e.$message({message:"未填写完整，请填写",type:"warning"}),e.falg=!1})},reset:function(){this.WORKPLAN={ID:"",WP_NUM:"",DESCRIPTION:"",YEAR:year,TYPE:"",STATUS:"1",LEADER_STATUS:"1",STATUSDATE:date,ITEMTYPE:"",PROP_UNIT:"",ENTERBY:"当前人",ENTERDATE:date,CHANGEBY:"",CHANGEDATE:"",COMPACTOR:"",C_PERSON:"",APPRPERSON:"",REPORTDATE:date,MEMO:"",MESSSTATUS:"1",SYNCHRONIZATION_TIME:""},this.worlplanlist=[]},saveAndUpdate:function(t){this.save(t),this.falg?this.show=!1:this.show=!0},saveAndSubmit:function(t){this.save(t),this.reset()},loadMore:function(){var t=this;if(this.loadSign){if(this.loadSign=!1,this.page.currentPage++,this.page.currentPage>Math.ceil(this.page.totalCount/this.page.pageSize))return;setTimeout(function(){t.loadSign=!0},1e3),"1"==this.requestnum?this.requesCategory():"2"==this.requestnum?this.requestProname():"3"==this.requestnum?this.requestDeptname():"4"==this.requestnum?this.requestBasis():"5"==this.requestnum&&this.requestProject()}},sizeChange:function(t){this.page.pageSize=t,"1"==this.requestnum?this.requesCategory():"2"==this.requestnum?this.requestProname():"3"==this.requestnum?this.requestDeptname():"4"==this.requestnum?this.requestBasis():"5"==this.requestnum&&this.requestProject()},currentChange:function(t){this.page.currentPage=t,"1"==this.requestnum?this.requesCategory():"2"==this.requestnum?this.requestProname():"3"==this.requestnum?this.requestDeptname():"4"==this.requestnum?this.requestBasis():"5"==this.requestnum&&this.requestProject()},searchinfo:function(t){this.page.currentPage=1,this.page.pageSize=10,"1"==this.requestnum?this.requesCategory():"2"==this.requestnum?this.requestProname():"3"==this.requestnum?this.requestDeptname():"4"==this.requestnum?this.requestBasis():"5"==this.requestnum&&this.requestProject()},handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})}},mounted:function(){this.getCompany()}}}).call(e,a("7t+N"))},"7AIa":function(t,e){},GGsb:function(t,e){},KSSO:function(t,e,a){"use strict";var s=a("660k"),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.show?a("div",{staticClass:"mask"}):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"mask_divbg"},[a("div",{staticClass:"mask_div"},[a("div",{staticClass:"mask_title_div clearfix"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.addtitle,expression:"addtitle"}],staticClass:"mask_title"},[t._v("添加年度计划")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.modifytitle,expression:"modifytitle"}],staticClass:"mask_title"},[t._v("修改年度计划")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.viewtitle,expression:"viewtitle"}],staticClass:"mask_title"},[t._v("查看年度计划")]),t._v(" "),a("div",{staticClass:"mask_anniu"},[a("span",{staticClass:"mask_span mask_max",on:{click:t.toggle}},[a("i",{class:{"icon-maximization":t.isok1,"icon-restore":t.isok2}})]),t._v(" "),a("span",{staticClass:"mask_span",on:{click:t.close}},[a("i",{staticClass:"icon-close1"})])])]),t._v(" "),a("div",{staticClass:"mask_content"},[a("el-form",{ref:"WORKPLAN",attrs:{"inline-message":"",model:t.WORKPLAN,rules:t.rules}},[a("div",{staticClass:"accordion",attrs:{id:"information"}},[a("el-collapse",{on:{change:t.handleChange},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"基本信息",name:"1"}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{staticClass:"pull-right",attrs:{span:5}},[a("el-input",{attrs:{disabled:!0},model:{value:t.WORKPLAN.STATUSDesc,callback:function(e){t.$set(t.WORKPLAN,"STATUSDesc",e)},expression:"WORKPLAN.STATUSDesc"}},[a("template",{slot:"prepend"},[t._v("编辑状态")])],2)],1),t._v(" "),a("el-col",{staticClass:"pull-right",attrs:{span:5}},[a("el-input",{attrs:{placeholder:"自动生成",disabled:t.edit},model:{value:t.WORKPLAN.WP_NUM,callback:function(e){t.$set(t.WORKPLAN,"WP_NUM",e)},expression:"WORKPLAN.WP_NUM"}},[a("template",{slot:"prepend"},[t._v("编号")])],2)],1)],1),t._v(" "),a("el-row",{staticClass:"pt10",attrs:{gutter:5}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"提出单位",prop:"PROP_UNIT","label-width":"85px"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",disabled:t.noedit},model:{value:t.WORKPLAN.PROP_UNIT,callback:function(e){t.$set(t.WORKPLAN,"PROP_UNIT",e)},expression:"WORKPLAN.PROP_UNIT"}},t._l(t.selectData,function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.fullname}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品类别",prop:"ITEMTYPE","label-width":"85px"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.WORKPLAN.ITEMTYPE,callback:function(e){t.$set(t.WORKPLAN,"ITEMTYPE",e)},expression:"WORKPLAN.ITEMTYPE"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",disabled:t.noedit},on:{click:t.addprobtn},slot:"append"})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计划描述",prop:"DESCRIPTION","label-width":"85px"}},[a("el-input",{attrs:{disabled:t.noedit},model:{value:t.WORKPLAN.DESCRIPTION,callback:function(e){t.$set(t.WORKPLAN,"DESCRIPTION",e)},expression:"WORKPLAN.DESCRIPTION"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类别",prop:"TYPE","label-width":"85px"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:t.noedit},model:{value:t.WORKPLAN.TYPE,callback:function(e){t.$set(t.WORKPLAN,"TYPE",e)},expression:"WORKPLAN.TYPE"}},[a("el-option",{attrs:{label:"监督抽查",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"质量抽查",value:"3"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"编制人",prop:"COMPACTOR","label-width":"85px"}},[a("el-input",{attrs:{disabled:t.noedit},model:{value:t.WORKPLAN.COMPACTOR,callback:function(e){t.$set(t.WORKPLAN,"COMPACTOR",e)},expression:"WORKPLAN.COMPACTOR"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"审核人",prop:"C_PERSON","label-width":"85px"}},[a("el-input",{attrs:{disabled:t.noedit},model:{value:t.WORKPLAN.C_PERSON,callback:function(e){t.$set(t.WORKPLAN,"C_PERSON",e)},expression:"WORKPLAN.C_PERSON"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"批准人",prop:"APPRPERSON","label-width":"85px"}},[a("el-input",{attrs:{disabled:t.noedit},model:{value:t.WORKPLAN.APPRPERSON,callback:function(e){t.$set(t.WORKPLAN,"APPRPERSON",e)},expression:"WORKPLAN.APPRPERSON"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"提报日期",prop:"REPORTDATE","label-width":"85px"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",disabled:t.noedit},model:{value:t.WORKPLAN.REPORTDATE,callback:function(e){t.$set(t.WORKPLAN,"REPORTDATE",e)},expression:"WORKPLAN.REPORTDATE "}})],1)])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"年度",prop:"YEAR","label-width":"85px"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"year",placeholder:"选择年度","value-format":"yyyy",format:"yyyy","default-value":t.WORKPLAN.YEAR,disabled:t.noedit},model:{value:t.WORKPLAN.YEAR,callback:function(e){t.$set(t.WORKPLAN,"YEAR",e)},expression:"WORKPLAN.YEAR"}})],1)])],1)],1)],1),t._v(" "),a("el-collapse-item",{staticClass:"ml30",attrs:{title:"年度计划列表",name:"2"}},[a("div",{staticClass:"table-func"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.viewtitle,expression:"!viewtitle"}],attrs:{type:"primary",size:"mini",round:""}},[a("i",{staticClass:"icon-upload-cloud"}),t._v(" "),a("font",[t._v("导入")])],1),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.viewtitle,expression:"!viewtitle"}],attrs:{type:"success",size:"mini",round:""},on:{click:t.addfield1}},[a("i",{staticClass:"icon-add"}),t._v(" "),a("font",[t._v("新建行")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadMore,expression:"loadMore"}],staticStyle:{width:"100%"},attrs:{data:t.worlplanlist,"header-cell-style":t.rowClass,"row-key":"ID",border:"",stripe:"",fit:!0,"highlight-current-row":"highlight-current-row","default-sort":{prop:"worlplanlist",order:"descending"}}},[t.viewtitle?t._e():a("el-table-column",{attrs:{prop:"iconOperation",fixed:"",width:"50px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditing?a("i",{staticClass:"el-icon-check",on:{click:function(a){t.iconOperation(e.row)}}}):t._e(),t._v(" "),e.row.isEditing?t._e():a("i",{staticClass:"el-icon-edit",on:{click:function(a){t.iconOperation(e.row)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"序号",sortable:"",width:"120px",prop:"WP_LINENUM"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditing?a("el-input",{attrs:{size:"small",disabled:""},model:{value:e.$index+1,callback:function(a){t.$set(e,"$index + 1",a)},expression:"scope.$index + 1"}}):t._e(),e.row.isEditing?t._e():a("span",[t._v(t._s(e.$index+1))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"ITEM_NAME",label:"产品名称",sortable:"",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditing?a("el-input",{attrs:{size:"small",placeholder:"请输入内容",disabled:!0},model:{value:e.row.ITEM_NAME,callback:function(a){t.$set(e.row,"ITEM_NAME",a)},expression:"scope.row.ITEM_NAME"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(a){t.addproduct(e.row)}},slot:"append"})],1):t._e(),t._v(" "),e.row.isEditing?t._e():a("span",[t._v(t._s(e.row.ITEM_NAME))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"MODEL",label:"规格型号",sortable:"",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditing?a("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.row.MODEL,callback:function(a){t.$set(e.row,"MODEL",a)},expression:"scope.row.MODEL"}}):a("span",[t._v(t._s(e.row.MODEL))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"V_NAME",label:"生产企业名称",sortable:"",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditing?a("el-input",{attrs:{size:"small",placeholder:"请输入内容",disabled:!0},model:{value:e.row.V_NAME,callback:function(a){t.$set(e.row,"V_NAME",a)},expression:"scope.row.V_NAME"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(a){t.prodeptbtn(e.row)}},slot:"append"})],1):a("span",[t._v(t._s(e.row.V_NAME))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"MEMO",label:"近三年监督抽查情况",sortable:"",width:"260px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditing?a("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.row.MEMO,callback:function(a){t.$set(e.row,"MEMO",a)},expression:"scope.row.MEMO"}}):a("span",[t._v(t._s(e.row.MEMO))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"CHECKCOST",label:"检测费用",sortable:"",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditing?a("el-input",{attrs:{size:"small",placeholder:"请输入内容",id:"cost"},on:{blur:function(a){t.toPrice(e.row)}},model:{value:e.row.CHECKCOST,callback:function(a){t.$set(e.row,"CHECKCOST",a)},expression:"scope.row.CHECKCOST"}}):a("span",{attrs:{id:"costshow"}},[t._v(t._s(e.row.CHECKCOST))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"REASION",label:"项目提出理由",sortable:"",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditing?a("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.row.REASION,callback:function(a){t.$set(e.row,"REASION",a)},expression:"scope.row.REASION"}}):a("span",[t._v(t._s(e.row.REASION))])]}}])}),t._v(" "),t.viewtitle?t._e():a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.viewtitle,expression:"!viewtitle"}],attrs:{type:"danger",circle:"",title:"删除",size:"small"},on:{click:function(a){t.delPlan(e.$index,e.row,"WORLPLANLINE","worlplanlist")}}},[a("i",{staticClass:"icon-trash"})]),t._v(" "),t.assignshow?a("el-button",{attrs:{type:"primary",circle:"",title:"下达任务通知书",size:"small"},on:{click:function(a){t.assign(e.row)}}},[a("i",{staticClass:"icon-send"})]):t._e()]}}])})],1)],1),t._v(" "),a("div",{staticClass:"el-collapse-item pt10 pr20 pb20 ml60",attrs:{"aria-expanded":"true",accordion:""}},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"检测依据",name:"first"}},[a("div",{staticClass:"table-func table-funcb"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isEditList,expression:"isEditList"}],attrs:{type:"primary",size:"mini",round:""},on:{click:t.basisleadbtn}},[a("i",{staticClass:"icon-search"}),t._v(" "),a("font",[t._v("选择")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":t.rowClass,data:t.basisList,border:"",stripe:"",fit:!0,"max-length":"260px","default-sort":{prop:"basisList",order:"descending"}}},[a("el-table-column",{attrs:{prop:"NUMBER",label:"序号",sortable:"",width:"150",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{prop:"WP_NUM",label:"所属计划编号",sortable:"",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditing?a("el-input",{attrs:{size:"small",disabled:""},model:{value:e.row.WP_NUM,callback:function(a){t.$set(e.row,"WP_NUM",a)},expression:"scope.row.WP_NUM"}}):a("span",[t._v(t._s(e.row.WP_NUM))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"WP_LINENUM",label:"所属计划序号",sortable:"",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"S_NUM",label:"标准编号",sortable:"",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"S_NAME",label:"标准名称",sortable:"",width:"350"}}),t._v(" "),a("el-table-column",{attrs:{prop:"VERSION",label:"版本",sortable:"",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.viewtitle?t._e():a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.delPlan(e.$index,e.row,"WORLPLANLINE_BASIS","basisList")}}},[a("i",{staticClass:"icon-trash red"})])]}}])})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"检测项目与要求",name:"second"}},[a("div",{staticClass:"table-func table-funcb"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isEditList,expression:"isEditList"}],attrs:{type:"primary",size:"mini",round:""},on:{click:t.basisleadbtn2}},[a("i",{staticClass:"icon-search"}),t._v(" "),a("font",[t._v("选择")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":t.rowClass,data:t.proTestList,border:"",stripe:"",fit:!0,"max-height":"260","default-sort":{prop:"proTestList",order:"descending"}}},[a("el-table-column",{attrs:{prop:"NUMBER",label:"序号",width:"150",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{prop:"WP_NUM",label:"所属计划编号",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditing?a("el-input",{attrs:{size:"small",disabled:""},model:{value:e.row.WP_NUM,callback:function(a){t.$set(e.row,"WP_NUM",a)},expression:"scope.row.WP_NUM"}}):a("span",[t._v(t._s(e.row.WP_NUM))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"所属计划序号",sortable:"",width:"120px",prop:"WP_LINENUM"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditing?a("el-input",{attrs:{size:"small",disabled:""},model:{value:e.row.WP_LINENUM,callback:function(a){t.$set(e.row,"WP_LINENUM",a)},expression:"scope.row.WP_LINENUM"}}):a("span",[t._v(t._s(e.row.WP_LINENUM))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"P_NUM",label:"检验项目编号",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"P_DESC",label:"检验项目描述",width:"250"}}),t._v(" "),a("el-table-column",{attrs:{prop:"REMARKS",label:"要求",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.row.REMARKS,callback:function(a){t.$set(e.row,"REMARKS",a)},expression:"scope.row.REMARKS"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"VERSION",label:"版本",width:"80"}}),t._v(" "),t.viewtitle?t._e():a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.viewtitle,expression:"!viewtitle"}],attrs:{type:"text",size:"small"},on:{click:function(a){t.delPlan(e.$index,e.row,"WORLPLANLINE_PROJECT","proTestList")}}},[a("i",{staticClass:"icon-trash red"})])]}}])})],1)],1)],1)],1),t._v(" "),a("el-collapse-item",{attrs:{title:"文件",name:"6"}},[a("doc-table",{ref:"docTable",attrs:{docParm:t.docParm},on:{saveParent:t.save}})],1),t._v(" "),a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:t.views,expression:"views"}],attrs:{title:"其他",name:"7"}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"录入人",prop:"ENTERBYDesc","label-width":"85px"}},[a("el-input",{attrs:{disabled:t.edit},model:{value:t.WORKPLAN.ENTERBYDesc,callback:function(e){t.$set(t.WORKPLAN,"ENTERBYDesc",e)},expression:"WORKPLAN.ENTERBYDesc"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"录入日期",prop:"ENTERDATE","label-width":"85px"}},[a("el-input",{attrs:{disabled:t.edit},model:{value:t.WORKPLAN.ENTERDATE,callback:function(e){t.$set(t.WORKPLAN,"ENTERDATE",e)},expression:"WORKPLAN.ENTERDATE"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"修改人",prop:"CHANGEBYDesc","label-width":"85px"}},[a("el-input",{attrs:{disabled:t.edit},model:{value:t.WORKPLAN.CHANGEBYDesc,callback:function(e){t.$set(t.WORKPLAN,"CHANGEBYDesc",e)},expression:"WORKPLAN.CHANGEBYDesc"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"修改日期",prop:"CHANGEDATE","label-width":"85px"}},[a("el-input",{attrs:{disabled:t.edit},model:{value:t.WORKPLAN.CHANGEDATE,callback:function(e){t.$set(t.WORKPLAN,"CHANGEDATE",e)},expression:"WORKPLAN.CHANGEDATE"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"机构",prop:"DEPTIDDesc","label-width":"85px"}},[a("el-input",{attrs:{disabled:t.edit},model:{value:t.WORKPLAN.DEPTIDDesc,callback:function(e){t.$set(t.WORKPLAN,"DEPTIDDesc",e)},expression:"WORKPLAN.DEPTIDDesc"}})],1)],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"el-dialog__footer"},[t.viewtitle?t._e():a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveAndUpdate("WORKPLAN")}}},[t._v("保存")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.addtitle,expression:"addtitle"}],attrs:{type:"success"},on:{click:function(e){t.saveAndSubmit("WORKPLAN")}}},[t._v("保存并继续")]),t._v(" "),t.viewtitle?t._e():a("el-button",{on:{click:t.close}},[t._v("取消")])],1)])],1)]),t._v(" "),a("el-dialog",{attrs:{"modal-append-to-body":!1,title:"检测依据",visible:t.dialogVisible,width:"80%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"pb10"},[a("el-form",{attrs:{model:t.searchList,"label-width":"70px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"标准编号",prop:"S_NUM"}},[a("el-input",{model:{value:t.searchList.S_NUM,callback:function(e){t.$set(t.searchList,"S_NUM",e)},expression:"searchList.S_NUM"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"标准名称",prop:"S_NAME"}},[a("el-input",{model:{value:t.searchList.S_NAME,callback:function(e){t.$set(t.searchList,"S_NAME",e)},expression:"searchList.S_NAME"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"版本",prop:"VERSION"}},[a("el-input",{model:{value:t.searchList.VERSION,callback:function(e){t.$set(t.searchList,"VERSION",e)},expression:"searchList.VERSION"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"机构",prop:"DEPTID"}},[a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择"},model:{value:t.searchList.DEPTID,callback:function(e){t.$set(t.searchList,"DEPTID",e)},expression:"searchList.DEPTID"}},t._l(t.selectData,function(t,e){return a("el-option",{key:e,attrs:{value:t.id,label:t.fullname}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发布时间",prop:"RELEASETIME"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"发布时间","value-format":"yyyy-MM-dd"},model:{value:t.searchList.RELEASETIME,callback:function(e){t.$set(t.searchList,"RELEASETIME",e)},expression:"searchList.RELEASETIME"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"启用时间",prop:"STARTETIME"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"启用时间","value-format":"yyyy-MM-dd"},model:{value:t.searchList.STARTETIME,callback:function(e){t.$set(t.searchList,"STARTETIME",e)},expression:"searchList.STARTETIME"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{"margin-top":"2px"},attrs:{type:"primary",size:"small"},on:{click:t.searchinfo}},[t._v("搜索")]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"2px","margin-left":"2px"},attrs:{type:"primary",size:"small"},on:{click:t.resetbtn}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadMore,expression:"loadMore"}],staticStyle:{width:"100%"},attrs:{data:t.standardList,height:"400px",border:"",stripe:"","default-sort":{prop:"standardList",order:"descending"}},on:{"selection-change":t.SelChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{label:"主键编号",width:"120",sortable:"",prop:"ID"}}),t._v(" "),a("el-table-column",{attrs:{label:"标准编号",width:"120",sortable:"",prop:"S_NUM"}}),t._v(" "),a("el-table-column",{attrs:{label:"标准名称",width:"220",sortable:"",prop:"S_NAME"}}),t._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"160",sortable:"",prop:"RELEASETIME"}}),t._v(" "),a("el-table-column",{attrs:{label:"启用时间",width:"160",sortable:"",prop:"STARTETIME"}}),t._v(" "),a("el-table-column",{attrs:{label:"版本",width:"100",sortable:"",prop:"VERSION"}}),t._v(" "),a("el-table-column",{attrs:{label:"机构",width:"180",sortable:"",prop:"DEPTIDDesc"}}),t._v(" "),a("el-table-column",{attrs:{label:"录入时间",width:"160",prop:"ENTERDATE",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"修改时间",width:"160",prop:"CHANGEDATE",sortable:""}})],1),t._v(" "),a("el-pagination",{staticClass:"pull-right pt10 pb10",attrs:{background:"","current-page":t.page.currentPage,"page-sizes":[10,20,30,40],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next",total:t.page.totalCount},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}),t._v(" "),a("div",{staticClass:"el-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addbasis}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"modal-append-to-body":!1,title:"检测项目测试与要求",visible:t.dialogVisible2,width:"80%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("div",{staticClass:"pb10"},[a("el-form",{attrs:{model:t.searchList,"label-width":"70px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"项目编号",prop:"P_NUM"}},[a("el-input",{model:{value:t.searchList.P_NUM,callback:function(e){t.$set(t.searchList,"P_NUM",e)},expression:"searchList.P_NUM"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"机构",prop:"DEPTID"}},[a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择"},model:{value:t.searchList.DEPTID,callback:function(e){t.$set(t.searchList,"DEPTID",e)},expression:"searchList.DEPTID"}},t._l(t.selectData,function(t,e){return a("el-option",{key:e,attrs:{value:t.id,label:t.fullname}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"项目名称",prop:"P_NAME"}},[a("el-input",{model:{value:t.searchList.P_NAME,callback:function(e){t.$set(t.searchList,"P_NAME",e)},expression:"searchList.P_NAME"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"版本",prop:"VERSION"}},[a("el-input",{model:{value:t.searchList.VERSION,callback:function(e){t.$set(t.searchList,"VERSION",e)},expression:"searchList.VERSION"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{"margin-top":"2px"},attrs:{type:"primary",size:"small"},on:{click:t.searchinfo}},[t._v("搜索")]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"2px","margin-left":"2px"},attrs:{type:"primary",size:"small"},on:{click:t.resetbtn}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadMore,expression:"loadMore"}],staticStyle:{width:"100%"},attrs:{data:t.projectList,height:"400px",border:"",stripe:"","default-sort":{prop:"projectList",order:"descending"}},on:{"selection-change":t.SelChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{label:"检验/检测项编号",width:"150",sortable:"",prop:"P_NUM"}}),t._v(" "),a("el-table-column",{attrs:{label:"项目名称",width:"220",sortable:"",prop:"P_NAME"}}),t._v(" "),a("el-table-column",{attrs:{label:"人员资质",width:"180",sortable:"",prop:"QUALIFICATION"}}),t._v(" "),a("el-table-column",{attrs:{label:"领域",width:"120",sortable:"",prop:"FIELD"}}),t._v(" "),a("el-table-column",{attrs:{label:"子领域",width:"120",sortable:"",prop:"CHILD_FIELD"}}),t._v(" "),a("el-table-column",{attrs:{label:"版本",width:"100",sortable:"",prop:"VERSION"}}),t._v(" "),a("el-table-column",{attrs:{label:"机构",width:"180",sortable:"",prop:"DEPTIDDesc"}}),t._v(" "),a("el-table-column",{attrs:{label:"录入时间",width:"160",prop:"ENTERDATE",sortable:"",formatter:t.dateFormat}}),t._v(" "),a("el-table-column",{attrs:{label:"修改时间",width:"160",prop:"CHANGEDATE",sortable:"",formatter:t.dateFormat}})],1),t._v(" "),a("el-pagination",{staticClass:"pull-right pt10 pb10",attrs:{background:"","current-page":t.page.currentPage,"page-sizes":[10,20,30,40],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next",total:t.page.totalCount},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}),t._v(" "),a("span",{staticClass:"el-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addbasis2}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogVisible2=!1}}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"modal-append-to-body":!1,title:"产品类别",height:"400px",visible:t.dialogVisible3,width:"80%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible3=e}}},[a("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadMore,expression:"loadMore"}],staticStyle:{width:"100%"},attrs:{"header-cell-style":t.rowClass,data:t.categoryList,border:"",stripe:"",height:"400px","default-sort":{prop:"categoryList",order:"descending"}},on:{"selection-change":t.SelChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"编码",width:"155",sortable:"",prop:"NUM"}}),t._v(" "),a("el-table-column",{attrs:{label:"名称",sortable:"",prop:"TYPE"}}),t._v(" "),a("el-table-column",{attrs:{label:"版本",width:"100",sortable:"",prop:"VERSION",align:"right"}}),t._v(" "),a("el-table-column",{attrs:{label:"机构",width:"185",sortable:"",prop:"DEPTIDDesc"}}),t._v(" "),a("el-table-column",{attrs:{label:"录入时间",width:"120",prop:"ENTERDATE",sortable:"",formatter:t.dateFormat}}),t._v(" "),a("el-table-column",{attrs:{label:"修改时间",width:"120",prop:"CHANGEDATE",sortable:"",formatter:t.dateFormat}})],1),t._v(" "),a("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":t.page.currentPage,"page-sizes":[10,20,30,40,100],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next",total:t.page.totalCount},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}),t._v(" "),a("span",{staticClass:"el-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addproclass}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogVisible3=!1}}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"modal-append-to-body":!1,title:"产品名称",visible:t.dialogVisible4,width:"80%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible4=e}}},[a("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadMore,expression:"loadMore"}],staticStyle:{width:"100%"},attrs:{"header-cell-style":t.rowClass,data:t.productList,"line-center":"",border:"",stripe:"",height:"400px","default-sort":{prop:"productList",order:"descending"}},on:{"selection-change":t.SelChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"编码",width:"155",sortable:"",prop:"PRO_NUM"}}),t._v(" "),a("el-table-column",{attrs:{label:"名称",sortable:"",prop:"PRO_NAME"}}),t._v(" "),a("el-table-column",{attrs:{label:"版本",width:"100",sortable:"",prop:"VERSION",align:"right"}}),t._v(" "),a("el-table-column",{attrs:{label:"机构",width:"185",sortable:"",prop:"DEPTIDDesc"}}),t._v(" "),a("el-table-column",{attrs:{label:"录入时间",width:"120",prop:"ENTERDATE",sortable:"",formatter:t.dateFormat}}),t._v(" "),a("el-table-column",{attrs:{label:"修改时间",width:"120",prop:"CHANGEDATE",sortable:"",formatter:t.dateFormat}})],1),t._v(" "),a("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":t.page.currentPage,"page-sizes":[10,20,30,40,100],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next",total:t.page.totalCount},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}),t._v(" "),a("span",{staticClass:"el-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addproname}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogVisible4=!1}}},[t._v("取 消")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"modal-append-to-body":!1,visible:t.diaVisCustom,width:"80%","before-close":t.handleClose},on:{"update:visible":function(e){t.diaVisCustom=e}}},[a("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadMore,expression:"loadMore"}],staticStyle:{width:"100%"},attrs:{data:t.customerList,border:"",stripe:"","header-cell-style":t.rowClass,height:t.fullHeight,"default-sort":{prop:"customerList",order:"descending"}},on:{"selection-change":t.SelChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",fixed:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"组织机构代码",width:"200",sortable:"",prop:"CODE"}}),t._v(" "),a("el-table-column",{attrs:{label:"单位名称",width:"300",sortable:"",prop:"NAME"}}),t._v(" "),a("el-table-column",{attrs:{label:"联系地址",sortable:"",prop:"CONTACT_ADDRESS"}})],1),t._v(" "),a("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":t.page.currentPage,"page-sizes":[10,20,30,40],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next",total:t.page.totalCount},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}),t._v(" "),a("div",{staticClass:"el-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.diaVisCustom=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.adddeptname}},[t._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var l=function(t){a("7AIa")},r=a("VU/8")(s.a,i,!1,l,null,null);e.a=r.exports},LKxQ:function(t,e,a){"use strict";(function(t){var s=a("QmSG"),i=a("GkRW"),l=a("hbvp"),r=a("h7vj"),o=a("KSSO"),n=a("Tpxl"),c=a("jk2w");e.a={name:"annual_plan",components:{vheader:i.a,navs_header:r.a,navs_left:l.a,"v-assetsTree":n.a,annualmask:o.a,reportmask:c.a},data:function(){return{reportData:{},loading:!1,basic_url:s.a.dev_url,ismin:!0,loadSign:!0,fullHeight:document.documentElement.clientHeight-210+"px",checkedName:["编号","描述","年度","类型","产品类别","提出单位","提报日期","编辑状态","执行状态","执行状态","录入时间","修改时间"],tableHeader:[{label:"编号",prop:"WP_NUM"},{label:"描述",prop:"DESCRIPTION"},{label:"年度",prop:"YEAR"},{label:"类型",prop:"TYPE"},{label:"产品类别",prop:"ITEMTYPE"},{label:"提出单位",prop:"PROP_UNITEDesc"},{label:"提报日期",prop:"REPORTDATE"},{label:"执行状态",prop:"LEADER_STATUSDesc"},{label:"录入时间",prop:"ENTERDATE"},{label:"修改时间",prop:"CHANGEDATE"}],companyId:"",deptId:"",selUser:[],userList:[],search:!1,show:!1,down:!0,up:!1,searchList:{WP_NUM:"",DESCRIPTION:"",TYPE:"",YEAR:"",ENTERDATE:"",ENTERBY:"",STATUS:"",LEADER_STATUS:""},resourceData:[{label:"监督抽查"},{label:"质量抽查"}],resourceDialogisShow:!1,resourceCheckedKey:[],resourceProps:{label:"label"},treeData:[],userData:[],page:{currentPage:1,pageSize:20,totalCount:0}}},methods:{loadMore:function(){var t=this,e=sessionStorage.getItem("up2down");if(this.loadSign){if("down"==e){if(this.page.currentPage++,this.page.currentPage>Math.ceil(this.page.totalCount/this.page.pageSize))return this.page.currentPage=Math.ceil(this.page.totalCount/this.page.pageSize),!1}else if(this.page.currentPage--,this.page.currentPage<1)return this.page.currentPage=1,!1;this.loadSign=!1,setTimeout(function(){t.loadSign=!0},1e3),this.requestData()}},rowClass:function(t){t.row,t.rowIndex;return"text-align:center"},renderContent:function(t,e){var a=e.node,s=e.data;e.store;return t("span",[t("i",{class:s.iconClass}),t("span",[a.label])])},nodeClick:function(t){"icon-file-text"!=t.iconClass&&("icon-file-normal"==t.iconClass?t.iconClass="icon-file-open":t.iconClass="icon-file-normal"),this.handleNodeClick()},test:function(){console.log(-1!=this.checkedName.indexOf("账号"))},sizeChange:function(t){this.page.pageSize=t,this.requestData()},currentChange:function(t){this.page.currentPage=t,this.requestData()},searchinfo:function(t){this.page.currentPage=1,this.page.pageSize=20,this.requestData()},resetbtn:function(){this.searchList={WP_NUM:"",DESCRIPTION:"",TYPE:"",YEAR:"",ENTERDATE:"",ENTERBY:"",STATUS:"",LEADER_STATUS:""},this.requestData()},openAddMgr:function(){this.$refs.child.visible()},modify:function(){0!=this.selUser.length?this.selUser.length>1?this.$message({message:"不可同时修改多个数据",type:"warning"}):this.$refs.child.detail(this.selUser[0].ID):this.$message({message:"请您选择要修改的数据",type:"warning"})},view:function(t){this.$refs.child.view(t)},modestsearch:function(){this.search=!this.search,this.down=!this.down,this.up=!this.up},deluserinfo:function(){var t=this,e=this.selUser;if(0!=e.length){for(var a=this.basic_url+"/api-apps/app/workplan/deletes",s=e,i=[],l=0;l<s.length;l++)i.push(s[l].ID);var r={ids:i.toString(",")};this.$confirm("确定删除此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){e.value;t.$axios.delete(a,{params:r}).then(function(e){0==e.data.resp_code?(t.$message({message:"删除成功",type:"success"}),t.requestData()):t.$message({message:e.data.resp_msg,type:"warning"})}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要删除的数据",type:"warning"})},exportData:function(){var t=this.basic_url+"/api-apps/app/workplan/exportExc?access_token="+sessionStorage.getItem("access_token"),e=new XMLHttpRequest;e.open("POST",t,!0),e.responseType="blob",e.setRequestHeader("client_type","DESKTOP_WEB"),e.onload=function(){if(200==this.status){var t=this.response,e=document.createElement("a"),a=URL.createObjectURL(t);e.href=a,e.download="workplan.xls",e.click()}},e.send()},reportdata:function(){this.reportData.app=this.productType,this.$refs.reportChild.visible()},releasebtn:function(){var t=this,e=this.selUser;if(0!=e.length){for(var a,s=e,i=[],l=0;l<s.length;l++)i.push(s[l].ID);a=i.toString(",");var r=this.basic_url+"/api-apps/app/workplan/operate/release?ids="+a;this.$confirm("确定发布此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){e.value;t.$axios.get(r,{}).then(function(e){0==e.data.resp_code?(t.$message({message:"发布成功",type:"success"}),t.requestData()):t.$message({message:e.data.resp_msg,type:"warning"})}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要发布的数据",type:"warning"})},cancelbtn:function(){var t=this,e=this.selUser;if(0!=e.length){for(var a,s=e,i=[],l=0;l<s.length;l++)i.push(s[l].ID);a=i.toString(",");var r=this.basic_url+"/api-apps/app/workplan/operate/cancel?ids="+a;this.$confirm("确定发布此数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){e.value;t.$axios.get(r,{}).then(function(e){0==e.data.resp_code?(t.$message({message:"取消成功",type:"success"}),t.requestData()):t.$message({message:e.data.resp_msg,type:"warning"})}).catch(function(e){t.$message({message:"网络错误，请重试",type:"error"})})}).catch(function(){})}else this.$message({message:"请您选择要取消的数据",type:"warning"})},dateFormat:function(t,e){var a=t[e.property];return void 0==a?"":this.$moment(a).format("YYYY-MM-DD")},SelChange:function(t){this.selUser=t},requestData:function(t){var e=this;this.loading=!0;var a={page:this.page.currentPage,limit:this.page.pageSize,WP_NUM:this.searchList.WP_NUM,DESCRIPTION:this.searchList.DESCRIPTION,TYPE:this.searchList.TYPE,YEAR:this.searchList.YEAR,ENTERDATE:this.searchList.ENTERDATE,ENTERBY:this.searchList.ENTERBY,STATUS:this.searchList.STATUS,LEADER_STATUS:this.searchList.LEADER_STATUS},s=this.basic_url+"/api-apps/app/workplan";this.$axios.get(s,{params:a}).then(function(t){e.page.totalCount=t.data.count;for(var a=0;a<t.data.data.length;a++)"1"==t.data.data[a].TYPE?t.data.data[a].TYPE="监督抽查":"3"==t.data.data[a].TYPE&&(t.data.data[a].TYPE="质量抽查");e.userList=t.data.data,e.loading=!1}).catch(function(t){e.$message({message:"网络错误，请重试1",type:"error"})})},transformTree:function(e){for(var a=0;a<e.length;a++)e[a].name=e[a].fullname,!e[a].pid||t.isArray(e[a].subDepts)?e[a].iconClass="icon-file-normal":e[a].iconClass="icon-file-text",t.isArray(e[a].subDepts)&&(e[a].children=this.transformTree(e[a].subDepts));return e},getTreeId:function(t){"1"==t.type?(this.companyId=t.id,this.deptId=""):(this.deptId=t.id,this.companyId=""),this.requestData()},handleNodeClick:function(t){"监督抽查"==t.label?this.searchList.TYPE="1":"质量抽查"==t.label&&(this.searchList.TYPE="3"),this.requestData()},formatter:function(t,e){return t.enabled},min3max:function(){t(".lefttree").hasClass("el-col-5")?(t(".lefttree").removeClass("el-col-5"),t(".lefttree").addClass("el-col-1"),t(".leftcont").removeClass("el-col-19"),t(".leftcont").addClass("el-col-23"),t(".icon-doubleok").removeClass("icon-double-angle-left"),t(".icon-doubleok").addClass("icon-double-angle-right")):(t(".lefttree").removeClass("el-col-1"),t(".lefttree").addClass("el-col-5"),t(".leftcont").removeClass("el-col-23"),t(".leftcont").addClass("el-col-19"),t(".icon-doubleok").removeClass("icon-double-angle-right"),t(".icon-doubleok").addClass("icon-double-angle-left")),this.ismin=!this.ismin},childByValue:function(t){this.$refs.navsheader.showClick(t)}},mounted:function(){this.requestData()}}}).call(e,a("7t+N"))},Tpxl:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticStyle:{width:"280px"}},[a("vue-ztree",{attrs:{list:t.listData,func:t.nodeClick,expand:t.expandClick},on:{"update:list":function(e){t.listData=e}}})],1)])},staticRenderFns:[]};var i=a("VU/8")({data:function(){return{}},methods:{nodeClick:function(t){"icon-file-text"!=t.iconClass&&("icon-file-normal"==t.iconClass?t.iconClass="icon-file-open":t.iconClass="icon-file-normal"),this.$emit("getTreeId",t)},expandClick:function(t){"icon-file-text"!=t.iconClass&&("icon-file-normal"==t.iconClass?t.iconClass="icon-file-open":t.iconClass="icon-file-normal"),t.isFolder=!t.isFolder}},props:["listData"]},s,!1,function(t){a("GGsb")},null,null);e.a=i.exports},ZYkT:function(t,e){},s2h3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("LKxQ"),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"headerbg"},[a("vheader"),t._v(" "),a("navs_header",{ref:"navsheader"})],1),t._v(" "),a("div",{staticClass:"contentbg"},[a("div",{staticStyle:{display:"none"}},[a("navs_left",{ref:"navleft",on:{childByValue:t.childByValue}})],1),t._v(" "),a("div",{staticClass:"wrapper wrapper-content wrapperall"},[a("div",{staticClass:"ibox-content"},[a("div",{staticClass:"fixed-table-toolbar clearfix"},[a("div",{staticClass:"bs-bars pull-left"},[a("div",{staticClass:"hidden-xs",attrs:{id:"roleTableToolbar",role:"group"}},[a("button",{staticClass:"btn btn-green",attrs:{type:"button",id:""},on:{click:t.openAddMgr}},[a("i",{staticClass:"icon-add"}),t._v("添加\n                      \t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-blue button-margin",attrs:{type:"button"},on:{click:t.modify}},[a("i",{staticClass:"icon-edit"}),t._v("修改\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-red button-margin",attrs:{type:"button"},on:{click:t.deluserinfo}},[a("i",{staticClass:"icon-trash"}),t._v("删除\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.exportData}},[a("i",{staticClass:"icon-inventory-line-callout"}),t._v("导出\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.reportdata}},[a("i",{staticClass:"icon-clipboard"}),t._v("报表\n\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.releasebtn}},[a("i",{staticClass:"icon-send"}),t._v("发布\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.cancelbtn}},[a("i",{staticClass:"icon-close1"}),t._v("取消\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:t.modestsearch}},[a("i",{staticClass:"icon-search"}),t._v("高级查询\n\t\t\t\t\t\t    \t\t"),a("i",{directives:[{name:"show",rawName:"v-show",value:t.down,expression:"down"}],staticClass:"icon-arrow1-down"}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.up,expression:"up"}],staticClass:"icon-arrow1-up"})])])]),t._v(" "),a("div",{staticClass:"columns columns-right btn-group pull-right"},[t._m(0),t._v(" "),a("div",{staticClass:"keep-open btn-group",attrs:{title:"列"}},[a("el-dropdown",{staticClass:"pl10 btn btn-default btn-outline",attrs:{"hide-on-click":!1}},[a("span",{staticClass:"el-dropdown-link"},[a("font",{staticClass:"J_tabClose"},[a("i",{staticClass:"icon-menu3"})]),t._v(" "),a("i",{staticClass:"el-icon-arrow-down icon-arrow2-down"})],1),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-checkbox-group",{on:{change:t.test},model:{value:t.checkedName,callback:function(e){t.checkedName=e},expression:"checkedName"}},t._l(t.tableHeader,function(t,e){return a("el-dropdown-item",{key:e},[a("el-checkbox",{attrs:{label:t.label,name:"type"}})],1)}))],1)],1)],1)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.search,expression:"search"}]},[a("el-form",{attrs:{model:t.searchList,"label-width":"70px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"编号",prop:"WP_NUM"}},[a("el-input",{model:{value:t.searchList.WP_NUM,callback:function(e){t.$set(t.searchList,"WP_NUM",e)},expression:"searchList.WP_NUM"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"描述",prop:"DESCRIPTION"}},[a("el-input",{model:{value:t.searchList.DESCRIPTION,callback:function(e){t.$set(t.searchList,"DESCRIPTION",e)},expression:"searchList.DESCRIPTION"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"年度",prop:"YEAR","label-width":"45px"}},[a("el-input",{model:{value:t.searchList.YEAR,callback:function(e){t.$set(t.searchList,"YEAR",e)},expression:"searchList.YEAR"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"录入时间",prop:"ENTERDATE"}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"录入时间","value-format":"yyyy-MM-dd"},model:{value:t.searchList.ENTERDATE,callback:function(e){t.$set(t.searchList,"ENTERDATE",e)},expression:"searchList.ENTERDATE"}})],1)])],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"编辑状态",prop:"STATUS"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.searchList.STATUS,callback:function(e){t.$set(t.searchList,"STATUS",e)},expression:"searchList.STATUS"}},[a("el-option",{attrs:{label:"草稿",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"审批中",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"驳回",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"已发布",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"已取消",value:"4"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"执行状态",prop:"LEADER_STATUS"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.searchList.LEADER_STATUS,callback:function(e){t.$set(t.searchList,"LEADER_STATUS",e)},expression:"searchList.LEADER_STATUS"}},[a("el-option",{attrs:{label:"未开始",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"进行中",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"已完成",value:"3"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"类型",prop:"TYPE","label-width":"45px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择"},model:{value:t.searchList.TYPE,callback:function(e){t.$set(t.searchList,"TYPE",e)},expression:"searchList.TYPE"}},[a("el-option",{attrs:{label:"监督抽查",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"质量抽查",value:"3"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{"margin-top":"2px"},attrs:{type:"primary",size:"small"},on:{click:t.searchinfo}},[t._v("搜索")]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"2px","margin-left":"2px"},attrs:{type:"primary",size:"small"},on:{click:t.resetbtn}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"lefttree",attrs:{span:5}},[a("div",{staticClass:"lefttreebg"},[a("div",{staticClass:"left_tree_title clearfix",on:{click:function(e){t.min3max()}}},[t.ismin?a("div",{staticClass:"pull-left pr20"},[t._v("类型")]):t._e(),t._v(" "),a("span",{staticClass:"pull-right navbar-minimalize minimalize-styl-2"},[a("i",{staticClass:"icon-doubleok icon-double-angle-left blue"})])]),t._v(" "),a("div",{staticClass:"left_treebg",style:{height:t.fullHeight}},[t.ismin?a("div",{staticClass:"p15"},[a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:t.resourceData,"node-key":"id","default-expand-all":"",indent:22,"render-content":t.renderContent,props:t.resourceProps},on:{"node-click":t.handleNodeClick}})],1):t._e()])])]),t._v(" "),a("el-col",{staticClass:"leftcont v-resize",attrs:{span:19}},[a("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadMore,expression:"loadMore"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"header-cell-style":t.rowClass,data:t.userList,border:"",stripe:"",height:t.fullHeight,"default-sort":{prop:"userList",order:"descending"},"element-loading-text":"加载中…","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.9)"},on:{"selection-change":t.SelChange}},[this.checkedName.length>0?a("el-table-column",{attrs:{type:"selection",width:"55",fixed:"",align:"center"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("编号")?a("el-table-column",{attrs:{label:"编号",sortable:"",width:"100px",prop:"WP_NUM"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticClass:"blue",attrs:{title:"点击查看详情"},on:{click:function(a){t.view(e.row.ID)}}},[t._v(t._s(e.row.WP_NUM)+"\n\t\t\t\t\t\t\t\t\t\t")])]}}])}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("描述")?a("el-table-column",{attrs:{label:"描述",sortable:"",width:"200px",prop:"DESCRIPTION"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("年度")?a("el-table-column",{attrs:{label:"年度",sortable:"",width:"80px",prop:"YEAR"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("类型")?a("el-table-column",{attrs:{label:"类型",sortable:"",width:"100px",prop:"TYPE"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("产品类别")?a("el-table-column",{attrs:{label:"产品类别",sortable:"",width:"100px",prop:"ITEMTYPE"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("提出单位")?a("el-table-column",{attrs:{label:"提出单位",sortable:"",width:"100px",prop:"PROP_UNITDesc"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("提报日期")?a("el-table-column",{attrs:{label:"提报日期",sortable:"",width:"140px",prop:"REPORTDATE",formatter:t.dateFormat}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("编辑状态")?a("el-table-column",{attrs:{label:"编辑状态",sortable:"",width:"100px",prop:"STATUSDesc"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("执行状态")?a("el-table-column",{attrs:{label:"执行状态",sortable:"",width:"120px",prop:"LEADER_STATUSDesc"}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("录入时间")?a("el-table-column",{attrs:{label:"录入时间",sortable:"",width:"140px",prop:"ENTERDATE",formatter:t.dateFormat}}):t._e(),t._v(" "),-1!=this.checkedName.indexOf("修改时间")?a("el-table-column",{attrs:{label:"修改时间",sortable:"",width:"140px",prop:"ENTERDATE",formatter:t.dateFormat}}):t._e()],1),t._v(" "),this.checkedName.length>0?a("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":t.page.currentPage,"page-sizes":[10,20,30,40,100],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next",total:t.page.totalCount},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}):t._e()],1)],1)],1)])]),t._v(" "),a("annualmask",{ref:"child",attrs:{page:t.page},on:{request:t.requestData}}),t._v(" "),a("reportmask",{ref:"reportChild",attrs:{reportData:t.reportData}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn btn-default btn-refresh",attrs:{id:"refresh",title:"刷新"}},[e("i",{staticClass:"icon-refresh"})])}]};var l=function(t){a("ZYkT")},r=a("VU/8")(s.a,i,!1,l,"data-v-f63bd83a",null);e.default=r.exports}});
//# sourceMappingURL=7.7ea8e3ed7c2274a73d55.js.map