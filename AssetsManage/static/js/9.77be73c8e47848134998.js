webpackJsonp([9],{J6wJ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("QmSG"),i=s("GkRW"),l=s("hbvp"),o=s("h7vj"),n=s("wcw1"),r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.show?s("div",{staticClass:"mask"}):e._e(),e._v(" "),e.show?s("div",{staticClass:"mask_divbg"},[s("div",{staticClass:"mask_div"},[s("div",{staticClass:"mask_title_div clearfix"},[s("div",{staticClass:"mask_title"},[e._v("添加流程模型")]),e._v(" "),s("div",{staticClass:"mask_anniu"},[s("span",{staticClass:"mask_span mask_max",on:{click:e.toggle}},[s("i",{class:{"icon-maximization":e.isok1,"icon-restore":e.isok2}})]),e._v(" "),s("span",{staticClass:"mask_span",on:{click:e.close}},[s("i",{staticClass:"icon-close1"})])])]),e._v(" "),s("div",{staticClass:"mask_content"},[s("el-form",{ref:"modelflow",attrs:{model:e.modelflow,"inline-message":"",rules:e.rules,"label-width":"100px"}},[s("div",{staticClass:"accordion",attrs:{id:"information"}},[s("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[s("el-collapse-item",{attrs:{title:"新建模型",name:"1"}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"模型标识",prop:"key"}},[s("el-input",{model:{value:e.modelflow.key,callback:function(t){e.$set(e.modelflow,"key",t)},expression:"modelflow.key"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"模型类型",prop:"category"}},[s("el-input",{model:{value:e.modelflow.category,callback:function(t){e.$set(e.modelflow,"category",t)},expression:"modelflow.category"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"模型名称",prop:"name"}},[s("el-input",{model:{value:e.modelflow.name,callback:function(t){e.$set(e.modelflow,"name",t)},expression:"modelflow.name"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{label:"模型描述",prop:"description"}},[s("el-input",{model:{value:e.modelflow.description,callback:function(t){e.$set(e.modelflow,"description",t)},expression:"modelflow.description"}})],1)],1)],1)],1)],1),e._v(" "),s("div",{staticClass:"el-dialog__footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.saveAndUpdate}},[e._v("保存")]),e._v(" "),s("el-button",{on:{click:e.close}},[e._v("取消")])],1)])],1),e._v(" "),s("iframemask",{ref:"child",attrs:{modelId:e.modelId}})],1)]):e._e()])},staticRenderFns:[]};var c=function(e){s("eMwH")},d=s("VU/8")(n.a,r,!1,c,null,null).exports,m=s("JXdT"),u={name:"task",components:{vheader:i.a,navs_header:o.a,navs_left:l.a,flowmanmask:d,iframemask:m.a},data:function(){return{loading:!1,basic_url:a.a.dev_url,fullHeight:document.documentElement.clientHeight-210+"px",search:!1,flowmodelList:[],commentArr:{},checkedName:["编号","类型","模型标识","模型名称","模型版本","创建时间"],tableHeader:[{label:"编号",prop:"id"},{label:"类型",prop:"category"},{label:"模型标识",prop:"key"},{label:"模型名称",prop:"name"},{label:"模型版本",prop:"version"},{label:"创建时间",prop:"createTime"}],searchList:{createTime:""},page:{currentPage:1,pageSize:10,totalCount:0}}},methods:{rowClass:function(e){e.row,e.rowIndex;return"text-align:center"},SelChange:function(e){this.selUser=e},sizeChange:function(e){this.page.pageSize=e,this.requestData()},currentChange:function(e){this.page.currentPage=e,this.requestData()},loadMore:function(){var e=this;if(this.loadSign){if(this.loadSign=!1,this.page.currentPage++,this.page.currentPage>Math.ceil(this.page.totalCount/this.page.pageSize))return;setTimeout(function(){e.loadSign=!0},1e3),this.requestData()}},openAddMgr:function(){this.$refs.child.visible()},requestData:function(){var e=this;this.loading=!0;var t=this.basic_url+"/api-flow/flow/model";this.$axios.get(t,{}).then(function(t){e.page.totalCount=t.data.count;var s=Math.ceil(e.page.totalCount/e.page.pageSize);e.page.currentPage>=s?e.loadSign=!1:e.loadSign=!0,e.commentArr[e.page.currentPage]=t.data.data;for(var a=[],i=1;i<=s;i++)if(void 0!==e.commentArr[i]&&e.commentArr[i].length>0)for(var l=0;l<e.commentArr[i].length;l++)a.push(e.commentArr[i][l]);e.flowmodelList=a,e.loading=!1}).catch(function(e){})},editor:function(){0!=this.selUser.length?this.selUser.length>1?this.$message({message:"不可同时修改多个流程",type:"warning"}):(console.log(this.selUser[0]),this.$refs.childIframe.visible(this.selUser[0].id)):this.$message({message:"请您选择要修改的流程",type:"warning"})},delinfo:function(){var e=this,t=this.selUser;if(0!=t.length)if(t.length>1)this.$message({message:"不可同时删除多个数据",type:"warning"});else{var s=t[0].id;console.log(s);var a=this.basic_url+"/api-flow/flow/model/"+s;this.$axios.delete(a,{}).then(function(t){0==t.data.resp_code&&(e.$message({message:"删除成功",type:"success"}),e.requestData())}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})}else this.$message({message:"请您选择要删除的数据",type:"warning"})},release:function(){var e=this;if(0!=this.selUser.length)if(this.selUser.length>1)this.$message({message:"不可同时修改多个流程",type:"warning"});else{console.log(this.selUser[0]),console.log(this.selUser[0].deploymentId);var t=this.selUser[0].id,s=this.basic_url+"/api-flow/flow/model/"+t+"/deploy";console.log(s),this.$axios.get(s,{}).then(function(t){console.log(t),0==t.data.resp_code?(e.$message({message:"res.data.resp_msg",type:"success"}),e.requestData()):e.$message({message:"res.data.resp_msg",type:"warning"})}).catch(function(t){e.$message({message:"网络错误，请重试",type:"error"})})}else this.$message({message:"请您选择要修改的流程",type:"warning"})},childByValue:function(e){this.$refs.navsheader.showClick(e)}},mounted:function(){this.requestData()}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"headerbg"},[s("vheader"),e._v(" "),s("navs_header",{ref:"navsheader"})],1),e._v(" "),s("div",{staticClass:"contentbg"},[s("navs_left",{ref:"navleft",on:{childByValue:e.childByValue}}),e._v(" "),s("div",{staticClass:"wrapper",attrs:{id:"wrapper-content"}},[s("div",{staticClass:"ibox-content"},[s("div",{staticClass:"fixed-table-toolbar clearfix"},[s("div",{staticClass:"bs-bars pull-left"},[s("div",{staticClass:"hidden-xs",attrs:{id:"roleTableToolbar",role:"group"}},[s("button",{staticClass:"btn btn-green",attrs:{type:"button"},on:{click:e.openAddMgr}},[s("i",{staticClass:"icon-add"}),e._v("添加\r\n                      \t\t\t ")]),e._v(" "),s("button",{staticClass:"btn btn-blue button-margin",attrs:{type:"button"},on:{click:e.editor}},[s("i",{staticClass:"icon-edit"}),e._v("编辑\r\n\t\t\t\t\t\t\t\t")]),e._v(" "),s("button",{staticClass:"btn btn-red button-margin",attrs:{type:"button"},on:{click:e.delinfo}},[s("i",{staticClass:"icon-trash"}),e._v("删除\r\n\t\t\t\t\t\t\t\t")]),e._v(" "),s("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"},on:{click:e.release}},[s("i",{staticClass:"icon-upload-cloud"}),e._v("发布\r\n\t\t\t\t\t\t\t\t")]),e._v(" "),e._m(0),e._v(" "),e._m(1)])]),e._v(" "),s("div",{staticClass:"columns columns-right btn-group pull-right"},[e._m(2),e._v(" "),s("div",{staticClass:"keep-open btn-group",attrs:{title:"列"}},[s("el-dropdown",{staticClass:"pl10 btn btn-default btn-outline",attrs:{"hide-on-click":!1}},[s("span",{staticClass:"el-dropdown-link"},[s("font",{staticClass:"J_tabClose"},[s("i",{staticClass:"icon-menu3"})]),e._v(" "),s("i",{staticClass:"el-icon-arrow-down icon-arrow2-down"})],1),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-checkbox-group",{model:{value:e.checkedName,callback:function(t){e.checkedName=t},expression:"checkedName"}},e._l(e.tableHeader,function(e,t){return s("el-dropdown-item",{key:t},[s("el-checkbox",{attrs:{label:e.label,name:"type"}})],1)}))],1)],1)],1)])]),e._v(" "),s("el-row",{attrs:{gutter:10}},[s("el-col",{staticClass:"leftcont v-resize",attrs:{span:24}},[s("el-table",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.loadMore,expression:"loadMore"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.flowmodelList,"header-cell-style":e.rowClass,border:"",stripe:"",height:e.fullHeight,"default-sort":{prop:"inspectList",order:"descending"},"element-loading-text":"加载中…","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.9)"},on:{"selection-change":e.SelChange}},[this.checkedName.length>0?s("el-table-column",{attrs:{type:"selection",width:"55",fixed:"",align:"center"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("编号")?s("el-table-column",{attrs:{label:"编号",sortable:"",width:"130px",prop:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"blue",attrs:{title:"点击查看详情"},on:{click:function(s){e.view(t.row.ID)}}},[e._v(e._s(t.row.id)+"\r\n\t\t\t\t\t\t\t\t\t\t")])]}}])}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("类型")?s("el-table-column",{attrs:{label:"类型",sortable:"",width:"140px",prop:"category"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("模型标识")?s("el-table-column",{attrs:{label:"模型标识",sortable:"",width:"140px",prop:"key"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("模型名称")?s("el-table-column",{attrs:{label:"模型名称",sortable:"",width:"140px",prop:"name"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("模型版本")?s("el-table-column",{attrs:{label:"模型版本",sortable:"",width:"140px",prop:"version"}}):e._e(),e._v(" "),-1!=this.checkedName.indexOf("创建时间")?s("el-table-column",{attrs:{label:"创建时间",width:"200px",prop:"createTime",sortable:""}}):e._e()],1),e._v(" "),this.checkedName.length>0?s("el-pagination",{staticClass:"pull-right pt10",attrs:{background:"","current-page":e.page.currentPage,"page-sizes":[10,20,30,40],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.totalCount},on:{"size-change":e.sizeChange,"current-change":e.currentChange}}):e._e()],1)],1)],1)])],1),e._v(" "),s("flowmanmask",{ref:"child",on:{request:e.requestData}}),e._v(" "),s("iframemask",{ref:"childIframe"})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"}},[t("i",{staticClass:"icon-download-cloud"}),this._v("导出\r\n\t\t\t\t\t\t\t\t")])},function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"btn btn-primarys button-margin",attrs:{type:"button"}},[t("i",{staticClass:"icon-print"}),this._v("打印\r\n\t\t\t\t\t\t\t\t")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"btn btn-default btn-refresh",attrs:{id:"refresh",title:"刷新"}},[t("i",{staticClass:"icon-refresh"})])}]};var p=s("VU/8")(u,h,!1,function(e){s("vB22")},null,null);t.default=p.exports},JXdT:function(e,t,s){"use strict";var a=s("s79F"),i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.show?s("div",{staticClass:"masks"}):e._e(),e._v(" "),e.show?s("div",{staticClass:"mask_divbg"},[s("div",{staticClass:"masks_div"},[s("div",{staticClass:"mask_title_div clearfix"},[s("div",{staticClass:"mask_title"},[e._v("添加流程模型")]),e._v(" "),s("div",{staticClass:"mask_anniu"},[s("span",{staticClass:"mask_span mask_max",on:{click:e.toggle}},[s("i",{class:{"icon-maximization":e.isok1,"icon-restore":e.isok2}})]),e._v(" "),s("span",{staticClass:"mask_span",on:{click:e.close}},[s("i",{staticClass:"icon-close1"})])])]),e._v(" "),s("iframe",{attrs:{src:this.url+"/designer/modeler.html?modelId="+this.modelId,id:"flowIframe",width:"100%",height:"100%",frameborder:"0",scrolling:"no"}})])]):e._e()])},staticRenderFns:[]};var l=function(e){s("TPqX")},o=s("VU/8")(a.a,i,!1,l,null,null);t.a=o.exports},TPqX:function(e,t){},eMwH:function(e,t){},s79F:function(e,t,s){"use strict";(function(e){var a=s("QmSG");t.a={props:["modelId"],name:"iframemask",data:function(){return{basic_url:a.a.dev_url,innerVisible:!1,show:!1,url:"",isok1:!0,isok2:!1}},methods:{close:function(){this.show=!1},open:function(){this.show=!0},visible:function(e){"undefined"!=e&&"null"!=e&&(this.modelId=e);var t=this.basic_url;t=t.substring(0,21),this.url=t+"4500",this.show=!0},toggle:function(e){1==this.isok1?this.maxDialog():this.rebackDialog()},maxDialog:function(t){this.isok1=!1,this.isok2=!0,e(".mask_div").width(document.body.clientWidth),e(".mask_div").height(document.body.clientHeight-60),e(".mask_div").css("top","60px")},rebackDialog:function(){this.isok1=!0,this.isok2=!1,e(".mask_div").css("width","80%"),e(".mask_div").css("height","80%"),e(".mask_div").css("top","100px")}},mounted:function(){}}}).call(t,s("7t+N"))},vB22:function(e,t){},wcw1:function(e,t,s){"use strict";(function(e){var a=s("bOdI"),i=s.n(a),l=s("QmSG"),o=s("JXdT");t.a={name:"masks",components:{iframemask:o.a},props:{modelflow:{type:Object,default:function(){return{key:"",category:"",name:"",description:""}}},page:Object},data:function(){var e;return e={falg:!1,basic_url:l.a.dev_url,show:!1,selUser:[],edit:!0},i()(e,"show",!1),i()(e,"isok1",!0),i()(e,"isok2",!1),i()(e,"modelId",""),i()(e,"activeNames",["1"]),i()(e,"rules",{key:[{required:!0,message:"请填写模型标识",trigger:"blur"}],category:[{required:!0,message:"请填写模型类型",trigger:"blur"}],name:[{required:!0,message:"请填写模型名称",trigger:"blur"}],description:[{required:!0,message:"请填写模型描述",trigger:"blur"}]}),e},methods:{visible:function(){this.show=!0},close:function(){this.show=!1,this.$emit("request")},open:function(){this.show=!0},toggle:function(e){1==this.isok1?this.maxDialog():this.rebackDialog()},maxDialog:function(t){this.isok1=!1,this.isok2=!0,e(".mask_div").width(document.body.clientWidth),e(".mask_div").height(document.body.clientHeight-60),e(".mask_div").css("top","60px")},rebackDialog:function(){this.isok1=!0,this.isok2=!1,e(".mask_div").css("width","80%"),e(".mask_div").css("height","80%"),e(".mask_div").css("top","100px")},save:function(){var e=this;this.$refs.modelflow.validate(function(t){if(!t)return console.log("error submit!!"),e.show=!1,!1;var s=e.basic_url+"/api-flow/flow/model/create";e.$axios.get(s,{}).then(function(t){console.log(t.data.modelId),e.modelId=t.data.modelId,console.log(t),200==t.status&&e.$refs.child.visible()}).catch(function(t){e.$message({message:"网络错误，请重试123",type:"error"})})})},saveAndUpdate:function(){this.save()},saveAndSubmit:function(){this.save(),this.show=!0}},mounted:function(){}}}).call(t,s("7t+N"))}});
//# sourceMappingURL=9.77be73c8e47848134998.js.map